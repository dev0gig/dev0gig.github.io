<div class="min-h-screen text-dash-text p-4 md:p-8 font-sans selection:bg-dash-accent selection:text-white pb-16">
    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-12 gap-4">

        <!-- Header -->
        <header
            class="md:col-span-12 flex items-center justify-between gradient-header p-4 rounded-sm sticky top-0 z-50 shadow-lg">
            <div class="flex items-center gap-4">
                <!-- Apps Launcher -->
                <app-apps-launcher (openSettings)="toggleSettingsModal()"></app-apps-launcher>
                <h1 class="text-sm font-bold tracking-widest text-dash-text-dim uppercase">Dashboard</h1>
            </div>
            <div class="flex gap-4 text-xs font-mono text-dash-text-dim items-center">
                <div>STATUS
                    <span [class.text-dash-accent]="isOnline()" [class.text-red-500]="!isOnline()">
                        {{ isOnline() ? 'ONLINE' : 'OFFLINE' }}
                    </span>
                </div>
                <!-- Right Sidebar Toggle -->
                <button (click)="toggleRightSidebar()"
                    class="w-10 h-10 bg-dash-bg rounded-sm flex items-center justify-center hover:bg-dash-accent cursor-pointer text-dash-text-dim hover:text-white transition-all"
                    title="Rechte Sidebar">
                    <span class="material-symbols-sharp text-xl">menu_open</span>
                </button>
            </div>
        </header>

        <!-- Welcome Banner -->
        <div
            class="md:col-span-12 gradient-card p-4 sm:p-6 rounded-sm flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
            <div>
                <h2 class="text-xl sm:text-2xl font-bold text-dash-text mb-1">Willkommen zum Dashboard</h2>
                <p class="text-xs sm:text-sm text-dash-text-dim">Verwalten Sie Ihre Projekte und Lesezeichen.</p>
            </div>
            <div class="flex gap-3">
                <button (click)="navigateToJournal()"
                    class="gradient-btn text-white px-3 sm:px-4 py-2 sm:py-2.5 rounded-sm transition-all hover:-translate-y-0.5 flex items-center gap-2">
                    <span class="material-symbols-sharp text-lg sm:text-xl">description</span>
                    <span class="text-sm font-medium">Journal</span>
                </button>
                <button (click)="navigateToBudget()"
                    class="gradient-btn text-white px-3 sm:px-4 py-2 sm:py-2.5 rounded-sm transition-all hover:-translate-y-0.5 flex items-center gap-2">
                    <span class="material-symbols-sharp text-lg sm:text-xl">payments</span>
                    <span class="text-sm font-medium">Budget</span>
                </button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div *ngIf="showSettingsModal()" class="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" (click)="toggleSettingsModal()">
            </div>
            <div
                class="relative gradient-card p-6 rounded-sm shadow-2xl w-full max-w-lg flex flex-col gap-4 max-h-[90vh] overflow-y-auto accent-glow">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-bold text-dash-text">Settings</h2>
                    <button (click)="toggleSettingsModal()"
                        class="text-dash-text-dim hover:text-white transition-colors">
                        <span class="material-symbols-sharp">close</span>
                    </button>
                </div>

                <!-- Project Selection -->
                <div class="flex flex-col gap-3">
                    <div class="flex items-center justify-between">
                        <h3 class="text-sm font-bold text-dash-text">Projekte auswählen</h3>
                        <div class="flex gap-2">
                            <button (click)="selectAllProjects()"
                                class="text-xs text-dash-accent hover:text-dash-accent/80 transition-colors">
                                Alle
                            </button>
                            <span class="text-dash-text-dim">|</span>
                            <button (click)="deselectAllProjects()"
                                class="text-xs text-dash-text-dim hover:text-white transition-colors">
                                Keine
                            </button>
                        </div>
                    </div>
                    <div class="grid grid-cols-5 gap-2">
                        <button (click)="toggleProjectSelection('bookmarks')"
                            [class]="projectSelection().bookmarks ? 'flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors' : 'flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors'">
                            <span class="material-symbols-sharp text-xl">bookmarks</span>
                            <span class="text-xs font-medium">Lesezeichen</span>
                        </button>
                        <button (click)="toggleProjectSelection('journal')"
                            [class]="projectSelection().journal ? 'flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors' : 'flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors'">
                            <span class="material-symbols-sharp text-xl">description</span>
                            <span class="text-xs font-medium">Journal</span>
                        </button>
                        <button (click)="toggleProjectSelection('budget')"
                            [class]="projectSelection().budget ? 'flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors' : 'flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors'">
                            <span class="material-symbols-sharp text-xl">payments</span>
                            <span class="text-xs font-medium">Budget</span>
                        </button>
                        <button (click)="toggleProjectSelection('audioNotes')"
                            [class]="projectSelection().audioNotes ? 'flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors' : 'flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors'">
                            <span class="material-symbols-sharp text-xl">mic</span>
                            <span class="text-xs font-medium">AudioNotes</span>
                        </button>
                        <button (click)="toggleProjectSelection('recentlyPlayed')"
                            [class]="projectSelection().recentlyPlayed ? 'flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors' : 'flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors'">
                            <span class="material-symbols-sharp text-xl">history</span>
                            <span class="text-xs font-medium">Zuletzt</span>
                        </button>
                    </div>
                </div>

                <div class="border-t border-dash-border"></div>

                <!-- Accent Color Selection -->
                <div class="flex flex-col gap-3">
                    <h3 class="text-sm font-bold text-dash-text">Akzentfarbe</h3>
                    <p class="text-xs text-dash-text-dim">
                        Wählen Sie eine Akzentfarbe für die Benutzeroberfläche.
                    </p>
                    <div class="grid grid-cols-7 gap-2">
                        <button *ngFor="let color of accentColors" (click)="themeService.setAccentColor(color)"
                            [style.background-color]="color.value"
                            [class]="themeService.currentAccentColor().value === color.value ? 'w-full aspect-square rounded-sm ring-2 ring-white ring-offset-2 ring-offset-dash-card transition-all hover:scale-110' : 'w-full aspect-square rounded-sm transition-all hover:scale-110 hover:ring-1 hover:ring-white/50'"
                            [title]="color.name">
                        </button>
                    </div>
                    <div class="text-xs text-dash-text-dim">
                        Aktuelle Farbe: <span class="font-medium text-dash-text">{{
                            themeService.currentAccentColor().name }}</span>
                    </div>
                </div>

                <div class="border-t border-dash-border"></div>

                <!-- Backup / Restore Section -->
                <div class="flex flex-col gap-3">
                    <h3 class="text-sm font-bold text-dash-text">Backup & Wiederherstellung</h3>
                    <p class="text-xs text-dash-text-dim">
                        Exportieren oder importieren Sie Daten für die ausgewählten Projekte als ZIP-Datei.
                    </p>
                    <div class="flex gap-2">
                        <button (click)="exportAllData()" [disabled]="!hasAnyProjectSelected()"
                            class="flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-dash-bg border border-dash-border hover:border-dash-accent text-dash-text rounded-sm transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-dash-border">
                            <span class="material-symbols-sharp">download</span>
                            Exportieren
                        </button>
                        <button (click)="triggerImportAll()" [disabled]="!hasAnyProjectSelected()"
                            class="flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-dash-bg border border-dash-border hover:border-dash-accent text-dash-text rounded-sm transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:border-dash-border">
                            <span class="material-symbols-sharp">upload</span>
                            Importieren
                        </button>
                    </div>
                </div>

                <div class="border-t border-dash-border"></div>

                <!-- Lesezeichen Import (Chrome HTML) -->
                <div class="flex flex-col gap-2">
                    <h3 class="text-sm font-bold text-dash-text">Lesezeichen (Chrome HTML)</h3>
                    <div class="flex gap-2">
                        <button (click)="exportBookmarks()"
                            class="flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-dash-bg border border-dash-border hover:border-dash-accent text-dash-text rounded-sm transition-colors text-sm">
                            <span class="material-symbols-sharp">download</span>
                            HTML Export
                        </button>
                        <button (click)="triggerImport()"
                            class="flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-dash-bg border border-dash-border hover:border-dash-accent text-dash-text rounded-sm transition-colors text-sm">
                            <span class="material-symbols-sharp">upload</span>
                            HTML Import
                        </button>
                    </div>
                    <p class="text-xs text-dash-text-dim">
                        Unterstützt den Import von Chrome-Lesezeichen (HTML).
                    </p>
                </div>

                <div class="border-t border-dash-border"></div>

                <!-- Danger Zone -->
                <div class="flex flex-col gap-3">
                    <h3 class="text-sm font-bold text-red-500">Gefahrenzone</h3>
                    <p class="text-xs text-dash-text-dim">
                        Löschen Sie alle Daten für die ausgewählten Projekte. Diese Aktion kann nicht rückgängig gemacht
                        werden!
                    </p>
                    <button (click)="deleteAllData()" [disabled]="!hasAnyProjectSelected()"
                        class="flex items-center justify-center gap-2 px-4 py-3 bg-red-500/10 border border-red-500/30 hover:bg-red-500/20 text-red-500 rounded-sm transition-colors text-sm disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-red-500/10">
                        <span class="material-symbols-sharp">delete_forever</span>
                        Ausgewählte Daten löschen
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="md:col-span-12 flex flex-col gap-4 sm:gap-6">
            <!-- Bookmarks Header and Controls -->
            <div class="gradient-card p-3 sm:p-4 rounded-sm">
                <div class="flex flex-col gap-3">
                    <!-- Top Row: Heading -->
                    <h3 class="text-base sm:text-lg font-bold text-dash-text flex items-center gap-2 whitespace-nowrap">
                        <span class="material-symbols-sharp text-dash-accent text-lg sm:text-xl">bookmarks</span>
                        <span class="hidden xs:inline">Meine </span>Lesezeichen
                    </h3>

                    <!-- Desktop: All inputs on one line -->
                    <div class="hidden md:flex gap-2 items-center">
                        <!-- Google Search -->
                        <div class="relative group flex-[2]">
                            <span class="absolute left-3 top-1/2 -translate-y-1/2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 48 48">
                                    <path fill="#FFC107"
                                        d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z" />
                                    <path fill="#FF3D00"
                                        d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z" />
                                    <path fill="#4CAF50"
                                        d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z" />
                                    <path fill="#1976D2"
                                        d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z" />
                                </svg>
                            </span>
                            <input type="text" [(ngModel)]="googleSearchTerm" (keydown.enter)="searchGoogle($event)"
                                placeholder="Google Suche..."
                                class="w-full bg-dash-bg border border-dash-border text-dash-text pl-10 pr-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent transition-colors">
                        </div>
                        <!-- Bookmark Search -->
                        <div class="relative group flex-[2]">
                            <span
                                class="absolute left-3 top-1/2 -translate-y-1/2 text-dash-text-dim group-focus-within:text-dash-accent transition-colors">
                                <span class="material-symbols-sharp text-lg">search</span>
                            </span>
                            <input type="text" [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event)"
                                name="bookmarkSearch" placeholder="Lesezeichen suchen..."
                                class="w-full bg-dash-bg border border-dash-border text-dash-text pl-10 pr-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent transition-colors">
                            <button type="button" *ngIf="searchTerm()" (click)="searchTerm.set('')"
                                class="absolute right-2 top-1/2 -translate-y-1/2 text-dash-text-dim hover:text-dash-text">
                                <span class="material-symbols-sharp text-sm">close</span>
                            </button>
                        </div>
                        <!-- Name Input (shorter) -->
                        <input type="text" [(ngModel)]="newBookmarkName" name="bookmarkName" placeholder="Name"
                            class="w-28 bg-dash-bg border border-dash-border text-dash-text px-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent">
                        <!-- URL Input (shorter) -->
                        <input type="text" [(ngModel)]="newBookmarkUrl" name="bookmarkUrl" placeholder="URL"
                            class="w-36 bg-dash-bg border border-dash-border text-dash-text px-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent">
                        <!-- Add Button -->
                        <button type="button" (click)="addBookmark()" [disabled]="!newBookmarkName || !newBookmarkUrl"
                            class="bg-dash-card hover:bg-dash-accent border border-dash-border hover:border-dash-accent text-dash-text hover:text-white px-3 h-10 rounded-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"
                            title="Lesezeichen hinzufügen">
                            <span class="material-symbols-sharp text-lg">add</span>
                        </button>
                        <!-- Edit Button -->
                        <button type="button" (click)="toggleEditMode()" [class.bg-dash-accent]="isEditMode()"
                            [class.text-white]="isEditMode()" [class.border-dash-accent]="isEditMode()"
                            class="bg-dash-card hover:bg-dash-accent border border-dash-border hover:border-dash-accent text-dash-text hover:text-white px-3 h-10 rounded-sm transition-all flex items-center"
                            title="Bearbeitungsmodus umschalten">
                            <span class="material-symbols-sharp text-lg">edit</span>
                        </button>
                    </div>

                    <!-- Mobile: Stacked layout -->
                    <div class="flex flex-col gap-2 md:hidden">
                        <!-- Google Search -->
                        <div class="relative group">
                            <span class="absolute left-3 top-1/2 -translate-y-1/2">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 48 48">
                                    <path fill="#FFC107"
                                        d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z" />
                                    <path fill="#FF3D00"
                                        d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z" />
                                    <path fill="#4CAF50"
                                        d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z" />
                                    <path fill="#1976D2"
                                        d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z" />
                                </svg>
                            </span>
                            <input type="text" [(ngModel)]="googleSearchTerm" (keydown.enter)="searchGoogle($event)"
                                placeholder="Google Suche..."
                                class="w-full bg-dash-bg border border-dash-border text-dash-text pl-10 pr-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent transition-colors">
                        </div>
                        <!-- Bookmark Search -->
                        <div class="relative group">
                            <span
                                class="absolute left-3 top-1/2 -translate-y-1/2 text-dash-text-dim group-focus-within:text-dash-accent transition-colors">
                                <span class="material-symbols-sharp text-lg">search</span>
                            </span>
                            <input type="text" [ngModel]="searchTerm()" (ngModelChange)="searchTerm.set($event)"
                                placeholder="Lesezeichen suchen..."
                                class="w-full bg-dash-bg border border-dash-border text-dash-text pl-10 pr-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent transition-colors">
                            <button *ngIf="searchTerm()" (click)="searchTerm.set('')"
                                class="absolute right-2 top-1/2 -translate-y-1/2 text-dash-text-dim hover:text-dash-text">
                                <span class="material-symbols-sharp text-sm">close</span>
                            </button>
                        </div>
                        <!-- Add Bookmark Inputs -->
                        <div class="flex gap-2">
                            <input type="text" [(ngModel)]="newBookmarkName" placeholder="Name"
                                class="flex-1 min-w-0 bg-dash-bg border border-dash-border text-dash-text px-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent transition-colors">
                            <input type="text" [(ngModel)]="newBookmarkUrl" placeholder="URL"
                                class="flex-1 min-w-0 bg-dash-bg border border-dash-border text-dash-text px-3 h-10 rounded-sm text-sm focus:outline-none focus:border-dash-accent transition-colors">
                        </div>
                        <!-- Buttons Row -->
                        <div class="flex gap-2">
                            <button (click)="addBookmark()" [disabled]="!newBookmarkName || !newBookmarkUrl"
                                class="flex-1 bg-dash-card hover:bg-dash-accent border border-dash-border hover:border-dash-accent text-dash-text hover:text-white px-4 h-10 rounded-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                                <span class="material-symbols-sharp text-lg">add</span>
                                <span>Hinzufügen</span>
                            </button>
                            <button (click)="toggleEditMode()" [class.bg-dash-accent]="isEditMode()"
                                [class.text-white]="isEditMode()" [class.border-dash-accent]="isEditMode()"
                                class="bg-dash-card hover:bg-dash-accent border border-dash-border hover:border-dash-accent text-dash-text hover:text-white px-4 h-10 rounded-sm transition-all flex items-center justify-center gap-2"
                                title="Bearbeitungsmodus umschalten">
                                <span class="material-symbols-sharp text-lg">edit</span>
                                <span>Bearbeiten</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bookmarks Grid -->
            <div
                class="grid grid-cols-4 xs:grid-cols-5 sm:grid-cols-6 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-1.5 xs:gap-2 sm:gap-3">
                <div *ngFor="let bookmark of filteredBookmarks()"
                    class="group relative gradient-card hover:border-dash-accent p-1.5 xs:p-2 sm:p-3 rounded-sm flex flex-col items-center justify-center gap-1 xs:gap-1.5 sm:gap-2 transition-all hover:-translate-y-1 hover:shadow-lg hover:accent-glow aspect-square">

                    <!-- Actions (Visible in Edit Mode) -->
                    <div *ngIf="isEditMode()"
                        class="absolute inset-0 bg-dash-card/90 backdrop-blur-sm z-10 flex flex-col items-center justify-center gap-2 sm:gap-4 rounded-sm animate-in fade-in duration-200">
                        <div class="flex gap-0.5 sm:gap-1">
                            <button (click)="bookmarkService.toggleFavorite(bookmark.id)"
                                [class.text-yellow-400]="bookmark.isFavorite"
                                [class.text-dash-text-dim]="!bookmark.isFavorite"
                                class="p-0.5 sm:p-1 bg-dash-bg rounded-sm hover:text-yellow-400 transition-colors border border-dash-border"
                                title="Favorit">
                                <span class="material-symbols-sharp text-xs sm:text-sm">star</span>
                            </button>
                            <button (click)="startEditingBookmark(bookmark)"
                                class="p-0.5 sm:p-1 bg-dash-bg rounded-sm text-dash-text-dim hover:text-dash-accent transition-colors border border-dash-border"
                                title="Bearbeiten">
                                <span class="material-symbols-sharp text-xs sm:text-sm">edit</span>
                            </button>
                            <button (click)="bookmarkService.removeBookmark(bookmark.id)"
                                class="p-0.5 sm:p-1 bg-dash-bg rounded-sm text-dash-text-dim hover:text-red-500 transition-colors border border-dash-border"
                                title="Löschen">
                                <span class="material-symbols-sharp text-xs sm:text-sm">delete</span>
                            </button>
                        </div>
                        <span class="text-[10px] sm:text-xs text-dash-text font-medium text-center line-clamp-1">{{
                            bookmark.name }}</span>
                    </div>

                    <!-- Icon & Link -->
                    <a [href]="bookmark.url" [target]="isEditMode() ? '_self' : '_blank'" (click)="onBookmarkClick()"
                        [class.pointer-events-none]="isEditMode()"
                        class="flex flex-col items-center gap-0.5 xs:gap-1 sm:gap-2 w-full h-full justify-center">
                        <img [src]="bookmarkService.getFaviconUrl(bookmark.url)"
                            (error)="$event.target.style.display='none'"
                            class="w-10 h-10 xs:w-10 xs:h-10 sm:w-8 sm:h-8 md:w-10 md:h-10 rounded-sm flex-shrink-0"
                            alt="Icon">
                        <span
                            class="text-[9px] xs:text-[10px] sm:text-xs font-medium text-dash-text w-full text-center line-clamp-2 break-words leading-tight">{{
                            bookmark.name }}</span>
                    </a>

                    <!-- Favorite Indicator (Always visible if favorite and NOT in edit mode) -->
                    <div *ngIf="bookmark.isFavorite && !isEditMode()"
                        class="absolute top-1 left-1 sm:top-2 sm:left-2 text-yellow-400">
                        <span class="material-symbols-sharp text-[10px] sm:text-xs">star</span>
                    </div>
                </div>

                <!-- Empty State -->
                <div *ngIf="bookmarkService.bookmarks().length === 0"
                    class="col-span-full py-12 flex flex-col items-center justify-center text-dash-text-dim border-2 border-dashed border-dash-border rounded-sm">
                    <span class="material-symbols-sharp text-4xl mb-2 opacity-50">bookmark_add</span>
                    <p>Noch keine Lesezeichen vorhanden.</p>
                    <p class="text-xs">Fügen Sie oben neue Links hinzu.</p>
                </div>
            </div>
        </main>

    </div>
</div>

<!-- Edit Bookmark Modal -->
<div *ngIf="editingBookmark" class="fixed inset-0 z-[60] flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" (click)="cancelEditingBookmark()"></div>
    <div class="relative gradient-card p-6 rounded-sm shadow-2xl w-full max-w-sm flex flex-col gap-4 accent-glow">
        <h3 class="text-lg font-bold text-dash-text">Lesezeichen bearbeiten</h3>

        <div class="flex flex-col gap-3">
            <div class="flex flex-col gap-1">
                <label class="text-xs text-dash-text-dim uppercase font-bold">Name</label>
                <input type="text" [(ngModel)]="editingBookmark.name"
                    class="bg-dash-bg border border-dash-border text-dash-text px-3 py-2 rounded-sm text-sm focus:outline-none focus:border-dash-accent">
            </div>
            <div class="flex flex-col gap-1">
                <label class="text-xs text-dash-text-dim uppercase font-bold">URL</label>
                <input type="text" [(ngModel)]="editingBookmark.url"
                    class="bg-dash-bg border border-dash-border text-dash-text px-3 py-2 rounded-sm text-sm focus:outline-none focus:border-dash-accent">
            </div>
        </div>

        <div class="flex justify-end gap-2 mt-2">
            <button (click)="cancelEditingBookmark()"
                class="px-4 py-2 text-sm text-dash-text-dim hover:text-dash-text transition-colors">
                Abbrechen
            </button>
            <button (click)="saveEditedBookmark()"
                class="px-4 py-2 gradient-btn text-white rounded-sm text-sm font-medium">
                Speichern
            </button>
        </div>
    </div>
</div>