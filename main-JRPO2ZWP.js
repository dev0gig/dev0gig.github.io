import{a as fn,b as Re}from"./chunk-TXJOOSIC.js";import{a as qe,b as ve,c as Oe}from"./chunk-3SBC54FZ.js";import{b as xe,c as fe,d as ce,e as me,f as _e,g as pe,h as hn,i as xn,j as Ve,k as Ne,m as Ft,n as q}from"./chunk-MF6HSJW6.js";import{$ as gi,$a as Dt,A as x,Aa as m,B as f,C as Pe,D as tt,E as it,Ea as xi,F as Le,Fa as ke,Ga as V,H as M,Ha as z,I as je,Ia as s,J as Ui,Ja as S,K as w,Ka as E,L as Ie,La as re,Ma as te,N as Ge,Na as ie,Oa as ne,P as ze,Pa as Xi,Q as Wi,Qa as Qi,R as Ji,Ra as en,S as mi,Sa as nt,T as We,Ta as fi,U as Ki,Ua as He,V as l,Va as Fe,W as pi,Wa as kt,X as ui,Xa as _i,Y as Je,Ya as tn,_a as de,a as Be,aa as R,ab as Me,b as et,ba as Et,bb as nn,c as Y,ca as $e,cb as on,d as Bi,e as di,ea as j,eb as rn,fb as Ke,g as Li,ga as hi,gb as le,h as ji,ha as se,hb as It,ia as I,ib as an,j as Gi,ja as F,jb as sn,k as vt,ka as Tt,kb as $,l as yt,la as O,lb as dn,m as li,ma as B,mb as ln,n as Ct,na as _,nb as cn,o as St,oa as r,ob as mn,p as ci,pa as d,pb as Ae,q as Ue,qa as A,qb as pn,r as zi,ra as b,rb as un,sa as v,sb as gn,ta as oe,tb as Ye,u as K,ua as Yi,ub as be,v as wt,va as qi,w as Te,wa as P,x as $i,xa as Zi,y as C,ya as u,z as Hi,za as Ce}from"./chunk-3T5KDFEF.js";import{a as H,b as W}from"./chunk-LS4SCMUJ.js";var Ze=class o{bookmarks=w([],{});DEFAULT_BOOKMARKS=[{name:"[DL] ALL Genshin PMX Models (ALWAYS UPDATING) by MarieMMD on DeviantArt",url:"https://www.deviantart.com/mariemmd/art/DL-ALL-Genshin-PMX-Models-ALWAYS-UPDATING-945504849",createdAt:176434087e4},{name:"A1",url:"https://asmp.a1.net/asmp/LoginMasterServlet?userRequestURL=https%253A%252F%252Fwww.a1.net%252Fmein-a1&serviceRegistrationURL=&service=mein-a1-PROD&wrongLoginType=false&cookie=skip&level=10",createdAt:176440033e4},{name:"Amazon",url:"https://www.amazon.de/",createdAt:176440033e4},{name:"Apple TV+",url:"https://tv.apple.com/at",createdAt:176440033e4},{name:"Bitpanda",url:"https://account.bitpanda.com/login",createdAt:176440033e4},{name:"Chess.com",url:"https://www.chess.com/daily",createdAt:176440033e4},{name:"CoinMarketCap",url:"https://coinmarketcap.com/",createdAt:176440033e4},{name:"EpicGames",url:"https://store.epicgames.com/de/",createdAt:176440033e4},{name:"ErsteBank",url:"https://george.sparkasse.at/?at=c#/overview",createdAt:176440033e4},{name:"FinanzOnline",url:"https://finanzonline.bmf.gv.at/fon/",createdAt:176440033e4},{name:"Flins rigged (Free) - Download Free 3D model by Aether36 (@ather36) [4900635]",url:"https://sketchfab.com/3d-models/flins-rigged-free-4900635ff69f46f4a53bd49f1f2060bd",createdAt:176434151e4},{name:"Fotos",url:"https://photos.google.com/",createdAt:176440033e4},{name:"Game8",url:"https://game8.co/",createdAt:1764506352e3},{name:"github",url:"https://github.com/dev0gig",createdAt:176440033e4},{name:"Gmail",url:"https://mail.google.com/mail/u/0/#inbox",createdAt:176440033e4,isFavorite:!0},{name:"Google AI Studio",url:"https://aistudio.google.com/prompts/new_chat",createdAt:176440033e4},{name:"Google Cloud Console",url:"https://console.cloud.google.com/",createdAt:176440033e4},{name:"Google Docs",url:"https://docs.google.com/document/u/0/",createdAt:176440033e4},{name:"Google Drive",url:"https://drive.google.com/drive/my-drive",createdAt:176440033e4},{name:"Google Gemini",url:"https://gemini.google.com/app",createdAt:176440033e4,isFavorite:!0},{name:"Google Kontakte",url:"https://contacts.google.com/",createdAt:176440033e4},{name:"Google Maps",url:"https://www.google.com/maps/@48.1419654,16.2101379,14z?entry=ttu&g_ep=EgoyMDI1MDkxMC4wIKXMDSoASAFQAw%3D%3D",createdAt:176440033e4},{name:"Google Messages",url:"https://messages.google.com/web/welcome",createdAt:176440033e4},{name:"Google Play",url:"https://play.google.com/store/games?device=windows&pli=1",createdAt:176440033e4},{name:"Google Sheets",url:"https://docs.google.com/spreadsheets/u/0/",createdAt:176440033e4},{name:"Google \xDCbersetzer",url:"https://translate.google.com/?sl=de&tl=ja&op=translate",createdAt:176440033e4},{name:"Google Wallet",url:"https://wallet.google.com/wallet/home?utm_source=walletweb",createdAt:176440033e4},{name:"Hockerty",url:"https://www.hockerty.at/de-at/",createdAt:176440033e4},{name:"HoYoLAB",url:"https://www.hoyolab.com/home",createdAt:176440033e4},{name:"iCloud Mail",url:"https://www.icloud.com/mail/",createdAt:176440033e4},{name:"itch.io",url:"https://itch.io/",createdAt:176440033e4},{name:"Kalender",url:"https://calendar.google.com/calendar/u/0/r",createdAt:176440033e4,isFavorite:!0},{name:"Lego",url:"https://www.lego.com/de-at/member",createdAt:176440033e4},{name:"MahjongSoul",url:"https://mahjongsoul.game.yo-star.com/",createdAt:176440033e4},{name:"Manscaped",url:"https://eu.manscaped.com/de",createdAt:176440033e4},{name:"MyHeritage",url:"https://www.myheritage.at/",createdAt:176440033e4},{name:"N26",url:"https://app.n26.com/login",createdAt:176440033e4},{name:"NotebookLM",url:"https://notebooklm.google.com/?pli=1",createdAt:176440033e4},{name:"Notizen",url:"https://keep.google.com/",createdAt:176440033e4,isFavorite:!0},{name:"OmniTools",url:"https://omnitools.app/",createdAt:176440033e4},{name:"OneDrive",url:"https://onedrive.live.com/?view=0",createdAt:176440033e4},{name:"opcyc",url:"https://cu300078.opcyc.net/setup/",createdAt:176440033e4},{name:"Outlook",url:"https://outlook.live.com/mail/",createdAt:176440033e4,isFavorite:!0},{name:"pCloud",url:"https://my.pcloud.com/#/login",createdAt:176440033e4},{name:"PDF24",url:"https://tools.pdf24.org/de/alle-tools",createdAt:176440033e4},{name:"Pinterest",url:"https://at.pinterest.com/",createdAt:176440033e4},{name:"Post",url:"https://login.post.at/f098c632-5a55-45ba-9bf4-c13870157cf1/b2c_1a_signup_signin/oauth2/v2.0/authorize?client_id=c02d3813-d4b9-40a1-9db9-09e34cb9c2e1&redirect_uri=https%3A%2F%2Fwww.post.at%2Fsignin-oidc&response_type=code%20id_token&scope=openid%20profile&state=OpenIdConnect.AuthenticationProperties%3DlvTwsly70gNNGWCziqzfZLp3mDDcmM1crFH_mvMEEqAYDdZ5zcspZupB-WiSxAXb09RsheCQpslyIqILXu5z8EBpFnDBZHOV6gO2-WhIqpBa3-7bxJRJfZjG8TmMYJc5OkYGd7ej8ns3RK7gBdqzmuoy-nrsQ-3EANU0j0-GBHw88B-7SqNqdwUnkt95Ys441nsvlxXDATvK5SjVILJ-vuQfNTyF6w5t_PzjVpCy1uruPXLxo1SySkqonW7bWfcT6kj2T-heXjLRtU1qAfkjyTALxgOXAl4WGI8XSd9XigvbJOsAuuz_Tm41xa04Ol3tNX3KO8I--11OqsNfGXeRYMhNKUSpqc6ybN63jCsoHks&response_mode=form_post&nonce=638934689204904114.OTk2MDVkOWItN2ZmNC00ZGU0LWExZWEtZGNlNmVmMTVjNzEwNDkyMTQyYWYtZGMyOS00YmFmLTgyNmMtMmZlNzU4MDBmYjVl&post_logout_redirect_uri=https%3A%2F%2Fwww.post.at%2Fsitecore%2Flogin&lang=de&x-client-SKU=ID_NET461&x-client-ver=5.7.0.0",createdAt:176440033e4},{name:"Prime Gaming",url:"https://gaming.amazon.com/home",createdAt:176440033e4},{name:"Reddit",url:"https://www.reddit.com/",createdAt:176440033e4},{name:"Revolut",url:"https://sso.revolut.com/signin?client_id=o3r08ao16zvdlf2y5fdc&code_challenge=7EVFQ49eb3I_mM8CF4VSd5ZXTG0xKJ18eWYZrycWhas&code_challenge_method=S256&response_type=code&redirect_uri=https%3A%2F%2Fapp.revolut.com%2Fhome&response_mode=query&ui_color_scheme=dark&ui_locales=en&state=KPbgwrh2iBUue1C4",createdAt:176440033e4},{name:"SmartMeter",url:"https://smartmeter-web.wienernetze.at/uebersicht",createdAt:176440033e4},{name:"Spielraum",url:"https://www.spielraum.co.at/de",createdAt:176440033e4},{name:"SSW",url:"https://dev0gig.github.io/web-SSWTracker/",createdAt:176440033e4},{name:"Steam",url:"https://store.steampowered.com/",createdAt:176440033e4},{name:"SunContracting",url:"https://xserv.kdportal.de/login/?view=/show/Kunde_Vertraege",createdAt:176440033e4},{name:"Tasks",url:"https://tasks.google.com/tasks/",createdAt:176440033e4},{name:"Temu",url:"https://www.temu.com/",createdAt:176440033e4},{name:"Thalia",url:"https://www.thalia.at/",createdAt:176440033e4},{name:"tolino",url:"https://webreader.mytolino.com/library/index.html#/mybooks/titles",createdAt:176440033e4},{name:"TradeRebulic",url:"https://app.traderepublic.com/login",createdAt:176440033e4},{name:"udemy",url:"https://www.udemy.com/join/passwordless-auth/?next=%2Fhome%2Fmy-courses%2Flearning%2F&action=login&mode",createdAt:176440033e4},{name:"WhatsApp",url:"https://web.whatsapp.com/",createdAt:176440033e4},{name:"WienEnergie",url:"https://log.wien/auth/realms/logwien/protocol/openid-connect/auth?response_type=code&client_id=we-meine-we&state=UXozZWV0LmFCRXQwd3Vpdy1vNzM3MXIucS1yT0V5MTNkd3BjNlFlR3JKYWto&redirect_uri=https%3A%2F%2Fmeine.wienenergie.at%2Fprivat%2Fgateway%2Fauth&scope=openid&code_challenge=Zb-SFR4dP-DGFGL_6ICXnFTG39bVeP4LDtpaNOjPMfE&code_challenge_method=S256&nonce=UXozZWV0LmFCRXQwd3Vpdy1vNzM3MXIucS1yT0V5MTNkd3BjNlFlR3JKYWto",createdAt:176440033e4},{name:"WienerSt\xE4dtische",url:"https://losleben.wienerstaedtische.at/app/login",createdAt:176440033e4},{name:"WienMobil",url:"https://www.wienmobil.at/en/monitor/PT",createdAt:176440033e4},{name:"Willhaben",url:"https://www.willhaben.at/iad",createdAt:176440033e4},{name:"YouTube",url:"https://www.youtube.com/",createdAt:176440033e4,isFavorite:!0}];constructor(){this.loadBookmarks(),Ie(()=>{this.saveBookmarks()})}sortBookmarks(i){return i.sort((e,t)=>e.name.localeCompare(t.name))}loadBookmarks(){let i=localStorage.getItem("dev0gig_bookmarks");if(i)try{let e=JSON.parse(i);if(Array.isArray(e)&&e.length>0){this.bookmarks.set(this.sortBookmarks(e));return}}catch(e){console.error("Failed to parse bookmarks",e)}this.importBookmarks(this.DEFAULT_BOOKMARKS)}saveBookmarks(){localStorage.setItem("dev0gig_bookmarks",JSON.stringify(this.bookmarks()))}addBookmark(i,e){!i.startsWith("http://")&&!i.startsWith("https://")&&(i="https://"+i);let t={id:crypto.randomUUID(),url:i,name:e,isFavorite:!1,createdAt:Date.now()};this.bookmarks.update(n=>this.sortBookmarks([t,...n]))}updateBookmark(i,e){this.bookmarks.update(t=>{let n=t.map(a=>a.id===i?H(H({},a),e):a);return this.sortBookmarks(n)})}removeBookmark(i){this.bookmarks.update(e=>e.filter(t=>t.id!==i))}toggleFavorite(i){this.bookmarks.update(e=>e.map(t=>t.id===i?W(H({},t),{isFavorite:!t.isFavorite}):t))}getFaviconUrl(i){try{return`https://www.google.com/s2/favicons?domain=${new URL(i).hostname}&sz=64`}catch{return""}}importBookmarks(i,e=!1){let t=i.map(n=>{let a=n.url;return!a.startsWith("http://")&&!a.startsWith("https://")&&(a="https://"+a),{id:n.id||crypto.randomUUID(),url:a,name:n.name,isFavorite:n.isFavorite||!1,createdAt:n.createdAt||Date.now()}});e?this.bookmarks.set(this.sortBookmarks(t)):this.bookmarks.update(n=>this.sortBookmarks([...t,...n]))}clearAllBookmarks(){this.bookmarks.set([])}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};function Xn(o,i){if(o&1){let e=P();r(0,"button",77),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.themeService.setAccentColor(n))}),d()}if(o&2){let e=i.$implicit,t=m(2);z(t.themeService.currentAccentColor().value===e.value?"w-full aspect-square rounded-sm ring-2 ring-white ring-offset-2 ring-offset-dash-card transition-all hover:scale-110":"w-full aspect-square rounded-sm transition-all hover:scale-110 hover:ring-1 hover:ring-white/50"),ke("background-color",e.value),_("title",e.name)}}function Qn(o,i){if(o&1){let e=P();r(0,"div",53)(1,"div",54),u("click",function(){x(e);let n=m();return f(n.toggleSettingsModal())}),d(),r(2,"div",55)(3,"div",56)(4,"h2",57),s(5,"Settings"),d(),r(6,"button",58),u("click",function(){x(e);let n=m();return f(n.toggleSettingsModal())}),r(7,"span",59),s(8,"close"),d()()(),r(9,"div",19)(10,"div",56)(11,"h3",60),s(12,"Projekte ausw\xE4hlen"),d(),r(13,"div",44)(14,"button",61),u("click",function(){x(e);let n=m();return f(n.selectAllProjects())}),s(15," Alle "),d(),r(16,"span",62),s(17,"|"),d(),r(18,"button",63),u("click",function(){x(e);let n=m();return f(n.deselectAllProjects())}),s(19," Keine "),d()()(),r(20,"div",64)(21,"button",65),u("click",function(){x(e);let n=m();return f(n.toggleProjectSelection("bookmarks"))}),r(22,"span",8),s(23,"bookmarks"),d(),r(24,"span",66),s(25,"Lesezeichen"),d()(),r(26,"button",65),u("click",function(){x(e);let n=m();return f(n.toggleProjectSelection("journal"))}),r(27,"span",8),s(28,"description"),d(),r(29,"span",66),s(30,"Journal"),d()(),r(31,"button",65),u("click",function(){x(e);let n=m();return f(n.toggleProjectSelection("budget"))}),r(32,"span",8),s(33,"payments"),d(),r(34,"span",66),s(35,"Budget"),d()(),r(36,"button",65),u("click",function(){x(e);let n=m();return f(n.toggleProjectSelection("audioNotes"))}),r(37,"span",8),s(38,"mic"),d(),r(39,"span",66),s(40,"AudioNotes"),d()(),r(41,"button",65),u("click",function(){x(e);let n=m();return f(n.toggleProjectSelection("recentlyPlayed"))}),r(42,"span",8),s(43,"history"),d(),r(44,"span",66),s(45,"Zuletzt"),d()()()(),A(46,"div",67),r(47,"div",19)(48,"h3",60),s(49,"Akzentfarbe"),d(),r(50,"p",68),s(51," W\xE4hlen Sie eine Akzentfarbe f\xFCr die Benutzeroberfl\xE4che. "),d(),r(52,"div",69),j(53,Xn,1,5,"button",70),d(),r(54,"div",68),s(55," Aktuelle Farbe: "),r(56,"span",71),s(57),d()()(),A(58,"div",67),r(59,"div",19)(60,"h3",60),s(61,"Backup & Wiederherstellung"),d(),r(62,"p",68),s(63," Exportieren oder importieren Sie Daten f\xFCr die ausgew\xE4hlten Projekte als ZIP-Datei. "),d(),r(64,"div",44)(65,"button",72),u("click",function(){x(e);let n=m();return f(n.exportAllData())}),r(66,"span",59),s(67,"download"),d(),s(68," Exportieren "),d(),r(69,"button",72),u("click",function(){x(e);let n=m();return f(n.triggerImportAll())}),r(70,"span",59),s(71,"upload"),d(),s(72," Importieren "),d()()(),A(73,"div",67),r(74,"div",73)(75,"h3",60),s(76,"Lesezeichen (Chrome HTML)"),d(),r(77,"div",44)(78,"button",74),u("click",function(){x(e);let n=m();return f(n.exportBookmarks())}),r(79,"span",59),s(80,"download"),d(),s(81," HTML Export "),d(),r(82,"button",74),u("click",function(){x(e);let n=m();return f(n.triggerImport())}),r(83,"span",59),s(84,"upload"),d(),s(85," HTML Import "),d()(),r(86,"p",68),s(87," Unterst\xFCtzt den Import von Chrome-Lesezeichen (HTML). "),d()(),A(88,"div",67),r(89,"div",19)(90,"h3",75),s(91,"Gefahrenzone"),d(),r(92,"p",68),s(93," L\xF6schen Sie alle Daten f\xFCr die ausgew\xE4hlten Projekte. Diese Aktion kann nicht r\xFCckg\xE4ngig gemacht werden! "),d(),r(94,"button",76),u("click",function(){x(e);let n=m();return f(n.deleteAllData())}),r(95,"span",59),s(96,"delete_forever"),d(),s(97," Ausgew\xE4hlte Daten l\xF6schen "),d()()()()}if(o&2){let e=m();l(21),z(e.projectSelection().bookmarks?"flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors":"flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors"),l(5),z(e.projectSelection().journal?"flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors":"flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors"),l(5),z(e.projectSelection().budget?"flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors":"flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors"),l(5),z(e.projectSelection().audioNotes?"flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors":"flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors"),l(5),z(e.projectSelection().recentlyPlayed?"flex flex-col items-center gap-2 p-3 bg-dash-accent/20 border border-dash-accent text-dash-accent rounded-sm transition-colors":"flex flex-col items-center gap-2 p-3 bg-dash-bg border border-dash-border text-dash-text-dim hover:border-dash-text-dim rounded-sm transition-colors"),l(12),_("ngForOf",e.accentColors),l(4),S(e.themeService.currentAccentColor().name),l(8),_("disabled",!e.hasAnyProjectSelected()),l(4),_("disabled",!e.hasAnyProjectSelected()),l(25),_("disabled",!e.hasAnyProjectSelected())}}function eo(o,i){if(o&1){let e=P();r(0,"button",78),u("click",function(){x(e);let n=m();return f(n.searchTerm.set(""))}),r(1,"span",79),s(2,"close"),d()()}}function to(o,i){if(o&1){let e=P();r(0,"button",80),u("click",function(){x(e);let n=m();return f(n.searchTerm.set(""))}),r(1,"span",79),s(2,"close"),d()()}}function io(o,i){if(o&1){let e=P();r(0,"div",87)(1,"div",88)(2,"button",89),u("click",function(){x(e);let n=m().$implicit,a=m();return f(a.bookmarkService.toggleFavorite(n.id))}),r(3,"span",90),s(4,"star"),d()(),r(5,"button",91),u("click",function(){x(e);let n=m().$implicit,a=m();return f(a.startEditingBookmark(n))}),r(6,"span",90),s(7,"edit"),d()(),r(8,"button",92),u("click",function(){x(e);let n=m().$implicit,a=m();return f(a.bookmarkService.removeBookmark(n.id))}),r(9,"span",90),s(10,"delete"),d()()(),r(11,"span",93),s(12),d()()}if(o&2){let e=m().$implicit;l(2),V("text-yellow-400",e.isFavorite)("text-dash-text-dim",!e.isFavorite),l(10),S(e.name)}}function no(o,i){o&1&&(r(0,"div",94)(1,"span",95),s(2,"star"),d()())}function oo(o,i){if(o&1){let e=P();r(0,"div",81),j(1,io,13,5,"div",82),r(2,"a",83),u("click",function(){x(e);let n=m();return f(n.onBookmarkClick())}),r(3,"img",84),u("error",function(n){return x(e),f(n.target.style.display="none")}),d(),r(4,"span",85),s(5),d()(),j(6,no,3,0,"div",86),d()}if(o&2){let e=i.$implicit,t=m();l(),_("ngIf",t.isEditMode()),l(),V("pointer-events-none",t.isEditMode()),_("href",e.url,We)("target",t.isEditMode()?"_self":"_blank"),l(),_("src",t.bookmarkService.getFaviconUrl(e.url),We),l(2),S(e.name),l(),_("ngIf",e.isFavorite&&!t.isEditMode())}}function ro(o,i){o&1&&(r(0,"div",96)(1,"span",97),s(2,"bookmark_add"),d(),r(3,"p"),s(4,"Noch keine Lesezeichen vorhanden."),d(),r(5,"p",98),s(6,"F\xFCgen Sie oben neue Links hinzu."),d()())}function ao(o,i){if(o&1){let e=P();r(0,"div",99)(1,"div",54),u("click",function(){x(e);let n=m();return f(n.cancelEditingBookmark())}),d(),r(2,"div",100)(3,"h3",57),s(4,"Lesezeichen bearbeiten"),d(),r(5,"div",19)(6,"div",101)(7,"label",102),s(8,"Name"),d(),r(9,"input",103),ne("ngModelChange",function(n){x(e);let a=m();return ie(a.editingBookmark.name,n)||(a.editingBookmark.name=n),f(n)}),d()(),r(10,"div",101)(11,"label",102),s(12,"URL"),d(),r(13,"input",103),ne("ngModelChange",function(n){x(e);let a=m();return ie(a.editingBookmark.url,n)||(a.editingBookmark.url=n),f(n)}),d()()(),r(14,"div",104)(15,"button",105),u("click",function(){x(e);let n=m();return f(n.cancelEditingBookmark())}),s(16," Abbrechen "),d(),r(17,"button",106),u("click",function(){x(e);let n=m();return f(n.saveEditedBookmark())}),s(18," Speichern "),d()()()()}if(o&2){let e=m();l(9),te("ngModel",e.editingBookmark.name),l(4),te("ngModel",e.editingBookmark.url)}}var Mt=class o{bookmarkService=C(Ze);journalService=C(ve);themeService=C(Re);sidebarService=C(be);settingsService=C(Oe);router=C(Ae);isOnline=w(!0,{});showSettingsModal=w(!1,{});accentColors=fn;projectSelection=w({bookmarks:!0,journal:!0,budget:!0,audioNotes:!0,recentlyPlayed:!0},{});newBookmarkUrl="";newBookmarkName="";searchTerm=w("",{});googleSearchTerm="";filteredBookmarks=de(()=>{let i=this.searchTerm().toLowerCase(),e=this.bookmarkService.bookmarks();return i?e.filter(t=>t.name.toLowerCase().includes(i)||t.url.toLowerCase().includes(i)):e},{});onBookmarkClick(){this.searchTerm()&&this.searchTerm.set("")}searchGoogle(i){if(i.preventDefault(),this.googleSearchTerm){let e=encodeURIComponent(this.googleSearchTerm);window.open(`https://www.google.com/search?q=${e}`,"_blank"),this.googleSearchTerm=""}}toggleSettingsModal(){this.showSettingsModal.update(i=>!i)}toggleRightSidebar(){this.sidebarService.toggleRight()}isEditMode=w(!1,{});editingBookmark=null;toggleEditMode(){this.isEditMode.update(i=>!i),this.editingBookmark=null}startEditingBookmark(i){this.editingBookmark=H({},i)}saveEditedBookmark(){this.editingBookmark&&this.editingBookmark.name&&this.editingBookmark.url&&(this.bookmarkService.updateBookmark(this.editingBookmark.id,{name:this.editingBookmark.name,url:this.editingBookmark.url}),this.editingBookmark=null)}cancelEditingBookmark(){this.editingBookmark=null}addBookmark(){this.newBookmarkUrl&&this.newBookmarkName&&(this.bookmarkService.addBookmark(this.newBookmarkUrl,this.newBookmarkName),this.newBookmarkUrl="",this.newBookmarkName="")}navigateToJournal(){this.router.navigate(["/journal"])}navigateToBudget(){this.router.navigate(["/budget"])}exportBookmarks(){let i=this.bookmarkService.bookmarks(),e=Math.floor(Date.now()/1e3),t=`<!DOCTYPE NETSCAPE-Bookmark-file-1>
<!-- This is an automatically generated file.
     It will be read and overwritten.
     DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks</TITLE>
<H1>Bookmarks</H1>
<DL><p>
    <DT><H3 ADD_DATE="${e}" LAST_MODIFIED="${e}">dev0gig Dashboard</H3>
    <DL><p>
`;i.forEach(p=>{let g=Math.floor(p.createdAt/1e3);t+=`        <DT><A HREF="${p.url}" ADD_DATE="${g}">${p.name}</A>
`}),t+=`    </DL><p>
</DL><p>`;let n=new Blob([t],{type:"text/html"}),a=window.URL.createObjectURL(n),c=document.createElement("a");c.href=a,c.download=`bookmarks_${new Date().toISOString().split("T")[0]}.html`,c.click(),window.URL.revokeObjectURL(a)}triggerImport(){let i=document.createElement("input");i.type="file",i.accept=".html",i.onchange=e=>{let t=e.target.files[0];t&&this.processImportFile(t)},i.click()}processImportFile(i){let e=new FileReader;e.onload=t=>{let n=t.target.result;this.parseAndImportBookmarks(n)},e.readAsText(i)}parseAndImportBookmarks(i){let n=new DOMParser().parseFromString(i,"text/html").getElementsByTagName("a"),a=[];for(let c=0;c<n.length;c++){let p=n[c],g=p.href,h=p.textContent||g,y=p.getAttribute("add_date"),T=Date.now();if(y)try{T=parseInt(y)*1e3}catch(k){console.warn("Invalid date in bookmark",k)}g&&!g.startsWith("place:")&&a.push({url:g,name:h,createdAt:T})}a.length>0?(this.bookmarkService.importBookmarks(a),this.toggleSettingsModal(),alert(`${a.length} Lesezeichen erfolgreich importiert.`)):alert("Keine Lesezeichen in der Datei gefunden.")}toggleProjectSelection(i){this.projectSelection.update(e=>W(H({},e),{[i]:!e[i]}))}selectAllProjects(){this.projectSelection.set({bookmarks:!0,journal:!0,budget:!0,audioNotes:!0,recentlyPlayed:!0})}deselectAllProjects(){this.projectSelection.set({bookmarks:!1,journal:!1,budget:!1,audioNotes:!1,recentlyPlayed:!1})}hasAnyProjectSelected(){let i=this.projectSelection();return i.bookmarks||i.journal||i.budget||i.audioNotes||i.recentlyPlayed}async exportAllData(){let i=this.projectSelection();if(!this.hasAnyProjectSelected()){alert("Bitte w\xE4hlen Sie mindestens ein Projekt zum Exportieren aus.");return}let e=(await import("./chunk-7DPAS54S.js")).default,t=new e,n=new Date().toISOString();if(i.bookmarks){let h=this.bookmarkService.bookmarks(),y={exportDate:n,version:"1.0",project:"bookmarks",data:h};t.file("bookmarks.json",JSON.stringify(y,null,2))}if(i.journal){let h=this.journalService.entries(),y={exportDate:n,version:"1.0",project:"journal",data:h};t.file("journal.json",JSON.stringify(y,null,2))}if(i.budget){let h=localStorage.getItem("mybudget_transactions"),y=localStorage.getItem("mybudget_accounts"),T=localStorage.getItem("mybudget_categories"),k=localStorage.getItem("mybudget_fixedcosts"),D=localStorage.getItem("mybudget_fixedcostgroups"),N={exportDate:n,version:"1.2",project:"budget",data:{transactions:h?JSON.parse(h):[],accounts:y?JSON.parse(y):[],categories:T?JSON.parse(T):[],fixedCosts:k?JSON.parse(k):[],fixedCostGroups:D?JSON.parse(D):[]}};t.file("budget.json",JSON.stringify(N,null,2))}if(i.audioNotes){let h=localStorage.getItem("audio_notes_entries"),y={exportDate:n,version:"1.0",project:"audioNotes",data:h?JSON.parse(h):[]};t.file("audionotes.json",JSON.stringify(y,null,2))}if(i.recentlyPlayed){let h=localStorage.getItem("youtube_url_history"),y={exportDate:n,version:"1.0",project:"recentlyPlayed",data:h?JSON.parse(h):[]};t.file("recentlyplayed.json",JSON.stringify(y,null,2))}let a=await t.generateAsync({type:"blob"}),c=window.URL.createObjectURL(a),p=document.createElement("a");p.href=c,p.download=`dashboard_backup_${new Date().toISOString().split("T")[0]}.zip`,p.click(),window.URL.revokeObjectURL(c);let g=[];i.bookmarks&&g.push("Lesezeichen"),i.journal&&g.push("Journal"),i.budget&&g.push("Budget"),i.audioNotes&&g.push("AudioNotes"),i.recentlyPlayed&&g.push("Zuletzt gespielt"),alert(`Export erfolgreich!
Exportierte Projekte: ${g.join(", ")}`)}triggerImportAll(){let i=document.createElement("input");i.type="file",i.accept=".zip",i.onchange=e=>{let t=e.target.files[0];t&&this.processImportAllFile(t)},i.click()}async processImportAllFile(i){try{let t=await(await import("./chunk-7DPAS54S.js")).default.loadAsync(i),n=this.projectSelection(),a=[],c=[],p=t.file("bookmarks.json"),g=t.file("journal.json"),h=t.file("budget.json"),y=t.file("audionotes.json"),T=t.file("recentlyplayed.json"),k=t.file("dashboard_backup.json");if(n.bookmarks&&p&&c.push("Lesezeichen"),n.journal&&g&&c.push("Journal"),n.budget&&h&&c.push("Budget"),n.audioNotes&&y&&c.push("AudioNotes"),n.recentlyPlayed&&T&&c.push("Zuletzt gespielt"),c.length===0&&k){await this.processLegacyImport(k,n);return}if(c.length===0){alert("Keine passenden Daten in der Backup-Datei gefunden oder keine Projekte ausgew\xE4hlt.");return}if(!confirm(`Warnung: Der Import \xFCberschreibt alle bestehenden Daten f\xFCr:
${c.join(", ")}

Fortfahren?`))return;if(n.bookmarks&&p){let D=await p.async("string"),L=(JSON.parse(D).data||[]).map(G=>W(H({},G),{createdAt:G.createdAt||Date.now()}));this.bookmarkService.importBookmarks(L,!0),a.push("Lesezeichen")}if(n.journal&&g){let D=await g.async("string"),L=(JSON.parse(D).data||[]).map(G=>W(H({},G),{date:new Date(G.date)}));localStorage.setItem("terminal_journal_entries",JSON.stringify(L)),a.push("Journal")}if(n.budget&&h){let D=await h.async("string"),L=JSON.parse(D).data||{};L.transactions&&localStorage.setItem("mybudget_transactions",JSON.stringify(L.transactions)),L.accounts&&localStorage.setItem("mybudget_accounts",JSON.stringify(L.accounts)),L.categories&&localStorage.setItem("mybudget_categories",JSON.stringify(L.categories)),L.fixedCosts&&localStorage.setItem("mybudget_fixedcosts",JSON.stringify(L.fixedCosts)),L.fixedCostGroups&&localStorage.setItem("mybudget_fixedcostgroups",JSON.stringify(L.fixedCostGroups)),a.push("Budget")}if(n.audioNotes&&y){let D=await y.async("string"),L=(JSON.parse(D).data||[]).map(G=>W(H({},G),{timestamp:new Date(G.timestamp)}));localStorage.setItem("audio_notes_entries",JSON.stringify(L)),a.push("AudioNotes")}if(n.recentlyPlayed&&T){let D=await T.async("string"),N=JSON.parse(D);localStorage.setItem("youtube_url_history",JSON.stringify(N.data||[])),a.push("Zuletzt gespielt")}this.toggleSettingsModal(),alert(`Import erfolgreich!
Importierte Projekte: ${a.join(", ")}

Bitte laden Sie die Seite neu, um alle \xC4nderungen zu sehen.`),window.location.reload()}catch(e){console.error("Import failed",e),alert("Import fehlgeschlagen. Bitte \xFCberpr\xFCfen Sie das Dateiformat.")}}async processLegacyImport(i,e){let t=await i.async("string"),n=JSON.parse(t);if(!n.projects){alert("Ung\xFCltige Backup-Datei: Keine Projektdaten gefunden.");return}let a=[],c=[];if(e.bookmarks&&n.projects.bookmarks&&c.push("Lesezeichen"),e.journal&&n.projects.journal&&c.push("Journal"),e.budget&&n.projects.budget&&c.push("Budget"),c.length===0){alert("Keine passenden Daten in der Backup-Datei gefunden oder keine Projekte ausgew\xE4hlt.");return}if(confirm(`Warnung: Der Import \xFCberschreibt alle bestehenden Daten f\xFCr:
${c.join(", ")}

Fortfahren?`)){if(e.bookmarks&&n.projects.bookmarks){let p=n.projects.bookmarks.map(g=>W(H({},g),{createdAt:g.createdAt||Date.now()}));this.bookmarkService.importBookmarks(p,!0),a.push("Lesezeichen")}if(e.journal&&n.projects.journal){let p=n.projects.journal.map(g=>W(H({},g),{date:new Date(g.date)}));localStorage.setItem("terminal_journal_entries",JSON.stringify(p)),a.push("Journal")}if(e.budget&&n.projects.budget){let p=n.projects.budget;p.transactions&&localStorage.setItem("mybudget_transactions",JSON.stringify(p.transactions)),p.accounts&&localStorage.setItem("mybudget_accounts",JSON.stringify(p.accounts)),p.categories&&localStorage.setItem("mybudget_categories",JSON.stringify(p.categories)),p.fixedCosts&&localStorage.setItem("mybudget_fixedcosts",JSON.stringify(p.fixedCosts)),p.fixedCostGroups&&localStorage.setItem("mybudget_fixedcostgroups",JSON.stringify(p.fixedCostGroups)),a.push("Budget")}this.toggleSettingsModal(),alert(`Import erfolgreich (Legacy-Format)!
Importierte Projekte: ${a.join(", ")}

Bitte laden Sie die Seite neu, um alle \xC4nderungen zu sehen.`),window.location.reload()}}deleteAllData(){let i=this.projectSelection();if(!this.hasAnyProjectSelected()){alert("Bitte w\xE4hlen Sie mindestens ein Projekt zum L\xF6schen aus.");return}let e=[];i.bookmarks&&e.push("Lesezeichen"),i.journal&&e.push("Journal"),i.budget&&e.push("Budget"),i.audioNotes&&e.push("AudioNotes"),i.recentlyPlayed&&e.push("Zuletzt gespielt"),confirm(`WARNUNG: Dies l\xF6scht ALLE Daten f\xFCr:
${e.join(", ")}

Diese Aktion kann nicht r\xFCckg\xE4ngig gemacht werden!

Fortfahren?`)&&confirm("Sind Sie ABSOLUT sicher? Alle ausgew\xE4hlten Daten werden unwiderruflich gel\xF6scht!")&&(i.bookmarks&&localStorage.removeItem("dev0gig_bookmarks"),i.journal&&localStorage.removeItem("terminal_journal_entries"),i.budget&&(localStorage.removeItem("mybudget_transactions"),localStorage.removeItem("mybudget_accounts"),localStorage.removeItem("mybudget_categories"),localStorage.removeItem("mybudget_fixedcosts"),localStorage.removeItem("mybudget_fixedcostgroups")),i.audioNotes&&localStorage.removeItem("audio_notes_entries"),i.recentlyPlayed&&localStorage.removeItem("youtube_url_history"),this.toggleSettingsModal(),alert(`Gel\xF6scht: ${e.join(", ")}

Die Seite wird neu geladen.`),window.location.reload())}constructor(){this.router.events.subscribe(()=>{this.showSettingsModal()&&this.showSettingsModal.set(!1)});let i=this.settingsService.trigger();Ie(()=>{let e=this.settingsService.trigger();e>i&&(this.showSettingsModal.set(!0),i=e)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-dashboard"]],decls:98,vars:33,consts:[[1,"min-h-screen","text-dash-text","p-4","md:p-8","font-sans","selection:bg-dash-accent","selection:text-white","pb-16"],[1,"max-w-7xl","mx-auto","grid","grid-cols-1","md:grid-cols-12","gap-4"],[1,"md:col-span-12","flex","items-center","justify-between","gradient-header","p-4","rounded-sm","sticky","top-0","z-50","shadow-lg"],[1,"flex","items-center","gap-4"],[3,"openSettings"],[1,"text-sm","font-bold","tracking-widest","text-dash-text-dim","uppercase"],[1,"flex","gap-4","text-xs","font-mono","text-dash-text-dim","items-center"],["title","Rechte Sidebar",1,"w-10","h-10","bg-dash-bg","rounded-sm","flex","items-center","justify-center","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all",3,"click"],[1,"material-symbols-sharp","text-xl"],[1,"md:col-span-12","gradient-card","p-4","sm:p-6","rounded-sm","flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between","gap-4"],[1,"text-xl","sm:text-2xl","font-bold","text-dash-text","mb-1"],[1,"text-xs","sm:text-sm","text-dash-text-dim"],[1,"flex","gap-3"],[1,"gradient-btn","text-white","px-3","sm:px-4","py-2","sm:py-2.5","rounded-sm","transition-all","hover:-translate-y-0.5","flex","items-center","gap-2",3,"click"],[1,"material-symbols-sharp","text-lg","sm:text-xl"],[1,"text-sm","font-medium"],["class","fixed inset-0 z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"md:col-span-12","flex","flex-col","gap-4","sm:gap-6"],[1,"gradient-card","p-3","sm:p-4","rounded-sm"],[1,"flex","flex-col","gap-3"],[1,"text-base","sm:text-lg","font-bold","text-dash-text","flex","items-center","gap-2","whitespace-nowrap"],[1,"material-symbols-sharp","text-dash-accent","text-lg","sm:text-xl"],[1,"hidden","xs:inline"],[1,"hidden","md:flex","gap-2","items-center"],[1,"relative","group","flex-[2]"],[1,"absolute","left-3","top-1/2","-translate-y-1/2"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 48 48"],["fill","#FFC107","d","M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"],["fill","#FF3D00","d","M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"],["fill","#4CAF50","d","M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"],["fill","#1976D2","d","M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"],["type","text","placeholder","Google Suche...",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","pl-10","pr-3","h-10","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent","transition-colors",3,"ngModelChange","keydown.enter","ngModel"],[1,"absolute","left-3","top-1/2","-translate-y-1/2","text-dash-text-dim","group-focus-within:text-dash-accent","transition-colors"],[1,"material-symbols-sharp","text-lg"],["type","text","name","bookmarkSearch","placeholder","Lesezeichen suchen...",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","pl-10","pr-3","h-10","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent","transition-colors",3,"ngModelChange","ngModel"],["type","button","class","absolute right-2 top-1/2 -translate-y-1/2 text-dash-text-dim hover:text-dash-text",3,"click",4,"ngIf"],["type","text","name","bookmarkName","placeholder","Name",1,"w-28","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","h-10","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent",3,"ngModelChange","ngModel"],["type","text","name","bookmarkUrl","placeholder","URL",1,"w-36","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","h-10","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent",3,"ngModelChange","ngModel"],["type","button","title","Lesezeichen hinzuf\xFCgen",1,"bg-dash-card","hover:bg-dash-accent","border","border-dash-border","hover:border-dash-accent","text-dash-text","hover:text-white","px-3","h-10","rounded-sm","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center",3,"click","disabled"],["type","button","title","Bearbeitungsmodus umschalten",1,"bg-dash-card","hover:bg-dash-accent","border","border-dash-border","hover:border-dash-accent","text-dash-text","hover:text-white","px-3","h-10","rounded-sm","transition-all","flex","items-center",3,"click"],[1,"flex","flex-col","gap-2","md:hidden"],[1,"relative","group"],["type","text","placeholder","Lesezeichen suchen...",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","pl-10","pr-3","h-10","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent","transition-colors",3,"ngModelChange","ngModel"],["class","absolute right-2 top-1/2 -translate-y-1/2 text-dash-text-dim hover:text-dash-text",3,"click",4,"ngIf"],[1,"flex","gap-2"],["type","text","placeholder","Name",1,"flex-1","min-w-0","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","h-10","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent","transition-colors",3,"ngModelChange","ngModel"],["type","text","placeholder","URL",1,"flex-1","min-w-0","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","h-10","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent","transition-colors",3,"ngModelChange","ngModel"],[1,"flex-1","bg-dash-card","hover:bg-dash-accent","border","border-dash-border","hover:border-dash-accent","text-dash-text","hover:text-white","px-4","h-10","rounded-sm","transition-all","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"click","disabled"],["title","Bearbeitungsmodus umschalten",1,"bg-dash-card","hover:bg-dash-accent","border","border-dash-border","hover:border-dash-accent","text-dash-text","hover:text-white","px-4","h-10","rounded-sm","transition-all","flex","items-center","justify-center","gap-2",3,"click"],[1,"grid","grid-cols-4","xs:grid-cols-5","sm:grid-cols-6","md:grid-cols-6","lg:grid-cols-8","xl:grid-cols-10","gap-1.5","xs:gap-2","sm:gap-3"],["class","group relative gradient-card hover:border-dash-accent p-1.5 xs:p-2 sm:p-3 rounded-sm flex flex-col items-center justify-center gap-1 xs:gap-1.5 sm:gap-2 transition-all hover:-translate-y-1 hover:shadow-lg hover:accent-glow aspect-square",4,"ngFor","ngForOf"],["class","col-span-full py-12 flex flex-col items-center justify-center text-dash-text-dim border-2 border-dashed border-dash-border rounded-sm",4,"ngIf"],["class","fixed inset-0 z-[60] flex items-center justify-center p-4",4,"ngIf"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-lg","flex","flex-col","gap-4","max-h-[90vh]","overflow-y-auto","accent-glow"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"text-sm","font-bold","text-dash-text"],[1,"text-xs","text-dash-accent","hover:text-dash-accent/80","transition-colors",3,"click"],[1,"text-dash-text-dim"],[1,"text-xs","text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"grid","grid-cols-5","gap-2"],[3,"click"],[1,"text-xs","font-medium"],[1,"border-t","border-dash-border"],[1,"text-xs","text-dash-text-dim"],[1,"grid","grid-cols-7","gap-2"],[3,"background-color","class","title","click",4,"ngFor","ngForOf"],[1,"font-medium","text-dash-text"],[1,"flex-1","flex","items-center","justify-center","gap-2","px-4","py-3","bg-dash-bg","border","border-dash-border","hover:border-dash-accent","text-dash-text","rounded-sm","transition-colors","text-sm","disabled:opacity-50","disabled:cursor-not-allowed","disabled:hover:border-dash-border",3,"click","disabled"],[1,"flex","flex-col","gap-2"],[1,"flex-1","flex","items-center","justify-center","gap-2","px-4","py-2","bg-dash-bg","border","border-dash-border","hover:border-dash-accent","text-dash-text","rounded-sm","transition-colors","text-sm",3,"click"],[1,"text-sm","font-bold","text-red-500"],[1,"flex","items-center","justify-center","gap-2","px-4","py-3","bg-red-500/10","border","border-red-500/30","hover:bg-red-500/20","text-red-500","rounded-sm","transition-colors","text-sm","disabled:opacity-50","disabled:cursor-not-allowed","disabled:hover:bg-red-500/10",3,"click","disabled"],[3,"click","title"],["type","button",1,"absolute","right-2","top-1/2","-translate-y-1/2","text-dash-text-dim","hover:text-dash-text",3,"click"],[1,"material-symbols-sharp","text-sm"],[1,"absolute","right-2","top-1/2","-translate-y-1/2","text-dash-text-dim","hover:text-dash-text",3,"click"],[1,"group","relative","gradient-card","hover:border-dash-accent","p-1.5","xs:p-2","sm:p-3","rounded-sm","flex","flex-col","items-center","justify-center","gap-1","xs:gap-1.5","sm:gap-2","transition-all","hover:-translate-y-1","hover:shadow-lg","hover:accent-glow","aspect-square"],["class","absolute inset-0 bg-dash-card/90 backdrop-blur-sm z-10 flex flex-col items-center justify-center gap-2 sm:gap-4 rounded-sm animate-in fade-in duration-200",4,"ngIf"],[1,"flex","flex-col","items-center","gap-0.5","xs:gap-1","sm:gap-2","w-full","h-full","justify-center",3,"click","href","target"],["alt","Icon",1,"w-10","h-10","xs:w-10","xs:h-10","sm:w-8","sm:h-8","md:w-10","md:h-10","rounded-sm","flex-shrink-0",3,"error","src"],[1,"text-[9px]","xs:text-[10px]","sm:text-xs","font-medium","text-dash-text","w-full","text-center","line-clamp-2","break-words","leading-tight"],["class","absolute top-1 left-1 sm:top-2 sm:left-2 text-yellow-400",4,"ngIf"],[1,"absolute","inset-0","bg-dash-card/90","backdrop-blur-sm","z-10","flex","flex-col","items-center","justify-center","gap-2","sm:gap-4","rounded-sm","animate-in","fade-in","duration-200"],[1,"flex","gap-0.5","sm:gap-1"],["title","Favorit",1,"p-0.5","sm:p-1","bg-dash-bg","rounded-sm","hover:text-yellow-400","transition-colors","border","border-dash-border",3,"click"],[1,"material-symbols-sharp","text-xs","sm:text-sm"],["title","Bearbeiten",1,"p-0.5","sm:p-1","bg-dash-bg","rounded-sm","text-dash-text-dim","hover:text-dash-accent","transition-colors","border","border-dash-border",3,"click"],["title","L\xF6schen",1,"p-0.5","sm:p-1","bg-dash-bg","rounded-sm","text-dash-text-dim","hover:text-red-500","transition-colors","border","border-dash-border",3,"click"],[1,"text-[10px]","sm:text-xs","text-dash-text","font-medium","text-center","line-clamp-1"],[1,"absolute","top-1","left-1","sm:top-2","sm:left-2","text-yellow-400"],[1,"material-symbols-sharp","text-[10px]","sm:text-xs"],[1,"col-span-full","py-12","flex","flex-col","items-center","justify-center","text-dash-text-dim","border-2","border-dashed","border-dash-border","rounded-sm"],[1,"material-symbols-sharp","text-4xl","mb-2","opacity-50"],[1,"text-xs"],[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","p-4"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-sm","flex","flex-col","gap-4","accent-glow"],[1,"flex","flex-col","gap-1"],[1,"text-xs","text-dash-text-dim","uppercase","font-bold"],["type","text",1,"bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","text-sm","focus:outline-none","focus:border-dash-accent",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2","mt-2"],[1,"px-4","py-2","text-sm","text-dash-text-dim","hover:text-dash-text","transition-colors",3,"click"],[1,"px-4","py-2","gradient-btn","text-white","rounded-sm","text-sm","font-medium",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3)(4,"app-apps-launcher",4),u("openSettings",function(){return t.toggleSettingsModal()}),d(),r(5,"h1",5),s(6,"Dashboard"),d()(),r(7,"div",6)(8,"div"),s(9,"STATUS "),r(10,"span"),s(11),d()(),r(12,"button",7),u("click",function(){return t.toggleRightSidebar()}),r(13,"span",8),s(14,"menu_open"),d()()()(),r(15,"div",9)(16,"div")(17,"h2",10),s(18,"Willkommen zum Dashboard"),d(),r(19,"p",11),s(20,"Verwalten Sie Ihre Projekte und Lesezeichen."),d()(),r(21,"div",12)(22,"button",13),u("click",function(){return t.navigateToJournal()}),r(23,"span",14),s(24,"description"),d(),r(25,"span",15),s(26,"Journal"),d()(),r(27,"button",13),u("click",function(){return t.navigateToBudget()}),r(28,"span",14),s(29,"payments"),d(),r(30,"span",15),s(31,"Budget"),d()()()(),j(32,Qn,98,15,"div",16),r(33,"main",17)(34,"div",18)(35,"div",19)(36,"h3",20)(37,"span",21),s(38,"bookmarks"),d(),r(39,"span",22),s(40,"Meine "),d(),s(41,"Lesezeichen "),d(),r(42,"div",23)(43,"div",24)(44,"span",25),Pe(),r(45,"svg",26),A(46,"path",27)(47,"path",28)(48,"path",29)(49,"path",30),d()(),tt(),r(50,"input",31),ne("ngModelChange",function(a){return ie(t.googleSearchTerm,a)||(t.googleSearchTerm=a),a}),u("keydown.enter",function(a){return t.searchGoogle(a)}),d()(),r(51,"div",24)(52,"span",32)(53,"span",33),s(54,"search"),d()(),r(55,"input",34),u("ngModelChange",function(a){return t.searchTerm.set(a)}),d(),j(56,eo,3,0,"button",35),d(),r(57,"input",36),ne("ngModelChange",function(a){return ie(t.newBookmarkName,a)||(t.newBookmarkName=a),a}),d(),r(58,"input",37),ne("ngModelChange",function(a){return ie(t.newBookmarkUrl,a)||(t.newBookmarkUrl=a),a}),d(),r(59,"button",38),u("click",function(){return t.addBookmark()}),r(60,"span",33),s(61,"add"),d()(),r(62,"button",39),u("click",function(){return t.toggleEditMode()}),r(63,"span",33),s(64,"edit"),d()()(),r(65,"div",40)(66,"div",41)(67,"span",25),Pe(),r(68,"svg",26),A(69,"path",27)(70,"path",28)(71,"path",29)(72,"path",30),d()(),tt(),r(73,"input",31),ne("ngModelChange",function(a){return ie(t.googleSearchTerm,a)||(t.googleSearchTerm=a),a}),u("keydown.enter",function(a){return t.searchGoogle(a)}),d()(),r(74,"div",41)(75,"span",32)(76,"span",33),s(77,"search"),d()(),r(78,"input",42),u("ngModelChange",function(a){return t.searchTerm.set(a)}),d(),j(79,to,3,0,"button",43),d(),r(80,"div",44)(81,"input",45),ne("ngModelChange",function(a){return ie(t.newBookmarkName,a)||(t.newBookmarkName=a),a}),d(),r(82,"input",46),ne("ngModelChange",function(a){return ie(t.newBookmarkUrl,a)||(t.newBookmarkUrl=a),a}),d()(),r(83,"div",44)(84,"button",47),u("click",function(){return t.addBookmark()}),r(85,"span",33),s(86,"add"),d(),r(87,"span"),s(88,"Hinzuf\xFCgen"),d()(),r(89,"button",48),u("click",function(){return t.toggleEditMode()}),r(90,"span",33),s(91,"edit"),d(),r(92,"span"),s(93,"Bearbeiten"),d()()()()()(),r(94,"div",49),j(95,oo,7,8,"div",50)(96,ro,7,0,"div",51),d()()()(),j(97,ao,19,2,"div",52)),e&2&&(l(10),V("text-dash-accent",t.isOnline())("text-red-500",!t.isOnline()),l(),E(" ",t.isOnline()?"ONLINE":"OFFLINE"," "),l(21),_("ngIf",t.showSettingsModal()),l(18),te("ngModel",t.googleSearchTerm),l(5),_("ngModel",t.searchTerm()),l(),_("ngIf",t.searchTerm()),l(),te("ngModel",t.newBookmarkName),l(),te("ngModel",t.newBookmarkUrl),l(),_("disabled",!t.newBookmarkName||!t.newBookmarkUrl),l(3),V("bg-dash-accent",t.isEditMode())("text-white",t.isEditMode())("border-dash-accent",t.isEditMode()),l(11),te("ngModel",t.googleSearchTerm),l(5),_("ngModel",t.searchTerm()),l(),_("ngIf",t.searchTerm()),l(2),te("ngModel",t.newBookmarkName),l(),te("ngModel",t.newBookmarkUrl),l(2),_("disabled",!t.newBookmarkName||!t.newBookmarkUrl),l(5),V("bg-dash-accent",t.isEditMode())("text-white",t.isEditMode())("border-dash-accent",t.isEditMode()),l(6),_("ngForOf",t.filteredBookmarks()),l(),_("ngIf",t.bookmarkService.bookmarks().length===0),l(),_("ngIf",t.editingBookmark))},dependencies:[$,Ke,le,Ye,q,xe,fe,_e,qe],styles:[".tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip-bubble[_ngcontent-%COMP%]{position:absolute;bottom:calc(100% + 8px);left:50%;transform:translate(-50%) translateY(5px);background:linear-gradient(135deg,#1a1a1d,#222225);color:#fff;padding:6px 10px;border-radius:4px;font-size:.75rem;font-weight:500;white-space:nowrap;pointer-events:none;opacity:0;visibility:hidden;transition:all .3s cubic-bezier(.68,-.55,.265,1.55);box-shadow:0 4px 12px #0000004d;border:1px solid rgba(255,255,255,.1);z-index:1000}.tooltip-container[_ngcontent-%COMP%]:hover   .tooltip-bubble[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translate(-50%) translateY(0)}@media(max-width:768px){.tooltip-bubble[_ngcontent-%COMP%]{display:none}}"]})};var so=(o,i)=>i.id;function lo(o,i){o&1&&(r(0,"span",14),s(1,"duplicate date"),d())}function co(o,i){if(o&1){let e=P();r(0,"textarea",19,0),ne("ngModelChange",function(n){x(e);let a=m(2);return ie(a.editEntryText,n)||(a.editEntryText=n),f(n)}),u("blur",function(){x(e);let n=m(2);return f(n.saveEdit())}),d()}if(o&2){let e=m(2);ke("height",e.editingHeight,"px"),te("ngModel",e.editEntryText)}}function mo(o,i){if(o&1){let e=P();r(0,"div",20),u("click",function(n){x(e);let a=m().$implicit,c=m();return f(c.startEditing(a,n))}),s(1),d()}if(o&2){let e=m().$implicit;l(),E(" ",e.text," ")}}function po(o,i){if(o&1){let e=P();r(0,"div",10)(1,"div",11)(2,"div",12)(3,"span",13),s(4),Fe(5,"date"),d(),I(6,lo,2,0,"span",14),d(),r(7,"button",15),u("click",function(){let n=x(e).$implicit,a=m();return f(a.deleteEntry(n.id))}),r(8,"span",16),s(9,"delete"),d()()(),r(10,"div",3),I(11,co,2,3,"textarea",17)(12,mo,2,1,"div",18),d()()}if(o&2){let e=i.$implicit,t=m();V("border-2",t.editingEntryId===e.id||t.journal.hasDuplicateDate(e))("border-dashed",t.editingEntryId===e.id)("border-amber-400",t.editingEntryId===e.id&&!t.journal.hasDuplicateDate(e))("border-red-500/60",t.journal.hasDuplicateDate(e)&&t.editingEntryId!==e.id)("border",t.editingEntryId!==e.id&&!t.journal.hasDuplicateDate(e))("border-dash-border/50",t.editingEntryId!==e.id&&!t.journal.hasDuplicateDate(e))("hover:border-dash-accent/50",t.editingEntryId!==e.id&&!t.journal.hasDuplicateDate(e)),l(4),S(tn(5,17,e.date,"MMM dd, yyyy \u2022 HH:mm","Europe/Vienna")),l(2),F(t.journal.hasDuplicateDate(e)?6:-1),l(5),F(t.editingEntryId===e.id?11:12)}}function uo(o,i){o&1&&(r(0,"div",9)(1,"span",21),s(2,"inbox"),d(),r(3,"span"),s(4,"No entries found"),d()())}var Pt=class o{journal=C(ve);filteredEntries=de(()=>{let i=this.journal.currentDate(),e=this.journal.displayEntries();return this.journal.duplicateFilter()?e:e.filter(t=>t.date.getMonth()===i.getMonth()&&t.date.getFullYear()===i.getFullYear())},{});newEntryText="";editingEntryId=null;editEntryText="";editingHeight=0;addEntry(){if(this.newEntryText.trim()){this.journal.addEntry(this.newEntryText),this.newEntryText="";let i=new Date,e=this.journal.currentDate();(e.getMonth()!==i.getMonth()||e.getFullYear()!==i.getFullYear())&&this.journal.setCurrentDate(i)}}onKeyDown(i){i.key==="Enter"&&i.ctrlKey&&(i.preventDefault(),this.addEntry())}startEditing(i,e){let t=e.currentTarget;this.editingHeight=t.offsetHeight,this.editingEntryId=i.id,this.editEntryText=i.text}saveEdit(){this.editingEntryId&&(this.editEntryText.trim()&&this.journal.updateEntry(this.editingEntryId,this.editEntryText),this.editingEntryId=null,this.editEntryText="")}deleteEntry(i){confirm("Are you sure you want to delete this entry?")&&this.journal.deleteEntry(i)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-entry-list"]],decls:11,vars:2,consts:[["editTextarea",""],[1,"flex","flex-col","h-full"],[1,"p-6","border-b","border-dash-border","bg-dash-card","z-10"],[1,"relative"],["placeholder","What's on your mind today?","autofocus","",1,"w-full","bg-dash-bg/50","border","border-dash-border","rounded-sm","p-4","text-dash-text","placeholder-dash-text-dim/50","h-24","resize-none","focus:border-dash-accent","focus:ring-1","focus:ring-dash-accent","transition-all","outline-none",3,"ngModelChange","keydown","ngModel"],[1,"absolute","bottom-3","right-3","text-[10px]","text-dash-text-dim","bg-dash-bg/80","px-2","py-1","rounded"],[1,"flex-1","overflow-y-auto","flex","flex-col","custom-scrollbar"],[1,"p-6","flex","flex-col","gap-4"],[1,"bg-dash-bg/30","rounded-sm","p-4","transition-all","group","relative",3,"border-2","border-dashed","border-amber-400","border-red-500/60","border","border-dash-border/50","hover:border-dash-accent/50"],[1,"flex","flex-col","items-center","justify-center","h-full","text-dash-text-dim","opacity-50","py-12"],[1,"bg-dash-bg/30","rounded-sm","p-4","transition-all","group","relative"],[1,"flex","justify-between","items-start","mb-2"],[1,"flex","items-center","gap-2"],[1,"text-xs","font-mono","text-dash-accent"],[1,"text-[10px]","text-red-400","font-medium"],["title","Delete",1,"text-dash-text-dim","hover:text-red-400","transition-opacity",3,"click"],[1,"material-symbols-sharp","text-sm"],["autofocus","",1,"w-full","bg-transparent","text-sm","text-dash-text","resize-none","focus:outline-none","leading-relaxed","whitespace-pre-wrap",3,"ngModel","height"],[1,"whitespace-pre-wrap","text-sm","text-dash-text/90","leading-relaxed","cursor-pointer","hover:text-dash-text","transition-colors"],["autofocus","",1,"w-full","bg-transparent","text-sm","text-dash-text","resize-none","focus:outline-none","leading-relaxed","whitespace-pre-wrap",3,"ngModelChange","blur","ngModel"],[1,"whitespace-pre-wrap","text-sm","text-dash-text/90","leading-relaxed","cursor-pointer","hover:text-dash-text","transition-colors",3,"click"],[1,"material-symbols-sharp","text-4xl","mb-2"]],template:function(e,t){e&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"textarea",4),ne("ngModelChange",function(a){return ie(t.newEntryText,a)||(t.newEntryText=a),a}),u("keydown",function(a){return t.onKeyDown(a)}),d(),r(4,"div",5),s(5," CTRL+ENTER to save "),d()()(),r(6,"div",6)(7,"div",7),O(8,po,13,21,"div",8,so,!1,uo,5,0,"div",9),d()()()),e&2&&(l(3),te("ngModel",t.newEntryText),l(5),B(t.filteredEntries()))},dependencies:[$,q,xe,fe,_e,an],encapsulation:2})};function go(o,i){if(o&1&&(b(0,"div",9),s(1),v()),o&2){let e=m().$implicit;l(),E(" ",e.value," ")}}function ho(o,i){o&1&&oe(0,"div",12)}function xo(o,i){if(o&1&&(b(0,"div",11),s(1),I(2,ho,1,0,"div",12),v()),o&2){let e=m().$implicit;V("text-dash-text-dim",!e.hasEntry&&!e.isToday)("bg-dash-card-hover",e.hasEntry)("text-white",e.hasEntry)("border",e.isToday)("border-dash-accent",e.isToday)("text-dash-accent",e.isToday),l(),E(" ",(e.value==null?null:e.value.getDate())||""," "),l(),F(e.hasEntry?2:-1)}}function fo(o,i){if(o&1&&I(0,go,2,1,"div",9)(1,xo,3,14,"div",10),o&2){let e=i.$implicit;F(e.type==="week"?0:1)}}var At=class o{journal=C(ve);currentDate=this.journal.currentDate;days=de(()=>{let i=this.currentDate(),e=i.getFullYear(),t=i.getMonth(),n=new Date(e,t,1),c=new Date(e,t+1,0).getDate(),p=n.getDay(),g=p===0?6:p-1,h=[],y=D=>{let N=new Date(Date.UTC(D.getFullYear(),D.getMonth(),D.getDate())),L=N.getUTCDay()||7;N.setUTCDate(N.getUTCDate()+4-L);let G=new Date(Date.UTC(N.getUTCFullYear(),0,1));return Math.ceil(((N.getTime()-G.getTime())/864e5+1)/7)},T=0,k=new Date(e,t,1-g);h.push({type:"week",value:y(k)});for(let D=0;D<g;D++)h.push({type:"day",value:null,hasEntry:!1,isToday:!1}),T++;for(let D=1;D<=c;D++){if(T===7){T=0;let ge=new Date(e,t,D);h.push({type:"week",value:y(ge)})}let N=new Date(e,t,D),L=this.journal.getEntriesByDate(N),G=this.isSameDay(N,new Date);h.push({type:"day",value:N,hasEntry:L.length>0,isToday:G}),T++}for(;T<7;)h.push({type:"day",value:null,hasEntry:!1,isToday:!1}),T++;return h},{});monthName=de(()=>this.currentDate().toLocaleString("default",{month:"long",year:"numeric"}),{});prevMonth(){this.journal.prevMonth()}nextMonth(){this.journal.nextMonth()}goToToday(){this.journal.goToToday()}isSameDay(i,e){return i.getFullYear()===e.getFullYear()&&i.getMonth()===e.getMonth()&&i.getDate()===e.getDate()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-calendar"]],decls:34,vars:3,consts:[[1,"h-full","flex","flex-col"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-dash-text-dim","hover:text-white","transition-colors","p-1","flex","items-center","justify-center",3,"click"],[1,"material-symbols-sharp","text-sm"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-sm","tracking-widest"],[1,"text-dash-text-dim","hover:text-dash-accent","transition-colors","px-2","py-0.5","text-[10px]","border","border-dash-border","rounded-sm","hover:border-dash-accent",3,"click"],[1,"grid","grid-cols-8","gap-1","text-center","text-[10px]","text-dash-text-dim","mb-2","font-bold"],[1,"grid","grid-cols-8","gap-1","text-center","text-xs","flex-1"],[1,"aspect-square","flex","items-center","justify-center","text-dash-text-dim","text-[10px]","font-mono","opacity-50"],[1,"aspect-square","flex","items-center","justify-center","rounded-sm","transition-all","duration-200","relative","group",3,"text-dash-text-dim","bg-dash-card-hover","text-white","border","border-dash-accent","text-dash-accent"],[1,"aspect-square","flex","items-center","justify-center","rounded-sm","transition-all","duration-200","relative","group"],[1,"absolute","bottom-1","w-1","h-1","rounded-full","bg-dash-accent"]],template:function(e,t){e&1&&(b(0,"div",0)(1,"div",1)(2,"button",2),Ce("click",function(){return t.prevMonth()}),b(3,"span",3),s(4,"chevron_left"),v()(),b(5,"div",4)(6,"span",5),s(7),Fe(8,"uppercase"),v(),b(9,"button",6),Ce("click",function(){return t.goToToday()}),s(10," TODAY "),v()(),b(11,"button",2),Ce("click",function(){return t.nextMonth()}),b(12,"span",3),s(13,"chevron_right"),v()()(),b(14,"div",7)(15,"span"),s(16,"KW"),v(),b(17,"span"),s(18,"MO"),v(),b(19,"span"),s(20,"TU"),v(),b(21,"span"),s(22,"WE"),v(),b(23,"span"),s(24,"TH"),v(),b(25,"span"),s(26,"FR"),v(),b(27,"span"),s(28,"SA"),v(),b(29,"span"),s(30,"SU"),v()(),b(31,"div",8),O(32,fo,2,1,null,null,Tt),v()()),e&2&&(l(7),S(kt(8,1,t.monthName())),l(25),B(t.days()))},dependencies:[$,It],encapsulation:2})};var Vt=class o{journal=C(ve);query="";onSearch(){this.journal.setSearchQuery(this.query)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-search"]],decls:4,vars:1,consts:[[1,"flex","items-center","gap-3","w-full"],[1,"material-symbols-sharp","text-dash-text-dim","text-lg"],["type","text","placeholder","Search entries...",1,"bg-transparent","border-none","outline-none","text-dash-text","placeholder-dash-text-dim/50","w-full","text-sm","h-full",3,"ngModelChange","ngModel"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"span",1),s(2,"search"),d(),r(3,"input",2),ne("ngModelChange",function(a){return ie(t.query,a)||(t.query=a),a}),u("ngModelChange",function(){return t.onSearch()}),d()()),e&2&&(l(3),te("ngModel",t.query))},dependencies:[q,xe,fe,_e],encapsulation:2})};var _o=(o,i)=>i.month;function bo(o,i){if(o&1){let e=P();r(0,"div",42)(1,"div",43),u("click",function(){x(e);let n=m();return f(n.toggleSettingsModal())}),d(),r(2,"div",44)(3,"div",26)(4,"h2",45),s(5,"Settings"),d(),r(6,"button",46),u("click",function(){x(e);let n=m();return f(n.toggleSettingsModal())}),r(7,"span",47),s(8,"close"),d()()(),r(9,"div",48)(10,"button",49),u("click",function(){x(e);let n=m();return f(n.onExport())}),r(11,"span",47),s(12,"download"),d(),r(13,"div",50)(14,"span",51),s(15,"Export Data"),d(),r(16,"span",52),s(17,"Download backup as ZIP"),d()()(),r(18,"button",49),u("click",function(){x(e);let n=xi(27);return f(n.click())}),r(19,"span",47),s(20,"upload"),d(),r(21,"div",50)(22,"span",51),s(23,"Import Data"),d(),r(24,"span",52),s(25,"Restore from ZIP backup"),d()()(),r(26,"input",53,1),u("change",function(n){x(e);let a=m();return f(a.onImport(n))}),d(),A(28,"div",54),r(29,"button",55),u("click",function(){x(e);let n=m();return f(n.onDeleteAll())}),r(30,"span",47),s(31,"delete_forever"),d(),r(32,"div",50)(33,"span",51),s(34,"Delete All Entries"),d(),r(35,"span",52),s(36,"Permanently remove all journal entries"),d()()()()()()}}function vo(o,i){if(o&1&&(r(0,"div",56),s(1),d()),o&2){let e,t,n,a,c,p=m();V("bg-green-500/20",(e=p.ocrImportStatus())==null?null:e.success)("text-green-400",(t=p.ocrImportStatus())==null?null:t.success)("bg-red-500/20",!((n=p.ocrImportStatus())!=null&&n.success))("text-red-400",!((a=p.ocrImportStatus())!=null&&a.success)),l(),E(" ",(c=p.ocrImportStatus())==null?null:c.message," ")}}function yo(o,i){if(o&1){let e=P();r(0,"button",57),u("click",function(){x(e);let n=m();return f(n.toggleDuplicateFilter())}),r(1,"span",58),s(2,"warning"),d(),r(3,"span",59),s(4),d()()}if(o&2){let e=m();V("bg-red-500/20",!e.journal.duplicateFilter())("text-red-400",!e.journal.duplicateFilter())("hover:bg-red-500/30",!e.journal.duplicateFilter())("bg-red-500",e.journal.duplicateFilter())("text-white",e.journal.duplicateFilter()),l(4),S(e.journal.duplicateEntriesCount())}}function Co(o,i){if(o&1){let e=P();r(0,"button",60),u("click",function(){x(e);let n=m();return f(n.journal.clearMonthFilter())}),r(1,"span",61),s(2,"close"),d(),s(3," Clear Filter "),d()}}function So(o,i){if(o&1){let e=P();r(0,"button",62),u("click",function(){let n=x(e).$implicit,a=m();return f(a.onMonthClick(n.month))}),r(1,"span",63),s(2),d(),r(3,"span",59),s(4),d()()}if(o&2){let e=i.$implicit,t=m();V("bg-dash-bg",!t.isMonthSelected(e.month))("hover:bg-dash-card-hover",!t.isMonthSelected(e.month))("bg-dash-accent",t.isMonthSelected(e.month))("text-white",t.isMonthSelected(e.month))("text-dash-text-dim",!t.isMonthSelected(e.month)&&e.count===0)("text-dash-text",!t.isMonthSelected(e.month)&&e.count>0),l(2),S(e.name),l(),V("text-dash-accent",e.count>0&&!t.isMonthSelected(e.month)),l(),S(e.count)}}var Nt=class o{journal=C(ve);sidebarService=C(be);settingsService=C(Oe);router=C(Ae);isOnline=w(!0,{});showSettingsModal=w(!1,{});currentYear=new Date().getFullYear();isDragging=w(!1,{});ocrImportStatus=w(null,{});toggleSettingsModal(){this.showSettingsModal.update(i=>!i)}toggleRightSidebar(){this.sidebarService.toggleRight()}onMonthClick(i){this.journal.setMonthFilter(this.currentYear,i)}isMonthSelected(i){let e=this.journal.monthFilter();return e!==null&&e.year===this.currentYear&&e.month===i}toggleDuplicateFilter(){this.journal.duplicateFilter()?this.journal.clearDuplicateFilter():this.journal.setDuplicateFilter(!0)}async onExport(){let i=await this.journal.exportData(),e=window.URL.createObjectURL(i),t=document.createElement("a");t.href=e,t.download="journal_backup.zip",t.click(),window.URL.revokeObjectURL(e)}async onImport(i){let e=i.target;if(e.files&&e.files.length>0){if(confirm("Warning: Importing data will overwrite all existing entries. Are you sure you want to proceed?")){try{let t=await this.journal.importData(e.files[0]);t>0?alert(`Successfully imported ${t} entries.`):alert("No valid entries found in the selected file.")}catch(t){console.error("Import failed",t),alert("Import failed. Please check the file format.")}this.toggleSettingsModal()}e.value=""}}onDeleteAll(){confirm("Warning: This will permanently delete ALL journal entries. This action cannot be undone. Are you sure?")&&(this.journal.deleteAllEntries(),this.toggleSettingsModal(),alert("All entries have been deleted."))}onDragOver(i){i.preventDefault(),i.stopPropagation(),this.isDragging.set(!0)}onDragLeave(i){i.preventDefault(),i.stopPropagation(),this.isDragging.set(!1)}onDrop(i){i.preventDefault(),i.stopPropagation(),this.isDragging.set(!1);let e=i.dataTransfer?.files;e&&e.length>0&&this.processOcrFile(e[0])}onOcrFileSelect(i){let e=i.target;e.files&&e.files.length>0&&(this.processOcrFile(e.files[0]),e.value="")}async processOcrFile(i){if(this.ocrImportStatus.set(null),!i.name.endsWith(".txt")){this.ocrImportStatus.set({success:!1,message:"Please select a .txt file"});return}try{let e=await i.text(),t=this.journal.importOcrText(e);if(t.success&&t.date){let n=t.date.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"});this.ocrImportStatus.set({success:!0,message:`Entry added for ${n}`}),setTimeout(()=>{this.ocrImportStatus.set(null)},3e3)}else this.ocrImportStatus.set({success:!1,message:t.error||"Failed to import file"})}catch(e){console.error("OCR file processing failed",e),this.ocrImportStatus.set({success:!1,message:"Failed to read file"})}}constructor(){this.router.events.subscribe(()=>{this.showSettingsModal()&&this.showSettingsModal.set(!1)});let i=this.settingsService.trigger();Ie(()=>{let e=this.settingsService.trigger();e>i&&(this.showSettingsModal.set(!0),i=e)})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-journal-page"]],decls:63,vars:16,consts:[["ocrFileInput",""],["fileInput",""],[1,"min-h-screen","text-dash-text","p-4","md:p-8","font-sans","selection:bg-dash-accent","selection:text-white","pb-16"],[1,"max-w-7xl","mx-auto","grid","grid-cols-1","md:grid-cols-12","gap-4"],[1,"md:col-span-12","flex","items-center","justify-between","gradient-header","p-4","rounded-sm","sticky","top-0","z-50","shadow-lg"],[1,"flex","items-center","gap-4"],[3,"openSettings"],[1,"text-sm","font-bold","tracking-widest","text-dash-text-dim","uppercase"],[1,"flex","gap-4","text-xs","font-mono","text-dash-text-dim","items-center"],[1,"text-white"],["title","Rechte Sidebar",1,"w-10","h-10","bg-dash-bg","rounded-sm","flex","items-center","justify-center","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all",3,"click"],[1,"material-symbols-sharp","text-xl"],["class","fixed inset-0 z-50 flex items-center justify-center p-4",4,"ngIf"],[1,"md:col-span-4","lg:col-span-3","flex","flex-col","gap-4"],[1,"gradient-card","p-4","rounded-sm"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","mb-3","tracking-wider"],[1,"border-2","border-dashed","border-dash-border","rounded-sm","p-4","text-center","cursor-pointer","transition-all","duration-200","hover:border-dash-accent","hover:bg-dash-bg/50",3,"click","dragover","dragleave","drop"],[1,"material-symbols-sharp","text-2xl","text-dash-text-dim","mb-2","block"],[1,"text-xs","text-dash-text-dim"],[1,"text-[10px]","text-dash-text-dim/50","mt-1"],["type","file","accept",".txt",1,"hidden",3,"change"],[1,"mt-3","p-2","rounded-sm","text-xs",3,"bg-green-500/20","text-green-400","bg-red-500/20","text-red-400"],[1,"gradient-card","p-6","rounded-sm","flex","flex-col","aspect-square","w-full"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","mb-4","tracking-wider"],[1,"flex-1"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-dash-accent"],["title","Click to show entries with duplicate dates",1,"flex","items-center","gap-1","px-2","py-1","rounded-sm","text-xs","transition-all",3,"bg-red-500/20","text-red-400","hover:bg-red-500/30","bg-red-500","text-white"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","tracking-wider"],["class","text-[10px] text-dash-accent hover:text-white transition-colors flex items-center gap-1",3,"click",4,"ngIf"],[1,"grid","grid-cols-3","gap-2"],[1,"flex","items-center","justify-between","p-2","rounded-sm","text-xs","transition-all","duration-200",3,"bg-dash-bg","hover:bg-dash-card-hover","bg-dash-accent","text-white","text-dash-text-dim","text-dash-text"],[1,"md:col-span-8","lg:col-span-9","flex","flex-col","gap-4"],[1,"gradient-card","p-4","rounded-sm","flex","items-center","gap-4"],[1,"gradient-card","p-0","rounded-sm","flex","flex-col","relative"],[1,"absolute","top-0","right-0","p-4","z-10"],[1,"flex","gap-2"],[1,"w-2","h-2","rounded-full","bg-red-500/20"],[1,"w-2","h-2","rounded-full","bg-yellow-500/20"],[1,"w-2","h-2","rounded-full","bg-green-500/20"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-md","flex","flex-col","gap-4","accent-glow"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"flex","flex-col","gap-3"],[1,"flex","items-center","gap-3","p-3","bg-dash-bg","hover:bg-dash-accent","rounded-sm","text-dash-text-dim","hover:text-white","transition-colors","text-left",3,"click"],[1,"flex","flex-col"],[1,"font-bold","text-sm"],[1,"text-xs","opacity-70"],["type","file","accept",".zip",1,"hidden",3,"change"],[1,"border-t","border-dash-border","my-2"],[1,"flex","items-center","gap-3","p-3","bg-dash-bg","hover:bg-red-600","rounded-sm","text-dash-text-dim","hover:text-white","transition-colors","text-left",3,"click"],[1,"mt-3","p-2","rounded-sm","text-xs"],["title","Click to show entries with duplicate dates",1,"flex","items-center","gap-1","px-2","py-1","rounded-sm","text-xs","transition-all",3,"click"],[1,"material-symbols-sharp","text-sm"],[1,"font-mono"],[1,"text-[10px]","text-dash-accent","hover:text-white","transition-colors","flex","items-center","gap-1",3,"click"],[1,"material-symbols-sharp","text-xs"],[1,"flex","items-center","justify-between","p-2","rounded-sm","text-xs","transition-all","duration-200",3,"click"],[1,"font-medium"]],template:function(e,t){if(e&1){let n=P();r(0,"div",2)(1,"div",3)(2,"header",4)(3,"div",5)(4,"app-apps-launcher",6),u("openSettings",function(){return x(n),f(t.toggleSettingsModal())}),d(),r(5,"h1",7),s(6,"Journal"),d()(),r(7,"div",8)(8,"div"),s(9,"STATUS "),r(10,"span"),s(11),d()(),r(12,"div"),s(13,"ENTRIES "),r(14,"span",9),s(15),d()(),r(16,"button",10),u("click",function(){return x(n),f(t.toggleRightSidebar())}),r(17,"span",11),s(18,"menu_open"),d()()()(),j(19,bo,37,0,"div",12),r(20,"aside",13)(21,"div",14)(22,"h2",15),s(23,"Import OCR Text"),d(),r(24,"div",16),u("click",function(){x(n);let c=xi(32);return f(c.click())})("dragover",function(c){return x(n),f(t.onDragOver(c))})("dragleave",function(c){return x(n),f(t.onDragLeave(c))})("drop",function(c){return x(n),f(t.onDrop(c))}),r(25,"span",17),s(26,"upload_file"),d(),r(27,"p",18),s(28," Drop .txt file here or click to browse "),d(),r(29,"p",19),s(30," First line must be date (DD.MM.YYYY) "),d()(),r(31,"input",20,0),u("change",function(c){return x(n),f(t.onOcrFileSelect(c))}),d(),I(33,vo,2,9,"div",21),d(),r(34,"div",22)(35,"h2",23),s(36,"Calendar"),d(),A(37,"app-calendar",24),d(),r(38,"div",14)(39,"h2",25),s(40,"Total Entries"),d(),r(41,"div",26)(42,"div",27),s(43),d(),I(44,yo,5,11,"button",28),d()(),r(45,"div",14)(46,"div",29)(47,"h2",30),s(48),d(),j(49,Co,4,0,"button",31),d(),r(50,"div",32),O(51,So,5,16,"button",33,_o),d()()(),r(53,"main",34)(54,"div",35),A(55,"app-search",24),d(),r(56,"div",36)(57,"div",37)(58,"div",38),A(59,"span",39)(60,"span",40)(61,"span",41),d()(),A(62,"app-entry-list"),d()()()()}e&2&&(l(10),V("text-dash-accent",t.isOnline())("text-red-500",!t.isOnline()),l(),E(" ",t.isOnline()?"ONLINE":"OFFLINE"," "),l(4),S(t.journal.entries().length),l(4),_("ngIf",t.showSettingsModal()),l(5),V("border-dash-accent",t.isDragging())("bg-dash-accent/10",t.isDragging()),l(9),F(t.ocrImportStatus()?33:-1),l(10),S(t.journal.entries().length),l(),F(t.journal.duplicateEntriesCount()>0?44:-1),l(4),E("",t.currentYear," Entries "),l(),_("ngIf",t.journal.monthFilter()),l(2),B(t.journal.monthlyEntryCounts()))},dependencies:[$,le,Ye,Pt,At,Vt,qe],encapsulation:2})};var Z=class o{formatCurrency(i){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(i)}formatDate(i){return new Date(i).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}getTodayDateString(){return new Date().toISOString().split("T")[0]}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getCategoryColor(i){let e=0;for(let n=0;n<i.length;n++)e=i.charCodeAt(n)+((e<<5)-e);return`hsl(${e%360}, 70%, 50%)`}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var ue=class o{constructor(i){this.utilityService=i;this.loadData()}transactions=w([],{});accounts=w([],{});categories=w([],{});fixedCosts=w([],{});fixedCostGroups=w([],{});selectedAccountId=w(null,{});searchQuery=w("",{});selectedMonth=w(new Date,{});loadData(){let i=localStorage.getItem("mybudget_transactions"),e=localStorage.getItem("mybudget_accounts"),t=localStorage.getItem("mybudget_categories"),n=localStorage.getItem("mybudget_fixedcosts"),a=localStorage.getItem("mybudget_fixedcostgroups");if(i&&this.transactions.set(JSON.parse(i)),e&&this.accounts.set(JSON.parse(e)),t&&this.categories.set(JSON.parse(t)),n){let c=JSON.parse(n),p=!1;c=c.map((g,h)=>g.order===void 0?(p=!0,W(H({},g),{order:h})):g),this.fixedCosts.set(c),p&&this.saveFixedCosts()}a&&this.fixedCostGroups.set(JSON.parse(a))}saveTransactions(){localStorage.setItem("mybudget_transactions",JSON.stringify(this.transactions()))}saveAccounts(){localStorage.setItem("mybudget_accounts",JSON.stringify(this.accounts()))}saveCategories(){localStorage.setItem("mybudget_categories",JSON.stringify(this.categories()))}saveFixedCosts(){localStorage.setItem("mybudget_fixedcosts",JSON.stringify(this.fixedCosts()))}saveFixedCostGroups(){localStorage.setItem("mybudget_fixedcostgroups",JSON.stringify(this.fixedCostGroups()))}getCategoryById(i){return this.categories().find(e=>e.id===i)}getCategoryFullName(i){let e=this.getCategoryById(i);return e?e.name:"Unbekannt"}getSortedCategories(){return[...this.categories()].sort((i,e)=>i.name.localeCompare(e.name,"de"))}getAccountById(i){return this.accounts().find(e=>e.id===i)}getTotalBalance(){return this.accounts().reduce((i,e)=>i+e.balance,0)}selectAccount(i){this.selectedAccountId()===i?this.selectedAccountId.set(null):this.selectedAccountId.set(i)}updateAccountBalance(i,e){this.accounts.update(t=>t.map(n=>n.id===i?W(H({},n),{balance:n.balance+e}):n))}addAccount(i,e){let t={id:this.utilityService.generateId(),name:i,balance:e};this.accounts.update(n=>[...n,t]),this.saveAccounts()}updateAccount(i,e,t){this.accounts.update(n=>n.map(a=>a.id===i?W(H({},a),{name:e,balance:t}):a)),this.saveAccounts()}deleteAccount(i){return this.accounts.update(e=>e.filter(t=>t.id!==i)),this.saveAccounts(),this.selectedAccountId()===i&&this.selectAccount(null),!0}addCategory(i,e){let t={id:this.utilityService.generateId(),name:i,type:e};this.categories.update(n=>[...n,t]),this.saveCategories()}updateCategory(i,e,t){this.categories.update(n=>n.map(a=>a.id===i?W(H({},a),{name:e,type:t}):a)),this.saveCategories()}deleteCategory(i){this.categories.update(e=>e.filter(t=>t.id!==i)),this.saveCategories()}getOrCreateCategory(i,e){let t=i.trim(),n=e.get(t);return n||(n={id:this.utilityService.generateId(),name:t,type:"both"},e.set(t,n)),n.id}revertTransactionBalance(i){i.type==="transfer"&&i.toAccount?(this.updateAccountBalance(i.account,i.amount),this.updateAccountBalance(i.toAccount,-i.amount)):i.type==="income"?this.updateAccountBalance(i.account,-i.amount):this.updateAccountBalance(i.account,i.amount)}applyTransactionBalance(i){i.type==="transfer"&&i.toAccount?(this.updateAccountBalance(i.account,-i.amount),this.updateAccountBalance(i.toAccount,i.amount)):i.type==="income"?this.updateAccountBalance(i.account,i.amount):this.updateAccountBalance(i.account,-i.amount)}addTransaction(i){let e=W(H({},i),{id:this.utilityService.generateId()});return this.applyTransactionBalance(e),this.transactions.update(t=>[...t,e]),this.saveTransactions(),this.saveAccounts(),e}updateTransaction(i,e,t){let n=W(H({},e),{id:i});this.revertTransactionBalance(t),this.applyTransactionBalance(n),this.transactions.update(a=>a.map(c=>c.id===i?n:c)),this.saveTransactions(),this.saveAccounts()}deleteTransaction(i){let e=this.transactions().find(t=>t.id===i);e&&(this.revertTransactionBalance(e),this.transactions.update(t=>t.filter(n=>n.id!==i)),this.saveTransactions(),this.saveAccounts())}deleteAllTransactions(){this.transactions().forEach(i=>this.revertTransactionBalance(i)),this.transactions.set([]),this.saveTransactions(),this.saveAccounts()}getFixedCosts(){return this.fixedCosts()}getFixedCostsSortedByCategory(){return[...this.fixedCosts()].sort((i,e)=>{let t=this.getCategoryFullName(i.category).toLowerCase(),n=this.getCategoryFullName(e.category).toLowerCase();return t.localeCompare(n,"de")})}getFixedCostsTotal(){return this.fixedCosts().filter(i=>i.type==="expense"&&!i.excludeFromTotal).reduce((i,e)=>i+e.amount,0)}getFixedIncomeTotal(){return this.fixedCosts().filter(i=>i.type==="income"&&!i.excludeFromTotal).reduce((i,e)=>i+e.amount,0)}getFixedTransferTotal(){return this.fixedCosts().filter(i=>i.type==="transfer"&&!i.excludeFromTotal).reduce((i,e)=>i+e.amount,0)}getExcludedFixedCostsTotal(){return this.fixedCosts().filter(i=>i.excludeFromTotal).reduce((i,e)=>e.type==="income"?i+e.amount:i-e.amount,0)}getFixedIncomeCount(){return this.fixedCosts().filter(i=>i.type==="income"&&!i.excludeFromTotal).length}getFixedExpenseCount(){return this.fixedCosts().filter(i=>i.type==="expense"&&!i.excludeFromTotal).length}getFixedTransferCount(){return this.fixedCosts().filter(i=>i.type==="transfer"&&!i.excludeFromTotal).length}getExcludedFixedCostsCount(){return this.fixedCosts().filter(i=>i.excludeFromTotal).length}addFixedCost(i){let e=this.fixedCosts(),t=e.length>0?Math.max(...e.map(a=>a.order)):-1,n={id:this.utilityService.generateId(),name:i.name,amount:i.amount,type:i.type,category:i.category,account:i.account,toAccount:i.toAccount,groupId:i.groupId,order:t+1,note:i.note,excludeFromTotal:i.excludeFromTotal};this.fixedCosts.update(a=>[...a,n]),this.saveFixedCosts()}updateFixedCost(i,e){this.fixedCosts.update(t=>t.map(n=>n.id===i?W(H({},n),{name:e.name,amount:e.amount,type:e.type,category:e.category,account:e.account,toAccount:e.toAccount,groupId:e.groupId,note:e.note,excludeFromTotal:e.excludeFromTotal}):n)),this.saveFixedCosts()}deleteFixedCost(i){this.fixedCosts.update(e=>e.filter(t=>t.id!==i)),this.saveFixedCosts()}copyTransactionToFixedCost(i){let e=this.fixedCosts(),t=e.length>0?Math.max(...e.map(a=>a.order)):-1,n={id:this.utilityService.generateId(),name:i.description,amount:i.amount,type:i.type,category:i.category,account:i.account,toAccount:i.toAccount,order:t+1,note:i.note};this.fixedCosts.update(a=>[...a,n]),this.saveFixedCosts()}addFixedCostGroup(i){let e=this.fixedCostGroups(),t=e.length>0?Math.max(...e.map(a=>a.order)):-1,n={id:this.utilityService.generateId(),name:i,order:t+1,collapsed:!1};return this.fixedCostGroups.update(a=>[...a,n]),this.saveFixedCostGroups(),n}updateFixedCostGroup(i,e){this.fixedCostGroups.update(t=>t.map(n=>n.id===i?W(H({},n),{name:e}):n)),this.saveFixedCostGroups()}deleteFixedCostGroup(i){this.fixedCostGroups.update(e=>e.filter(t=>t.id!==i)),this.fixedCosts.update(e=>e.map(t=>t.groupId===i?W(H({},t),{groupId:void 0}):t)),this.saveFixedCostGroups(),this.saveFixedCosts()}toggleFixedCostGroupCollapsed(i){this.fixedCostGroups.update(e=>e.map(t=>t.id===i?W(H({},t),{collapsed:!t.collapsed}):t)),this.saveFixedCostGroups()}reorderFixedCosts(i){let e=this.fixedCosts(),t=i.map(a=>e.find(c=>c.id===a)).filter(Boolean),n=t.length>0?Math.min(...t.map(a=>a.order)):0;this.fixedCosts.update(a=>a.map(c=>{let p=i.indexOf(c.id);return p!==-1?W(H({},c),{order:n+p}):c})),this.saveFixedCosts()}reorderFixedCostGroups(i){this.fixedCostGroups.update(e=>e.map(t=>{let n=i.indexOf(t.id);return n!==-1?W(H({},t),{order:n}):t})),this.saveFixedCostGroups()}deleteAllFixedCostGroups(){this.fixedCosts.update(i=>i.map(e=>W(H({},e),{groupId:void 0}))),this.fixedCostGroups.set([]),this.saveFixedCostGroups(),this.saveFixedCosts()}deleteSelectedFixedCostGroups(i){this.fixedCosts.update(e=>e.map(t=>i.includes(t.groupId||"")?W(H({},t),{groupId:void 0}):t)),this.fixedCostGroups.update(e=>e.filter(t=>!i.includes(t.id))),this.saveFixedCostGroups(),this.saveFixedCosts()}getFixedCostsSortedByOrder(){return[...this.fixedCosts()].sort((i,e)=>i.order-e.order)}getFixedCostGroupsSortedByOrder(){return[...this.fixedCostGroups()].sort((i,e)=>i.order-e.order)}onSearch(i){this.searchQuery.set(i)}onMonthChange(i){this.selectedMonth.set(i)}getFilteredTransactions(){let i=this.transactions();this.selectedAccountId()&&(i=i.filter(t=>t.account===this.selectedAccountId()||t.type==="transfer"&&t.toAccount===this.selectedAccountId()));let e=this.searchQuery().toLowerCase();return e&&(i=i.filter(t=>t.description.toLowerCase().includes(e)||t.amount.toString().includes(e)||this.getCategoryFullName(t.category).toLowerCase().includes(e))),i}getSortedTransactions(){let i=this.getFilteredTransactions(),e=this.selectedMonth().getMonth(),t=this.selectedMonth().getFullYear();return i=i.filter(n=>{let a=new Date(n.date);return a.getMonth()===e&&a.getFullYear()===t}),i.sort((n,a)=>new Date(a.date).getTime()-new Date(n.date).getTime())}importExtendedFormat(i){let e=[],t=[],n=new Map,a=new Map;return this.categories().forEach(c=>a.set(c.name,c)),i.transaktionen.forEach(c=>{if(!c.datum||c.betrag===void 0||!c.beschreibung)return;let p=parseFloat(c.betrag),g=c.datum.trim(),h=c.beschreibung.trim(),y=(c.konto||"Unbekannt").trim(),T=(c.kategorie||"Sonstiges").trim(),k=n.get(y);k||(k={id:this.utilityService.generateId(),name:y,balance:0},n.set(y,k)),k.balance+=p;let D=this.getOrCreateCategory(T,a),N=Math.abs(p),L=p>=0?"income":"expense",G={id:this.utilityService.generateId(),type:L,amount:N,description:h,category:D,account:k.id,date:g.split("T")[0]};e.push(G)}),i.fixkosten&&Array.isArray(i.fixkosten)&&i.fixkosten.forEach(c=>{if(!c.name||c.betrag===void 0)return;let p=parseFloat(c.betrag),g=c.name.trim(),h=(c.konto||"Unbekannt").trim(),y=(c.kategorie||"Sonstiges").trim(),T=n.get(h);T||(T={id:this.utilityService.generateId(),name:h,balance:0},n.set(h,T));let k=this.getOrCreateCategory(y,a),D=Math.abs(p),N=p>=0?"income":"expense",L={id:this.utilityService.generateId(),name:g,amount:D,type:N,category:k,account:T.id,order:t.length};t.push(L)}),this.transactions.set(e),this.accounts.set(Array.from(n.values())),this.categories.set(Array.from(a.values())),this.fixedCosts.set(t),this.saveTransactions(),this.saveAccounts(),this.saveCategories(),this.saveFixedCosts(),{transactions:e.length,fixedCosts:t.length}}importLegacyFormat(i){let e=[],t=new Map,n=new Map;return this.categories().forEach(a=>n.set(a.name,a)),i.forEach(a=>{if(!a.datum||a.betrag===void 0||!a.beschreibung)return;let c=parseFloat(a.betrag),p=a.datum.trim(),g=a.beschreibung.trim(),h=(a.konto||"Unbekannt").trim(),y=(a.kategorie||"Sonstiges").trim(),T=t.get(h);T||(T={id:this.utilityService.generateId(),name:h,balance:0},t.set(h,T)),T.balance+=c;let k=this.getOrCreateCategory(y,n),D=Math.abs(c),N=c>=0?"income":"expense",L={id:this.utilityService.generateId(),type:N,amount:D,description:g,category:k,account:T.id,date:p.split("T")[0]};e.push(L)}),e.length>0&&(this.transactions.set(e),this.accounts.set(Array.from(t.values())),this.categories.set(Array.from(n.values())),this.saveTransactions(),this.saveAccounts(),this.saveCategories()),e.length}getExportData(){let i=this.transactions().map(t=>{let n=this.getAccountById(t.account),a=this.getCategoryById(t.category),c=t.type==="expense"?-t.amount:t.amount;return{datum:t.date,betrag:c,beschreibung:t.description,konto:n?.name||"",kategorie:a?.name||""}}),e=this.fixedCosts().map(t=>{let n=this.getAccountById(t.account),a=this.getCategoryById(t.category),c=t.type==="expense"?-t.amount:t.amount;return{name:t.name,betrag:c,konto:n?.name||"",kategorie:a?.name||""}});return{version:2,exportDate:new Date().toISOString(),transaktionen:i,fixkosten:e}}static \u0275fac=function(e){return new(e||o)($i(Z))};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var Rt=class o{stateService=C(ue);utilityService=C(Z);Math=Math;getStats(){let i=this.stateService.selectedMonth().getMonth(),e=this.stateService.selectedMonth().getFullYear(),t=0;if(this.stateService.selectedAccountId()){let h=this.stateService.accounts().find(y=>y.id===this.stateService.selectedAccountId());t=h?h.balance:0}else t=this.stateService.accounts().reduce((h,y)=>h+y.balance,0);let n=this.stateService.transactions();this.stateService.selectedAccountId()&&(n=n.filter(h=>h.account===this.stateService.selectedAccountId()||h.type==="transfer"&&h.toAccount===this.stateService.selectedAccountId()));let a=this.stateService.searchQuery().toLowerCase();a&&(n=n.filter(h=>h.description.toLowerCase().includes(a)||h.amount.toString().includes(a)||this.stateService.getCategoryFullName(h.category).toLowerCase().includes(a)));let c=n.filter(h=>{let y=new Date(h.date);return y.getMonth()===i&&y.getFullYear()===e}),p=c.filter(h=>h.type==="income").reduce((h,y)=>h+y.amount,0),g=c.filter(h=>h.type==="expense").reduce((h,y)=>h+y.amount,0);return{balance:t,income:p,expenses:g}}getCategoryStats(){let i=this.stateService.getSortedTransactions().filter(n=>n.type==="expense"),e=i.reduce((n,a)=>n+a.amount,0),t=new Map;return i.forEach(n=>{let a=t.get(n.category)||0;t.set(n.category,a+n.amount)}),Array.from(t.entries()).map(([n,a])=>({name:this.stateService.getCategoryFullName(n),amount:a,percentage:e>0?a/e*100:0,color:this.utilityService.getCategoryColor(n)})).sort((n,a)=>a.amount-n.amount)}getIncomeCategoryStats(){let i=this.stateService.getSortedTransactions().filter(n=>n.type==="income"),e=i.reduce((n,a)=>n+a.amount,0),t=new Map;return i.forEach(n=>{let a=t.get(n.category)||0;t.set(n.category,a+n.amount)}),Array.from(t.entries()).map(([n,a])=>({name:this.stateService.getCategoryFullName(n),amount:a,percentage:e>0?a/e*100:0,color:this.utilityService.getCategoryColor(n)})).sort((n,a)=>a.amount-n.amount)}getDailyTrend(){let i=this.stateService.getSortedTransactions(),e=new Date(this.stateService.selectedMonth().getFullYear(),this.stateService.selectedMonth().getMonth()+1,0).getDate(),t=[],n=0,a=new Map;i.forEach(c=>{let p=new Date(c.date).getDate(),g=a.get(p)||[];g.push(c),a.set(p,g)});for(let c=1;c<=e;c++){let p=a.get(c)||[],g=0,h=0;p.forEach(y=>{y.type==="income"?(g+=y.amount,n+=y.amount):y.type==="expense"?(h+=y.amount,n-=y.amount):y.type==="transfer"&&y.toAccount&&this.stateService.selectedAccountId()&&(y.account===this.stateService.selectedAccountId()?n-=y.amount:y.toAccount===this.stateService.selectedAccountId()&&(n+=y.amount))}),t.push({day:c,balance:n,income:g,expense:h})}return t}getPieChartGradient(){let i=this.getCategoryStats();if(i.length===0)return"conic-gradient(#333 0% 100%)";let e="conic-gradient(",t=0;return i.forEach((n,a)=>{let c=t+n.percentage;e+=`${n.color} ${t}% ${c}%${a<i.length-1?", ":""}`,t=c}),e+=")",e}getIncomePieChartGradient(){let i=this.getIncomeCategoryStats();if(i.length===0)return"conic-gradient(#333 0% 100%)";let e="conic-gradient(",t=0;return i.forEach((n,a)=>{let c=t+n.percentage;e+=`${n.color} ${t}% ${c}%${a<i.length-1?", ":""}`,t=c}),e+=")",e}getTrendPoints(){let i=this.getDailyTrend();if(i.length===0)return"";let e=Math.max(...i.map(g=>g.balance),100),t=Math.min(...i.map(g=>g.balance),0),n=e-t||1,a=100,c=50;return i.map((g,h)=>{let y=h/(i.length-1)*a,T=(g.balance-t)/n,k=c-T*c;return`${y},${k}`}).join(" ")}getTrendAreaPoints(){let i=this.getDailyTrend();if(i.length===0)return"";let e=this.getTrendMaxValue(),t=this.getTrendMinValue(),n=e-t||1,a=100,c=50,p=`0,${c} `;return i.forEach((g,h)=>{let y=h/(i.length-1)*a,T=(g.balance-t)/n,k=c-T*c;p+=`${y},${k} `}),p+=`${a},${c}`,p}getTrendMaxValue(){let i=this.getDailyTrend();return i.length===0?100:Math.max(...i.map(e=>e.balance),100)}getTrendMinValue(){let i=this.getDailyTrend();return i.length===0?0:Math.min(...i.map(e=>e.balance),0)}getZeroLineY(){let i=this.getTrendMaxValue(),e=this.getTrendMinValue(),t=i-e||1,n=50;return n-(0-e)/t*n}getDaysInSelectedMonth(){return new Date(this.stateService.selectedMonth().getFullYear(),this.stateService.selectedMonth().getMonth()+1,0).getDate()}getSelectedMonthName(){return this.stateService.selectedMonth().toLocaleDateString("de-DE",{month:"long",year:"numeric"})}getIncomeTransactionCount(){return this.stateService.getSortedTransactions().filter(i=>i.type==="income").length}getExpenseTransactionCount(){return this.stateService.getSortedTransactions().filter(i=>i.type==="expense").length}getTopExpenses(){return this.stateService.getSortedTransactions().filter(i=>i.type==="expense").sort((i,e)=>e.amount-i.amount).slice(0,10)}getAverageDailyExpense(){let i=this.getStats().expenses,e=this.getDaysInSelectedMonth();return i/e}getAverageDailyIncome(){let i=this.getStats().income,e=this.getDaysInSelectedMonth();return i/e}getLargestExpense(){let i=this.stateService.getSortedTransactions().filter(e=>e.type==="expense");return i.length===0?0:Math.max(...i.map(e=>e.amount))}getLargestIncome(){let i=this.stateService.getSortedTransactions().filter(e=>e.type==="income");return i.length===0?0:Math.max(...i.map(e=>e.amount))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ot=(o,i)=>i.id;function Eo(o,i){o&1&&(r(0,"div",10)(1,"span",12),s(2,"receipt_long"),d(),r(3,"p",13),s(4,"Keine Transaktionen f\xFCr diesen Monat."),d(),r(5,"p",14),s(6,'Klicken Sie auf "Neue Transaktion" um eine hinzuzuf\xFCgen.'),d()())}function To(o,i){o&1&&(r(0,"span",34),s(1,"sync_alt"),d())}function ko(o,i){if(o&1&&(r(0,"span",35),s(1),d()),o&2){let e,t=m().$implicit,n=m();l(),E(" \u2192 ",(e=n.getAccountById(t.toAccount))==null?null:e.name," ")}}function Do(o,i){if(o&1&&(r(0,"span",36),s(1),d()),o&2){let e,t=m().$implicit,n=m();l(),E(" \u2192 ",(e=n.getAccountById(t.toAccount))==null?null:e.name," ")}}function Io(o,i){o&1&&(r(0,"span",37),s(1,"sync_alt"),d())}function Fo(o,i){if(o&1&&(r(0,"option",49),s(1),d()),o&2){let e=i.$implicit,t=m(2).$implicit;_("value",e.id)("selected",e.id===t.category),l(),S(e.name)}}function Mo(o,i){if(o&1&&(r(0,"option",49),s(1),d()),o&2){let e=i.$implicit,t=m(2).$implicit;_("value",e.id)("selected",e.id===t.account),l(),S(e.name)}}function Po(o,i){if(o&1&&(r(0,"option",49),s(1),d()),o&2){let e=i.$implicit,t=m(3).$implicit;_("value",e.id)("selected",e.id===t.toAccount),l(),E(" ",e.name)}}function Ao(o,i){if(o&1&&(r(0,"div")(1,"label",40),s(2,"Nach Konto"),d(),r(3,"select",59)(4,"option",48),s(5,"W\xE4hlen"),d(),O(6,Po,2,3,"option",49,Ot),d()()),o&2){let e=m(2).$implicit,t=m();l(3),_("required",t.getInlineTransactionType(e.id)==="transfer")("disabled",!t.isEditingInline(e.id)),l(3),B(t.accounts)}}function Vo(o,i){if(o&1){let e=P();r(0,"button",60),u("click",function(n){x(e);let a=m(2).$implicit;return m().toggleInlineEdit(a.id),f(n.stopPropagation())}),r(1,"span",57),s(2,"edit"),d(),r(3,"span",8),s(4,"Bearbeiten"),d()()}}function No(o,i){if(o&1){let e=P();r(0,"button",61),u("click",function(n){x(e);let a=m(2).$implicit;return m().cancelInlineEdit(a.id),f(n.stopPropagation())}),r(1,"span",57),s(2,"close"),d(),r(3,"span",8),s(4,"Abbrechen"),d()()}}function Ro(o,i){o&1&&(r(0,"button",62)(1,"span",57),s(2,"save"),d(),r(3,"span",8),s(4,"Speichern"),d()())}function Oo(o,i){if(o&1){let e=P();r(0,"div",38),u("click",function(n){return x(e),f(n.stopPropagation())}),r(1,"form",39),u("submit",function(n){x(e);let a=m().$implicit,c=m();return f(c.onInlineTransactionEdit(n,a.id))}),r(2,"div")(3,"label",40),s(4,"Typ"),d(),r(5,"div",41)(6,"button",42),u("click",function(){x(e);let n=m().$implicit,a=m();return f(a.setInlineTransactionType(n.id,"expense"))}),s(7," Ausgabe "),d(),r(8,"button",42),u("click",function(){x(e);let n=m().$implicit,a=m();return f(a.setInlineTransactionType(n.id,"income"))}),s(9," Einnahme "),d(),r(10,"button",42),u("click",function(){x(e);let n=m().$implicit,a=m();return f(a.setInlineTransactionType(n.id,"transfer"))}),s(11," Transfer "),d()()(),r(12,"div",43)(13,"div")(14,"label",40),s(15,"Betrag (\u20AC)"),d(),A(16,"input",44),d(),r(17,"div")(18,"label",40),s(19,"Datum"),d(),A(20,"input",45),d()(),r(21,"div")(22,"label",40),s(23,"Beschreibung"),d(),A(24,"input",46),d(),r(25,"div")(26,"label",40),s(27,"Kategorie"),d(),r(28,"select",47)(29,"option",48),s(30,"Kategorie w\xE4hlen"),d(),O(31,Fo,2,3,"option",49,Ot),d()(),r(33,"div",43)(34,"div")(35,"label",40),s(36),d(),r(37,"select",50)(38,"option",48),s(39,"W\xE4hlen"),d(),O(40,Mo,2,3,"option",49,Ot),d()(),j(42,Ao,8,2,"div",51),d(),r(43,"div",52),j(44,Vo,5,0,"button",53)(45,No,5,0,"button",54)(46,Ro,5,0,"button",55),r(47,"button",56),u("click",function(n){x(e);let a=m().$implicit;return m().onDeleteTransaction(a.id),f(n.stopPropagation())}),r(48,"span",57),s(49,"delete"),d(),r(50,"span",8),s(51,"L\xF6schen"),d()(),r(52,"button",58),u("click",function(n){x(e);let a=m().$implicit;return m().onCopyToFixedCost(a),f(n.stopPropagation())}),r(53,"span",57),s(54,"bookmark_add"),d(),r(55,"span",8),s(56,"Als Fixkosten"),d()()()()()}if(o&2){let e=m().$implicit,t=m();l(6),z(t.getInlineTransactionType(e.id)==="expense"?"flex-1 bg-red-500/20 text-red-500 border border-red-500 px-4 py-2 rounded-sm text-sm font-medium transition-colors disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-4 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(2),z(t.getInlineTransactionType(e.id)==="income"?"flex-1 bg-green-500/20 text-green-500 border border-green-500 px-4 py-2 rounded-sm text-sm font-medium transition-colors disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-4 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(2),z(t.getInlineTransactionType(e.id)==="transfer"?"flex-1 bg-purple-500/20 text-purple-500 border border-purple-500 px-4 py-2 rounded-sm text-sm font-medium transition-colors disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-4 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(6),_("value",e.amount)("disabled",!t.isEditingInline(e.id)),l(4),_("value",e.date)("disabled",!t.isEditingInline(e.id)),l(4),_("value",e.description)("disabled",!t.isEditingInline(e.id)),l(4),_("disabled",!t.isEditingInline(e.id)),l(3),B(t.getSortedCategories()),l(5),E(" ",t.getInlineTransactionType(e.id)==="transfer"?"Von Konto":"Konto"," "),l(),_("disabled",!t.isEditingInline(e.id)),l(3),B(t.accounts),l(2),_("ngIf",t.getInlineTransactionType(e.id)==="transfer"),l(2),_("ngIf",!t.isEditingInline(e.id)),l(),_("ngIf",t.isEditingInline(e.id)),l(),_("ngIf",t.isEditingInline(e.id))}}function Bo(o,i){if(o&1){let e=P();r(0,"div",15),u("click",function(){let n=x(e).$implicit,a=m();return f(a.toggleExpansion(n.id))}),r(1,"div",16)(2,"div",17)(3,"div",18),s(4),d(),r(5,"div",19),j(6,To,2,0,"span",20),s(7),d()(),r(8,"div",21)(9,"span",22),s(10),d(),r(11,"span",23),s(12),j(13,ko,2,1,"span",24),d(),r(14,"span",23),s(15),d()()(),r(16,"div",25)(17,"div",26),s(18),d(),r(19,"div",27),s(20),d(),r(21,"div",28),s(22),j(23,Do,2,1,"span",29),d(),r(24,"div",30)(25,"span",23),s(26),d()(),r(27,"div",31),j(28,Io,2,0,"span",32),s(29),d()(),j(30,Oo,57,22,"div",33),d()}if(o&2){let e,t,n=i.$implicit,a=i.$index,c=i.$count,p=m();V("border-b",a!==c-1)("border-dash-border",a!==c-1),l(3),_("title",nt(n.description)),l(),E(" ",n.description," "),l(),V("text-green-500",n.type==="income")("text-red-500",n.type==="expense")("text-purple-400",n.type==="transfer"),l(),_("ngIf",n.type==="transfer"),l(),re(" ",n.type==="income"?"+":n.type==="expense"?"-":"","",p.formatCurrency(n.amount)," "),l(3),S(p.formatDate(n.date)),l(2),E("",((e=p.getAccountById(n.account))==null?null:e.name)||"Unbekannt"," "),l(),_("ngIf",n.type==="transfer"),l(2),S(p.getCategoryFullName(n.category)),l(3),E(" ",p.formatDate(n.date)," "),l(),_("title",nt(n.description)),l(),E(" ",n.description," "),l(2),E(" ",((t=p.getAccountById(n.account))==null?null:t.name)||"Unbekannt"," "),l(),_("ngIf",n.type==="transfer"),l(3),S(p.getCategoryFullName(n.category)),l(),V("text-green-500",n.type==="income")("text-red-500",n.type==="expense")("text-purple-400",n.type==="transfer"),l(),_("ngIf",n.type==="transfer"),l(),re(" ",n.type==="income"?"+":n.type==="expense"?"-":"","",p.formatCurrency(n.amount)," "),l(),_("ngIf",p.expandedTransactionId()===n.id)}}var ot=class o{stateService=C(ue);utilityService=C(Z);transactions=[];accounts=[];categories=[];searchQuery="";addTransaction=new M;editTransaction=new M;deleteTransaction=new M;copyToFixedCost=new M;search=new M;expandedTransactionId=w(null,{});editingTransactionId=w(null,{});inlineTransactionTypes=w(new Map,{});formatCurrency(i){return this.utilityService.formatCurrency(i)}formatDate(i){return this.utilityService.formatDate(i)}getAccountById(i){return this.accounts.find(e=>e.id===i)}getCategoryById(i){return this.categories.find(e=>e.id===i)}getCategoryFullName(i){return this.stateService.getCategoryFullName(i)}getSortedCategories(){return[...this.categories].sort((i,e)=>i.name.localeCompare(e.name))}toggleExpansion(i){if(this.expandedTransactionId()===i)this.expandedTransactionId.set(null),this.editingTransactionId.set(null);else{this.expandedTransactionId.set(i);let e=this.transactions.find(t=>t.id===i);if(e){let t=new Map(this.inlineTransactionTypes());t.set(i,e.type),this.inlineTransactionTypes.set(t)}}}toggleInlineEdit(i){this.editingTransactionId.set(this.editingTransactionId()===i?null:i)}cancelInlineEdit(i){this.editingTransactionId.set(null);let e=this.transactions.find(t=>t.id===i);if(e){let t=new Map(this.inlineTransactionTypes());t.set(i,e.type),this.inlineTransactionTypes.set(t)}}isEditingInline(i){return this.editingTransactionId()===i}getInlineTransactionType(i){return this.inlineTransactionTypes().get(i)||"expense"}setInlineTransactionType(i,e){let t=new Map(this.inlineTransactionTypes());t.set(i,e),this.inlineTransactionTypes.set(t)}onSearch(i){let e=i.target.value;this.search.emit(e)}onInlineTransactionEdit(i,e){i.preventDefault();let t=i.target,n=new FormData(t),a=this.getInlineTransactionType(e),c=this.transactions.find(g=>g.id===e);if(!c)return;let p=W(H({},c),{amount:parseFloat(n.get("amount")),description:n.get("description"),category:n.get("category"),account:n.get("account"),date:n.get("date"),type:a,toAccount:a==="transfer"?n.get("toAccount"):void 0});this.stateService.updateTransaction(e,p,c),this.editingTransactionId.set(null)}onDeleteTransaction(i){this.deleteTransaction.emit(i)}onCopyToFixedCost(i){this.copyToFixedCost.emit(i)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-transactions-view"]],inputs:{transactions:"transactions",accounts:"accounts",categories:"categories",searchQuery:"searchQuery"},outputs:{addTransaction:"addTransaction",editTransaction:"editTransaction",deleteTransaction:"deleteTransaction",copyToFixedCost:"copyToFixedCost",search:"search"},decls:17,vars:2,consts:[[1,"gradient-card","p-3","md:p-4","rounded-sm"],[1,"flex","flex-col","sm:flex-row","items-stretch","sm:items-center","justify-between","gap-3","md:gap-4"],[1,"hidden","sm:block","text-lg","font-bold","text-dash-text","whitespace-nowrap"],[1,"flex-1","w-full","sm:max-w-md","order-2","sm:order-none"],["type","text","placeholder","Transaktion suchen...",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","md:px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","text-sm",3,"input","value"],[1,"gradient-btn","text-white","px-3","md:px-4","py-2","rounded-sm","text-sm","font-medium","flex","items-center","justify-center","gap-2","whitespace-nowrap","order-1","sm:order-none",3,"click"],[1,"material-symbols-sharp","text-lg"],[1,"sm:hidden"],[1,"hidden","sm:inline"],[1,"gradient-card","rounded-sm"],[1,"p-8","text-center"],[1,"p-3","md:p-4","cursor-pointer","hover:bg-dash-card-hover","transition-colors",3,"border-b","border-dash-border"],[1,"material-symbols-sharp","text-4xl","text-dash-text-dim","mb-4","block"],[1,"text-dash-text-dim","text-sm"],[1,"text-dash-text-dim","text-xs","mt-2"],[1,"p-3","md:p-4","cursor-pointer","hover:bg-dash-card-hover","transition-colors",3,"click"],[1,"flex","flex-col","gap-2","md:hidden"],[1,"flex","justify-between","items-start","gap-2"],[1,"font-medium","text-dash-text","truncate","flex-1",3,"title"],[1,"font-mono","font-bold","text-sm","whitespace-nowrap"],["class","material-symbols-sharp text-sm align-middle mr-1",4,"ngIf"],[1,"flex","flex-wrap","gap-x-3","gap-y-1","text-xs","text-dash-text-dim"],[1,"font-mono"],[1,"truncate"],["class","text-dash-accent",4,"ngIf"],[1,"hidden","md:grid","grid-cols-12","gap-4","items-center"],[1,"col-span-2","text-dash-text-dim","font-mono","text-xs"],[1,"col-span-4","font-medium","text-dash-text","truncate",3,"title"],[1,"col-span-2","text-dash-text-dim","truncate"],["class","text-xs text-dash-accent",4,"ngIf"],[1,"col-span-2","flex","items-center","gap-2","text-dash-text-dim","truncate"],[1,"col-span-2","text-right","font-mono","font-bold"],["class","material-symbols-sharp text-base align-middle mr-1",4,"ngIf"],["class","mt-4 pt-4 border-t border-dash-border",3,"click",4,"ngIf"],[1,"material-symbols-sharp","text-sm","align-middle","mr-1"],[1,"text-dash-accent"],[1,"text-xs","text-dash-accent"],[1,"material-symbols-sharp","text-base","align-middle","mr-1"],[1,"mt-4","pt-4","border-t","border-dash-border",3,"click"],[1,"space-y-4",3,"submit"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],[1,"flex","gap-2"],["type","button",3,"click","disabled"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["type","number","name","amount","step","0.01","required","","placeholder","0,00",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","md:px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"value","disabled"],["type","date","name","date","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","md:px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"value","disabled"],["type","text","name","description","required","","placeholder","z.B. Einkauf bei Supermarkt",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"value","disabled"],["name","category","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["value",""],[3,"value","selected"],["name","account","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","md:px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],[1,"flex","flex-wrap","justify-end","gap-2","pt-2"],["type","button","class","px-2 sm:px-3 py-1 bg-dash-bg hover:bg-dash-border text-dash-text text-xs rounded-sm border border-dash-border transition-colors flex items-center gap-1",3,"click",4,"ngIf"],["type","button","class","px-2 sm:px-3 py-1 bg-dash-bg hover:bg-dash-border text-dash-text-dim hover:text-white text-xs rounded-sm border border-dash-border transition-colors flex items-center gap-1",3,"click",4,"ngIf"],["type","submit","class","px-2 sm:px-3 py-1 bg-dash-accent hover:bg-dash-accent-hover text-white text-xs rounded-sm transition-colors flex items-center gap-1",4,"ngIf"],["type","button",1,"px-2","sm:px-3","py-1","bg-red-500/10","hover:bg-red-500/20","text-red-500","text-xs","rounded-sm","border","border-red-500/30","transition-colors","flex","items-center","gap-1",3,"click"],[1,"material-symbols-sharp","text-sm"],["type","button","title","Als Fixkosten speichern",1,"px-2","sm:px-3","py-1","bg-dash-accent/10","hover:bg-dash-accent/20","text-dash-accent","text-xs","rounded-sm","border","border-dash-accent/30","transition-colors","flex","items-center","gap-1",3,"click"],["name","toAccount",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","md:px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"required","disabled"],["type","button",1,"px-2","sm:px-3","py-1","bg-dash-bg","hover:bg-dash-border","text-dash-text","text-xs","rounded-sm","border","border-dash-border","transition-colors","flex","items-center","gap-1",3,"click"],["type","button",1,"px-2","sm:px-3","py-1","bg-dash-bg","hover:bg-dash-border","text-dash-text-dim","hover:text-white","text-xs","rounded-sm","border","border-dash-border","transition-colors","flex","items-center","gap-1",3,"click"],["type","submit",1,"px-2","sm:px-3","py-1","bg-dash-accent","hover:bg-dash-accent-hover","text-white","text-xs","rounded-sm","transition-colors","flex","items-center","gap-1"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Transaktionen"),d(),r(4,"div",3)(5,"input",4),u("input",function(a){return t.onSearch(a)}),d()(),r(6,"button",5),u("click",function(){return t.addTransaction.emit()}),r(7,"span",6),s(8,"add"),d(),r(9,"span",7),s(10,"Neue Transaktion"),d(),r(11,"span",8),s(12,"Neue Transaktion"),d()()()(),r(13,"div",9),I(14,Eo,7,0,"div",10),O(15,Bo,31,37,"div",11,Ot),d()),e&2&&(l(5),_("value",t.searchQuery),l(9),F(t.transactions.length===0?14:-1),l(),B(t.transactions))},dependencies:[$,le,q,pe,Ve,Ne,ce,me],encapsulation:2})};var Lo=(o,i)=>i.day,_n=(o,i)=>i.name,jo=(o,i)=>i.id;function Go(o,i){if(o&1&&(b(0,"span",4),s(1),v()),o&2){let e=m();l(),E(" (",e.selectedAccountName,") ")}}function zo(o,i){if(o&1&&(b(0,"div",50)(1,"div",51),oe(2,"div",52),b(3,"span",53),s(4),v()(),b(5,"div",54)(6,"span",55),s(7),Fe(8,"number"),v(),b(9,"span",56),s(10),v()()()),o&2){let e=i.$implicit,t=m(2);l(2),ke("background-color",e.color),l(2),S(e.name),l(3),E("",_i(8,5,e.percentage,"1.1-1"),"%"),l(3),S(t.formatCurrency(e.amount))}}function $o(o,i){if(o&1&&(b(0,"div",21)(1,"div",45),oe(2,"div",46),b(3,"div",47)(4,"span",48),s(5),v()()(),b(6,"div",49),O(7,zo,11,8,"div",50,_n),v()()),o&2){let e=m();l(2),ke("background",e.pieChartGradient),l(3),S(e.formatCurrency(e.stats.expenses)),l(2),B(e.categoryStats)}}function Ho(o,i){o&1&&(b(0,"div",22),s(1," Keine Ausgaben in diesem Monat "),v())}function Uo(o,i){if(o&1&&(b(0,"div",50)(1,"div",51),oe(2,"div",52),b(3,"span",53),s(4),v()(),b(5,"div",54)(6,"span",55),s(7),Fe(8,"number"),v(),b(9,"span",56),s(10),v()()()),o&2){let e=i.$implicit,t=m(2);l(2),ke("background-color",e.color),l(2),S(e.name),l(3),E("",_i(8,5,e.percentage,"1.1-1"),"%"),l(3),S(t.formatCurrency(e.amount))}}function Wo(o,i){if(o&1&&(b(0,"div",21)(1,"div",45),oe(2,"div",46),b(3,"div",47)(4,"span",48),s(5),v()()(),b(6,"div",49),O(7,Uo,11,8,"div",50,_n),v()()),o&2){let e=m();l(2),ke("background",e.incomePieChartGradient),l(3),S(e.formatCurrency(e.stats.income)),l(2),B(e.incomeCategoryStats)}}function Jo(o,i){o&1&&(b(0,"div",22),s(1," Keine Einnahmen in diesem Monat "),v())}function Ko(o,i){if(o&1&&(b(0,"div",60),s(1),v()),o&2){let e=m().$implicit,t=m();V("text-green-500",e.income>e.expense)("text-red-500",e.expense>e.income),l(),re(" ",e.income>e.expense?"+":"-","",t.formatCurrency(t.Math.abs(e.income-e.expense))," ")}}function Yo(o,i){if(o&1&&(b(0,"div",57)(1,"div",58),s(2),v(),I(3,Ko,2,6,"div",59),v()),o&2){let e=i.$implicit,t=m();V("bg-green-500/20",e.income>e.expense)("bg-red-500/20",e.expense>e.income)("bg-dash-bg",e.income===0&&e.expense===0),Zi("title","Tag "+e.day+": +"+t.formatCurrency(e.income)+" / -"+t.formatCurrency(e.expense)),l(2),S(e.day),l(),F(e.income>0||e.expense>0?3:-1)}}function qo(o,i){if(o&1&&(b(0,"div",61)(1,"div",62)(2,"span",63),s(3),v(),b(4,"div",64)(5,"div",65),s(6),v(),b(7,"div",66),s(8),v()()(),b(9,"span",67),s(10),v()()),o&2){let e=i.$implicit,t=i.$index,n=m(2);l(3),E("",t+1,"."),l(3),S(e.description),l(2),re("",e.category," \u2022 ",n.formatDate(e.date)),l(2),E("-",n.formatCurrency(e.amount))}}function Zo(o,i){if(o&1&&(b(0,"div",38),O(1,qo,11,5,"div",61,jo),v()),o&2){let e=m();l(),B(e.topExpenses)}}function Xo(o,i){o&1&&(b(0,"div",39),s(1," Keine Ausgaben in diesem Monat "),v())}var rt=class o{utilityService=C(Z);themeService=C(Re);Math=Math;stats={balance:0,income:0,expenses:0};categoryStats=[];incomeCategoryStats=[];dailyTrend=[];topExpenses=[];selectedMonthName="";selectedAccountName=null;transactionCount=0;incomeTransactionCount=0;expenseTransactionCount=0;averageDailyExpense=0;averageDailyIncome=0;largestExpense=0;largestIncome=0;pieChartGradient="";incomePieChartGradient="";trendPoints="";trendAreaPoints="";trendMaxValue=0;trendMinValue=0;zeroLineY=30;daysInSelectedMonth=30;formatCurrency(i){return this.utilityService.formatCurrency(i)}formatDate(i){return this.utilityService.formatDate(i)}getCategoryFullName(i){return i}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-statistics-view"]],inputs:{stats:"stats",categoryStats:"categoryStats",incomeCategoryStats:"incomeCategoryStats",dailyTrend:"dailyTrend",topExpenses:"topExpenses",selectedMonthName:"selectedMonthName",selectedAccountName:"selectedAccountName",transactionCount:"transactionCount",incomeTransactionCount:"incomeTransactionCount",expenseTransactionCount:"expenseTransactionCount",averageDailyExpense:"averageDailyExpense",averageDailyIncome:"averageDailyIncome",largestExpense:"largestExpense",largestIncome:"largestIncome",pieChartGradient:"pieChartGradient",incomePieChartGradient:"incomePieChartGradient",trendPoints:"trendPoints",trendAreaPoints:"trendAreaPoints",trendMaxValue:"trendMaxValue",trendMinValue:"trendMinValue",zeroLineY:"zeroLineY",daysInSelectedMonth:"daysInSelectedMonth"},decls:123,vars:34,consts:[[1,"flex","flex-col","gap-4"],[1,"gradient-card","p-4","rounded-sm"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","text-sm","font-normal","ml-2"],[1,"text-xs","text-dash-text-dim"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","items-center","gap-3","mb-2"],[1,"w-10","h-10","rounded-sm","bg-green-500/20","flex","items-center","justify-center"],[1,"material-symbols-sharp","text-green-500"],[1,"text-xs","text-dash-text-dim","uppercase","tracking-wider"],[1,"text-xl","font-bold","text-green-500"],[1,"w-10","h-10","rounded-sm","bg-red-500/20","flex","items-center","justify-center"],[1,"material-symbols-sharp","text-red-500"],[1,"text-xl","font-bold","text-red-500"],[1,"w-10","h-10","rounded-sm","bg-dash-accent/20","flex","items-center","justify-center"],[1,"material-symbols-sharp","text-dash-accent"],[1,"text-xl","font-bold"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"gradient-card","p-3","md:p-4","rounded-sm"],[1,"text-sm","font-bold","text-dash-text-dim","uppercase","tracking-wider","mb-4"],[1,"flex","flex-col","sm:flex-row","items-center","gap-4","sm:gap-6"],[1,"text-center","py-8","text-dash-text-dim","text-sm"],[1,"relative","h-48"],["viewBox","0 0 100 60","preserveAspectRatio","none",1,"w-full","h-full"],["x1","0","y1","15","x2","100","y2","15","stroke","#333","stroke-width","0.2"],["x1","0","y1","30","x2","100","y2","30","stroke","#333","stroke-width","0.2"],["x1","0","y1","45","x2","100","y2","45","stroke","#333","stroke-width","0.2"],["x1","0","x2","100","stroke","#666","stroke-width","0.3","stroke-dasharray","2,2"],["fill","url(#trendGradient)","opacity","0.3"],["fill","none","stroke-width","0.5","stroke-linecap","round","stroke-linejoin","round"],["id","trendGradient","x1","0%","y1","0%","x2","0%","y2","100%"],["offset","0%"],["offset","100%"],[1,"absolute","left-0","top-0","h-full","flex","flex-col","justify-between","text-[10px]","text-dash-text-dim","font-mono"],[1,"flex","justify-between","mt-2","text-[10px]","text-dash-text-dim","font-mono"],[1,"grid","grid-cols-7","gap-0.5","sm:gap-1"],[1,"p-1","sm:p-2","rounded-sm","text-center","text-[10px]","sm:text-xs",3,"bg-green-500/20","bg-red-500/20","bg-dash-bg","title"],[1,"space-y-2"],[1,"text-center","py-4","text-dash-text-dim","text-sm"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-2","sm:gap-4"],[1,"gradient-card","p-3","md:p-4","rounded-sm","text-center"],[1,"text-[10px]","sm:text-xs","text-dash-text-dim","uppercase","tracking-wider","mb-1"],[1,"text-sm","sm:text-lg","font-bold","text-red-500"],[1,"text-sm","sm:text-lg","font-bold","text-green-500"],[1,"relative","w-28","h-28","sm:w-32","sm:h-32","flex-shrink-0"],[1,"w-full","h-full","rounded-full"],[1,"absolute","inset-3","sm:inset-4","bg-dash-card","rounded-full","flex","items-center","justify-center"],[1,"text-[10px]","sm:text-xs","text-dash-text-dim","font-mono"],[1,"flex-1","w-full","space-y-2","max-h-48","overflow-y-auto"],[1,"flex","items-center","justify-between","text-xs","sm:text-sm"],[1,"flex","items-center","gap-2","min-w-0"],[1,"w-3","h-3","rounded-sm","flex-shrink-0"],[1,"text-dash-text","truncate"],[1,"flex","items-center","gap-2","flex-shrink-0","ml-2"],[1,"text-dash-text-dim","font-mono","text-[10px]","sm:text-xs"],[1,"text-dash-text","font-mono","text-[10px]","sm:text-xs","hidden","sm:inline"],[1,"p-1","sm:p-2","rounded-sm","text-center","text-[10px]","sm:text-xs",3,"title"],[1,"font-bold","text-dash-text"],[1,"text-[8px]","sm:text-[9px]","font-mono","hidden","sm:block",3,"text-green-500","text-red-500"],[1,"text-[8px]","sm:text-[9px]","font-mono","hidden","sm:block"],[1,"flex","items-center","justify-between","p-2","bg-dash-bg","rounded-sm","gap-2"],[1,"flex","items-center","gap-2","sm:gap-3","min-w-0"],[1,"text-dash-text-dim","font-mono","text-xs","w-4","sm:w-5","flex-shrink-0"],[1,"min-w-0"],[1,"text-xs","sm:text-sm","text-dash-text","truncate"],[1,"text-[10px]","sm:text-xs","text-dash-text-dim","truncate"],[1,"font-mono","font-bold","text-red-500","text-xs","sm:text-sm","flex-shrink-0"]],template:function(e,t){e&1&&(b(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4),I(5,Go,2,1,"span",4),v(),b(6,"div",5),s(7),v()()(),b(8,"div",6)(9,"div",1)(10,"div",7)(11,"div",8)(12,"span",9),s(13,"trending_up"),v()(),b(14,"div")(15,"div",10),s(16,"Einnahmen"),v(),b(17,"div",11),s(18),v()()(),b(19,"div",5),s(20),v()(),b(21,"div",1)(22,"div",7)(23,"div",12)(24,"span",13),s(25,"trending_down"),v()(),b(26,"div")(27,"div",10),s(28,"Ausgaben"),v(),b(29,"div",14),s(30),v()()(),b(31,"div",5),s(32),v()(),b(33,"div",1)(34,"div",7)(35,"div",15)(36,"span",16),s(37,"account_balance"),v()(),b(38,"div")(39,"div",10),s(40,"Netto"),v(),b(41,"div",17),s(42),v()()(),b(43,"div",5),s(44," Differenz Einnahmen - Ausgaben "),v()()(),b(45,"div",18)(46,"div",19)(47,"h3",20),s(48,"Ausgaben nach Kategorie"),v(),I(49,$o,9,3,"div",21)(50,Ho,2,0,"div",22),v(),b(51,"div",19)(52,"h3",20),s(53,"Einnahmen nach Kategorie"),v(),I(54,Wo,9,3,"div",21)(55,Jo,2,0,"div",22),v()(),b(56,"div",1)(57,"h3",20),s(58,"Monatlicher Trend "),v(),b(59,"div",23),Pe(),b(60,"svg",24),oe(61,"line",25)(62,"line",26)(63,"line",27)(64,"line",28)(65,"polygon",29)(66,"polyline",30),b(67,"defs")(68,"linearGradient",31),oe(69,"stop",32)(70,"stop",33),v()()(),tt(),b(71,"div",34)(72,"span"),s(73),v(),b(74,"span"),s(75),v(),b(76,"span"),s(77,"0"),v(),b(78,"span"),s(79),v()()(),b(80,"div",35)(81,"span"),s(82,"1"),v(),b(83,"span"),s(84),v(),b(85,"span"),s(86),v(),b(87,"span"),s(88),v(),b(89,"span"),s(90),v()()(),b(91,"div",19)(92,"h3",20),s(93,"T\xE4gliche \xDCbersicht "),v(),b(94,"div",36),O(95,Yo,4,9,"div",37,Lo),v()(),b(97,"div",19)(98,"h3",20),s(99,"Top 10 Ausgaben"),v(),I(100,Zo,3,0,"div",38)(101,Xo,2,0,"div",39),v(),b(102,"div",40)(103,"div",41)(104,"div",42),s(105,"\xD8 T\xE4gl. Ausgaben"),v(),b(106,"div",43),s(107),v()(),b(108,"div",41)(109,"div",42),s(110,"\xD8 T\xE4gl. Einnahmen"),v(),b(111,"div",44),s(112),v()(),b(113,"div",41)(114,"div",42),s(115,"Gr\xF6\xDFte Ausgabe"),v(),b(116,"div",43),s(117),v()(),b(118,"div",41)(119,"div",42),s(120,"Gr\xF6\xDFte Einnahme"),v(),b(121,"div",44),s(122),v()()()()),e&2&&(l(4),E(" Statistik - ",t.selectedMonthName," "),l(),F(t.selectedAccountName?5:-1),l(2),E(" ",t.transactionCount," Transaktionen "),l(11),E("+",t.formatCurrency(t.stats.income)),l(2),E(" ",t.incomeTransactionCount," Transaktionen "),l(10),E("-",t.formatCurrency(t.stats.expenses)),l(2),E(" ",t.expenseTransactionCount," Transaktionen "),l(9),V("text-green-500",t.stats.income-t.stats.expenses>=0)("text-red-500",t.stats.income-t.stats.expenses<0),l(),re(" ",t.stats.income-t.stats.expenses>=0?"+":"","",t.formatCurrency(t.stats.income-t.stats.expenses)," "),l(7),F(t.categoryStats.length>0?49:50),l(5),F(t.incomeCategoryStats.length>0?54:55),l(10),se("y1",t.zeroLineY)("y2",t.zeroLineY),l(),se("points",t.trendAreaPoints),l(),se("points",t.trendPoints)("stroke",t.themeService.currentAccentColor().value),l(3),se("style","stop-color:"+t.themeService.currentAccentColor().value+";stop-opacity:0.5",mi),l(),se("style","stop-color:"+t.themeService.currentAccentColor().value+";stop-opacity:0",mi),l(3),S(t.formatCurrency(t.trendMaxValue)),l(2),S(t.formatCurrency(t.trendMaxValue/2)),l(4),S(t.formatCurrency(t.trendMinValue)),l(5),S(t.Math.ceil(t.daysInSelectedMonth/4)),l(2),S(t.Math.ceil(t.daysInSelectedMonth/2)),l(2),S(t.Math.ceil(t.daysInSelectedMonth*3/4)),l(2),S(t.daysInSelectedMonth),l(5),B(t.dailyTrend),l(5),F(t.topExpenses.length>0?100:101),l(7),S(t.formatCurrency(t.averageDailyExpense)),l(5),E("",t.formatCurrency(t.averageDailyIncome)," "),l(5),E("",t.formatCurrency(t.largestExpense)," "),l(5),S(t.formatCurrency(t.largestIncome)))},dependencies:[$,sn],encapsulation:2})};var bi;function Qo(){if(bi==null){let o=typeof document<"u"?document.head:null;bi=!!(o&&(o.createShadowRoot||o.attachShadow))}return bi}function Bt(o){if(Qo()){let i=o.getRootNode?o.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&i instanceof ShadowRoot)return i}return null}function at(o){return o.composedPath?o.composedPath()[0]:o.target}function bn(o){return o.buttons===0||o.detail===0}function vn(o){let i=o.touches&&o.touches[0]||o.changedTouches&&o.changedTouches[0];return!!i&&i.identifier===-1&&(i.radiusX==null||i.radiusX===1)&&(i.radiusY==null||i.radiusY===1)}function Lt(o,i=0){return er(o)?Number(o):arguments.length===2?i:0}function er(o){return!isNaN(parseFloat(o))&&!isNaN(Number(o))}function we(o){return o instanceof ze?o.nativeElement:o}var jt=new WeakMap,yn=(()=>{class o{_appRef;_injector=C(it);_environmentInjector=C(Hi);load(e){let t=this._appRef=this._appRef||this._injector.get(hi),n=jt.get(t);n||(n={loaders:new Set,refs:[]},jt.set(t,n),t.onDestroy(()=>{jt.get(t)?.refs.forEach(a=>a.destroy()),jt.delete(t)})),n.loaders.has(e)||(n.loaders.add(e),n.refs.push(on(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var vi;try{vi=typeof Intl<"u"&&Intl.v8BreakIterator}catch{vi=!1}var yi=(()=>{class o{_platformId=C(Ji);isBrowser=this._platformId?dn(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||vi)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var tr=new Te("cdk-dir-doc",{providedIn:"root",factory:()=>C(Le)}),ir=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function nr(o){let i=o?.toLowerCase()||"";return i==="auto"&&typeof navigator<"u"&&navigator?.language?ir.test(navigator.language)?"rtl":"ltr":i==="rtl"?"rtl":"ltr"}var Ci=(()=>{class o{get value(){return this.valueSignal()}valueSignal=w("ltr");change=new M;constructor(){let e=C(tr,{optional:!0});if(e){let t=e.body?e.body.dir:null,n=e.documentElement?e.documentElement.dir:null;this.valueSignal.set(nr(t||n||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var or=20,Cn=(()=>{class o{_ngZone=C(je);_platform=C(yi);_renderer=C(Je).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Y;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let t=this.scrollContainers.get(e);t&&(t.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=or){return this._platform.isBrowser?new et(t=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=e>0?this._scrolled.pipe(li(e)).subscribe(t):this._scrolled.subscribe(t);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Li()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,t)=>this.deregister(t)),this._scrolled.complete()}ancestorScrolled(e,t){let n=this.getAncestorScrollContainers(e);return this.scrolled(t).pipe(yt(a=>!a||n.indexOf(a)>-1))}getAncestorScrollContainers(e){let t=[];return this.scrollContainers.forEach((n,a)=>{this._scrollableContainsElement(a,e)&&t.push(a)}),t}_scrollableContainsElement(e,t){let n=we(t),a=e.getElementRef().nativeElement;do if(n==a)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var rr=20,Sn=(()=>{class o{_platform=C(yi);_listeners;_viewportSize;_change=new Y;_document=C(Le);constructor(){let e=C(je),t=C(Je).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=a=>this._change.next(a);this._listeners=[t.listen("window","resize",n),t.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:t,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+t,height:n,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,t=this._getWindow(),n=e.documentElement,a=n.getBoundingClientRect(),c=-a.top||e.body.scrollTop||t.scrollY||n.scrollTop||0,p=-a.left||e.body.scrollLeft||t.scrollX||n.scrollLeft||0;return{top:c,left:p}}change(e=rr){return e>0?this._change.pipe(li(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var wn=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=Et({type:o});static \u0275inj=wt({})}return o})();var Si={},Gt=class o{_appId=C(Wi);static _infix=`a${Math.floor(Math.random()*1e5).toString()}`;getId(i,e=!1){return this._appId!=="ng"&&(i+=this._appId),Si.hasOwnProperty(i)||(Si[i]=0),`${i}${e?o._infix+"-":""}${Si[i]++}`}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};function En(o){return Array.isArray(o)?o:[o]}function Ti(o){let i=o.cloneNode(!0),e=i.querySelectorAll("[id]"),t=o.nodeName.toLowerCase();i.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return t==="canvas"?Dn(o,i):(t==="input"||t==="select"||t==="textarea")&&kn(o,i),Tn("canvas",o,i,Dn),Tn("input, textarea, select",o,i,kn),i}function Tn(o,i,e,t){let n=i.querySelectorAll(o);if(n.length){let a=e.querySelectorAll(o);for(let c=0;c<n.length;c++)t(n[c],a[c])}}var ar=0;function kn(o,i){i.type!=="file"&&(i.value=o.value),i.type==="radio"&&i.name&&(i.name=`mat-clone-${i.name}-${ar++}`)}function Dn(o,i){let e=i.getContext("2d");if(e)try{e.drawImage(o,0,0)}catch{}}function Ai(o){let i=o.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function ki(o,i,e){let{top:t,bottom:n,left:a,right:c}=o;return e>=t&&e<=n&&i>=a&&i<=c}function sr(o,i){let e=i.left<o.left,t=i.left+i.width>o.right,n=i.top<o.top,a=i.top+i.height>o.bottom;return e||t||n||a}function lt(o,i,e){o.top+=i,o.bottom=o.top+o.height,o.left+=e,o.right=o.left+o.width}function In(o,i,e,t){let{top:n,right:a,bottom:c,left:p,width:g,height:h}=o,y=g*i,T=h*i;return t>n-T&&t<c+T&&e>p-y&&e<a+y}var zt=class{_document;positions=new Map;constructor(i){this._document=i}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Ai(e)})})}handleScroll(i){let e=at(i),t=this.positions.get(e);if(!t)return null;let n=t.scrollPosition,a,c;if(e===this._document){let h=this.getViewportScrollPosition();a=h.top,c=h.left}else a=e.scrollTop,c=e.scrollLeft;let p=n.top-a,g=n.left-c;return this.positions.forEach((h,y)=>{h.clientRect&&e!==y&&e.contains(y)&&lt(h.clientRect,p,g)}),n.top=a,n.left=c,{top:p,left:g}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function jn(o,i){let e=o.rootNodes;if(e.length===1&&e[0].nodeType===i.ELEMENT_NODE)return e[0];let t=i.createElement("div");return e.forEach(n=>t.appendChild(n)),t}function Vi(o,i,e){for(let t in i)if(i.hasOwnProperty(t)){let n=i[t];n?o.setProperty(t,n,e?.has(t)?"important":""):o.removeProperty(t)}return o}function Xe(o,i){let e=i?"":"none";Vi(o.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Fn(o,i,e){Vi(o.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},e)}function $t(o,i){return i&&i!="none"?o+" "+i:o}function Mn(o,i){o.style.width=`${i.width}px`,o.style.height=`${i.height}px`,o.style.transform=ct(i.left,i.top)}function ct(o,i){return`translate3d(${Math.round(o)}px, ${Math.round(i)}px, 0)`}function Pn(o){let i=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*i}function dr(o){let i=getComputedStyle(o),e=wi(i,"transition-property"),t=e.find(p=>p==="transform"||p==="all");if(!t)return 0;let n=e.indexOf(t),a=wi(i,"transition-duration"),c=wi(i,"transition-delay");return Pn(a[n])+Pn(c[n])}function wi(o,i){return o.getPropertyValue(i).split(",").map(t=>t.trim())}var lr=new Set(["position"]),Di=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(i,e,t,n,a,c,p,g,h,y){this._document=i,this._rootElement=e,this._direction=t,this._initialDomRect=n,this._previewTemplate=a,this._previewClass=c,this._pickupPositionOnPage=p,this._initialTransform=g,this._zIndex=h,this._renderer=y}attach(i){this._preview=this._createPreview(),i.appendChild(this._preview),An(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(i){this._preview.style.transform=i}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(i){this._preview.classList.add(i)}getTransitionDuration(){return dr(this._preview)}addEventListener(i,e){return this._renderer.listen(this._preview,i,e)}_createPreview(){let i=this._previewTemplate,e=this._previewClass,t=i?i.template:null,n;if(t&&i){let a=i.matchSize?this._initialDomRect:null,c=i.viewContainer.createEmbeddedView(t,i.context);c.detectChanges(),n=jn(c,this._document),this._previewEmbeddedView=c,i.matchSize?Mn(n,a):n.style.transform=ct(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Ti(this._rootElement),Mn(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Vi(n.style,{"pointer-events":"none",margin:An(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},lr),Xe(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(a=>n.classList.add(a)):n.classList.add(e)),n}};function An(o){return"showPopover"in o}var cr={passive:!0},Vn={passive:!1},mr={passive:!1,capture:!0},pr=800,Nn="cdk-drag-placeholder",Rn=new Set(["position"]),Ii=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=w(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new Y;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Be.EMPTY;_pointerUpSubscription=Be.EMPTY;_scrollSubscription=Be.EMPTY;_resizeSubscription=Be.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(i){i!==this._disabled&&(this._disabled=i,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Xe(e,i)))}_disabled=!1;beforeStarted=new Y;started=new Y;released=new Y;ended=new Y;entered=new Y;exited=new Y;dropped=new Y;moved=this._moveEvents;data;constrainPosition;constructor(i,e,t,n,a,c,p){this._config=e,this._document=t,this._ngZone=n,this._viewportRuler=a,this._dragDropRegistry=c,this._renderer=p,this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new zt(t),c.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(t=>we(t)),this._handles.forEach(t=>Xe(t,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){let e=we(i);if(e!==this._rootElement){this._removeRootElementListeners();let t=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[t.listen(e,"mousedown",this._pointerDown,Vn),t.listen(e,"touchstart",this._pointerDown,cr),t.listen(e,"dragstart",this._nativeDragStart,Vn)]),this._initialTransform=void 0,this._rootElement=e}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?we(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&sr(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let i=this._boundaryElement.getBoundingClientRect(),e=this._rootElement.getBoundingClientRect(),t=0,n=0;e.left<i.left?t=i.left-e.left:e.right>i.right&&(t=i.right-e.right),e.top<i.top?n=i.top-e.top:e.bottom>i.bottom&&(n=i.bottom-e.bottom);let a=this._activeTransform.x,c=this._activeTransform.y,p=a+t,g=c+n;this._rootElement.style.transform=ct(p,g),this._activeTransform={x:p,y:g},this._passiveTransform={x:p,y:g}}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),Xe(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),Xe(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){let i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){let i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=i=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,i)}else this.disabled||this._initializeDragSequence(this._rootElement,i)};_pointerMove=i=>{let e=this._getPointerPositionOnPage(i);if(!this._hasStartedDragging()){let n=Math.abs(e.x-this._pickupPositionOnPage.x),a=Math.abs(e.y-this._pickupPositionOnPage.y);if(n+a>=this._config.dragStartThreshold){let p=Date.now()>=this._dragStartTime+this._getDragStartDelay(i),g=this._dropContainer;if(!p){this._endDragSequence(i);return}(!g||!g.isDragging()&&!g.isReceiving())&&(i.cancelable&&i.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(i)))}return}i.cancelable&&i.preventDefault();let t=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t,e);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,a=this._activeTransform;a.x=t.x-n.x+this._passiveTransform.x,a.y=t.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(a.x,a.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:i,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})};_pointerUp=i=>{this._endDragSequence(i)};_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:i}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:i})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){st(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),t=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(e,"selectstart",ur,mr)}),t){let n=this._rootElement,a=n.parentNode,c=this._placeholder=this._createPlaceholderElement(),p=this._marker=this._marker||this._document.createComment("");a.insertBefore(p,n),this._initialTransform=n.style.transform||"",this._preview=new Di(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(a,e)),Fn(n,!1,Rn),this._document.body.appendChild(a.replaceChild(c,n)),this.started.next({source:this,event:i}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:i}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();let t=this.isDragging(),n=st(e),a=!n&&e.button!==0,c=this._rootElement,p=at(e),g=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+pr>Date.now(),h=n?vn(e):bn(e);if(p&&p.draggable&&e.type==="mousedown"&&e.preventDefault(),t||a||g||h)return;if(this._handles.length){let k=c.style;this._rootElementTapHighlight=k.webkitTapHighlightColor||"",k.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(k=>this._updateOnScroll(k)),this._boundaryElement&&(this._boundaryRect=Ai(this._boundaryElement));let y=this._previewTemplate;this._pickupPositionInElement=y&&y.template&&!y.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,i,e);let T=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:T.x,y:T.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){Fn(this._rootElement,!0,Rn),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,t=e.getItemIndex(this),n=this._getPointerPositionOnPage(i),a=this._getDragDistance(n),c=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:a,dropPoint:n,event:i}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:a,dropPoint:n,event:i}),e.drop(this,t,this._initialIndex,this._initialContainer,c,a,n,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:t,y:n}){let a=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!a&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(a=this._initialContainer),a&&a!==this._dropContainer&&this._ngZone.run(()=>{let c=this._dropContainer.getItemIndex(this),p=this._dropContainer.getItemAtIndex(c+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(a,this._dropContainer,p),this._dropContainer=a,this._dropContainer.enter(this,i,e,a===this._initialContainer&&a.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:a,currentIndex:a.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,n),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(i,e):this._applyPreviewTransform(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let i=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{let n=p=>{(!p||this._preview&&at(p)===this._preview.element&&p.propertyName==="transform")&&(c(),t(),clearTimeout(a))},a=setTimeout(n,e*1.5),c=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let i=this._placeholderTemplate,e=i?i.template:null,t;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),t=jn(this._placeholderRef,this._document)):t=Ti(this._rootElement),t.style.pointerEvents="none",t.classList.add(Nn),t}_getPointerPositionInElement(i,e,t){let n=e===this._rootElement?null:e,a=n?n.getBoundingClientRect():i,c=st(t)?t.targetTouches[0]:t,p=this._getViewportScrollPosition(),g=c.pageX-a.left-p.left,h=c.pageY-a.top-p.top;return{x:a.left-i.left+g,y:a.top-i.top+h}}_getPointerPositionOnPage(i){let e=this._getViewportScrollPosition(),t=st(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,n=t.pageX-e.left,a=t.pageY-e.top;if(this._ownerSVGElement){let c=this._ownerSVGElement.getScreenCTM();if(c){let p=this._ownerSVGElement.createSVGPoint();return p.x=n,p.y=a,p.matrixTransform(c.inverse())}}return{x:n,y:a}}_getConstrainedPointerPosition(i){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:t,y:n}=this.constrainPosition?this.constrainPosition(i,this,this._initialDomRect,this._pickupPositionInElement):i;if(this.lockAxis==="x"||e==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:a,y:c}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,p=this._boundaryRect,{width:g,height:h}=this._getPreviewRect(),y=p.top+c,T=p.bottom-(h-c),k=p.left+a,D=p.right-(g-a);t=On(t,k,D),n=On(n,y,T)}return{x:t,y:n}}_updatePointerDirectionDelta(i){let{x:e,y:t}=i,n=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,c=Math.abs(e-a.x),p=Math.abs(t-a.y);return c>this._config.pointerDirectionChangeThreshold&&(n.x=e>a.x?1:-1,a.x=e),p>this._config.pointerDirectionChangeThreshold&&(n.y=t>a.y?1:-1,a.y=t),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,Xe(this._rootElement,i))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(i=>i()),this._rootElementCleanups=void 0}_applyRootElementTransform(i,e){let t=1/this.scale,n=ct(i*t,e*t),a=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=a.transform&&a.transform!="none"?a.transform:""),a.transform=$t(n,this._initialTransform)}_applyPreviewTransform(i,e){let t=this._previewTemplate?.template?void 0:this._initialTransform,n=ct(i,e);this._preview.setTransform($t(n,t))}_getDragDistance(i){let e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(i===0&&e===0||this.isDragging()||!this._boundaryElement)return;let t=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||t.width===0&&t.height===0)return;let a=n.left-t.left,c=t.right-n.right,p=n.top-t.top,g=t.bottom-n.bottom;n.width>t.width?(a>0&&(i+=a),c>0&&(i-=c)):i=0,n.height>t.height?(p>0&&(e+=p),g>0&&(e-=g)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){let e=this.dragStartDelay;return typeof e=="number"?e:st(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){let e=this._parentPositions.handleScroll(i);if(e){let t=at(i);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&lt(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Bt(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,e){let t=this._previewContainer||"global";if(t==="parent")return i;if(t==="global"){let n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return we(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=i=>{if(this._handles.length){let e=this._getTargetHandle(i);e&&!this._disabledHandles.has(e)&&!this.disabled&&i.preventDefault()}else this.disabled||i.preventDefault()};_getTargetHandle(i){return this._handles.find(e=>i.target&&(i.target===e||e.contains(i.target)))}_conditionallyInsertAnchor(i,e,t){if(i===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(e===this._initialContainer&&e.hasAnchor){let n=this._anchor??=Ti(this._placeholder);n.classList.remove(Nn),n.classList.add("cdk-drag-anchor"),n.style.transform="",t?t.before(n):we(e.element).appendChild(n)}}};function On(o,i,e){return Math.max(i,Math.min(e,o))}function st(o){return o.type[0]==="t"}function ur(o){o.preventDefault()}function Qe(o,i,e){let t=Bn(i,o.length-1),n=Bn(e,o.length-1);if(t===n)return;let a=o[t],c=n<t?-1:1;for(let p=t;p!==n;p+=c)o[p]=o[p+c];o[n]=a}function Bn(o,i){return Math.max(0,Math.min(i,o))}var Ht=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(i){this._dragDropRegistry=i}_previousSwap={drag:null,delta:0,overlaps:!1};start(i){this.withItems(i)}sort(i,e,t,n){let a=this._itemPositions,c=this._getItemIndexFromPointerPosition(i,e,t,n);if(c===-1&&a.length>0)return null;let p=this.orientation==="horizontal",g=a.findIndex(G=>G.drag===i),h=a[c],y=a[g].clientRect,T=h.clientRect,k=g>c?1:-1,D=this._getItemOffsetPx(y,T,k),N=this._getSiblingOffsetPx(g,a,k),L=a.slice();return Qe(a,g,c),a.forEach((G,ge)=>{if(L[ge]===G)return;let he=G.drag===i,_t=he?D:N,J=he?i.getPlaceholderElement():G.drag.getRootElement();G.offset+=_t;let ee=Math.round(G.offset*(1/G.drag.scale));p?(J.style.transform=$t(`translate3d(${ee}px, 0, 0)`,G.initialTransform),lt(G.clientRect,0,_t)):(J.style.transform=$t(`translate3d(0, ${ee}px, 0)`,G.initialTransform),lt(G.clientRect,_t,0))}),this._previousSwap.overlaps=ki(T,e,t),this._previousSwap.drag=h.drag,this._previousSwap.delta=p?n.x:n.y,{previousIndex:g,currentIndex:c}}enter(i,e,t,n){let a=n==null||n<0?this._getItemIndexFromPointerPosition(i,e,t):n,c=this._activeDraggables,p=c.indexOf(i),g=i.getPlaceholderElement(),h=c[a];if(h===i&&(h=c[a+1]),!h&&(a==null||a===-1||a<c.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(h=c[0]),p>-1&&c.splice(p,1),h&&!this._dragDropRegistry.isDragging(h)){let y=h.getRootElement();y.parentElement.insertBefore(g,y),c.splice(a,0,i)}else this._element.appendChild(g),c.push(i);g.style.transform="",this._cacheItemPositions()}withItems(i){this._activeDraggables=i.slice(),this._cacheItemPositions()}withSortPredicate(i){this._sortPredicate=i}reset(){this._activeDraggables?.forEach(i=>{let e=i.getRootElement();if(e){let t=this._itemPositions.find(n=>n.drag===i)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(i){return this._getVisualItemPositions().findIndex(e=>e.drag===i)}getItemAtIndex(i){return this._getVisualItemPositions()[i]?.drag||null}updateOnScroll(i,e){this._itemPositions.forEach(({clientRect:t})=>{lt(t,i,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(i){this._element=i}_cacheItemPositions(){let i=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:Ai(t)}}).sort((e,t)=>i?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(i,e,t){let n=this.orientation==="horizontal",a=n?e.left-i.left:e.top-i.top;return t===-1&&(a+=n?e.width-i.width:e.height-i.height),a}_getSiblingOffsetPx(i,e,t){let n=this.orientation==="horizontal",a=e[i].clientRect,c=e[i+t*-1],p=a[n?"width":"height"]*t;if(c){let g=n?"left":"top",h=n?"right":"bottom";t===-1?p-=c.clientRect[g]-a[h]:p+=a[g]-c.clientRect[h]}return p}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;let t=this._itemPositions,n=this.orientation==="horizontal";if(t[0].drag!==this._activeDraggables[0]){let c=t[t.length-1].clientRect;return n?i>=c.right:e>=c.bottom}else{let c=t[0].clientRect;return n?i<=c.left:e<=c.top}}_getItemIndexFromPointerPosition(i,e,t,n){let a=this.orientation==="horizontal",c=this._itemPositions.findIndex(({drag:p,clientRect:g})=>{if(p===i)return!1;if(n){let h=a?n.x:n.y;if(p===this._previousSwap.drag&&this._previousSwap.overlaps&&h===this._previousSwap.delta)return!1}return a?e>=Math.floor(g.left)&&e<Math.floor(g.right):t>=Math.floor(g.top)&&t<Math.floor(g.bottom)});return c===-1||!this._sortPredicate(c,i)?-1:c}},Fi=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(i,e){this._document=i,this._dragDropRegistry=e}start(i){let e=this._element.childNodes;this._relatedNodes=[];for(let t=0;t<e.length;t++){let n=e[t];this._relatedNodes.push([n,n.nextSibling])}this.withItems(i)}sort(i,e,t,n){let a=this._getItemIndexFromPointerPosition(i,e,t),c=this._previousSwap;if(a===-1||this._activeItems[a]===i)return null;let p=this._activeItems[a];if(c.drag===p&&c.overlaps&&c.deltaX===n.x&&c.deltaY===n.y)return null;let g=this.getItemIndex(i),h=i.getPlaceholderElement(),y=p.getRootElement();a>g?y.after(h):y.before(h),Qe(this._activeItems,g,a);let T=this._getRootNode().elementFromPoint(e,t);return c.deltaX=n.x,c.deltaY=n.y,c.drag=p,c.overlaps=y===T||y.contains(T),{previousIndex:g,currentIndex:a}}enter(i,e,t,n){let a=this._activeItems.indexOf(i);a>-1&&this._activeItems.splice(a,1);let c=n==null||n<0?this._getItemIndexFromPointerPosition(i,e,t):n;c===-1&&(c=this._getClosestItemIndexToPointer(i,e,t));let p=this._activeItems[c];p&&!this._dragDropRegistry.isDragging(p)?(this._activeItems.splice(c,0,i),p.getRootElement().before(i.getPlaceholderElement())):(this._activeItems.push(i),this._element.appendChild(i.getPlaceholderElement()))}withItems(i){this._activeItems=i.slice()}withSortPredicate(i){this._sortPredicate=i}reset(){let i=this._element,e=this._previousSwap;for(let t=this._relatedNodes.length-1;t>-1;t--){let[n,a]=this._relatedNodes[t];n.parentNode===i&&n.nextSibling!==a&&(a===null?i.appendChild(n):a.parentNode===i&&i.insertBefore(n,a))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(i){return this._activeItems.indexOf(i)}getItemAtIndex(i){return this._activeItems[i]||null}updateOnScroll(){this._activeItems.forEach(i=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(i){i!==this._element&&(this._element=i,this._rootNode=void 0)}_getItemIndexFromPointerPosition(i,e,t){let n=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(t)),a=n?this._activeItems.findIndex(c=>{let p=c.getRootElement();return n===p||p.contains(n)}):-1;return a===-1||!this._sortPredicate(a,i)?-1:a}_getRootNode(){return this._rootNode||(this._rootNode=Bt(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(i,e,t){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,a=-1;for(let c=0;c<this._activeItems.length;c++){let p=this._activeItems[c];if(p!==i){let{x:g,y:h}=p.getRootElement().getBoundingClientRect(),y=Math.hypot(e-g,t-h);y<n&&(n=y,a=c)}}return a}},Ln=.05,Gn=.05,ye=(function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o})(ye||{}),ae=(function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o})(ae||{}),Mi=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new Y;entered=new Y;exited=new Y;dropped=new Y;sorted=new Y;receivingStarted=new Y;receivingStopped=new Y;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Be.EMPTY;_verticalScrollDirection=ye.NONE;_horizontalScrollDirection=ae.NONE;_scrollNode;_stopScrollTimers=new Y;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(i,e,t,n,a){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=a;let c=this.element=we(i);this._document=t,this.withOrientation("vertical").withElementContainer(c),e.registerDropContainer(this),this._parentPositions=new zt(t)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,t,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(i)),this._sortStrategy.enter(i,e,t,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,t,n,a,c,p,g={}){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:t,container:this,previousContainer:n,isPointerOverContainer:a,distance:c,dropPoint:p,event:g})}withItems(i){let e=this._draggables;return this._draggables=i,i.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>i.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(i){return this._direction=i,this._sortStrategy instanceof Ht&&(this._sortStrategy.direction=i),this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){if(i==="mixed")this._sortStrategy=new Fi(this._document,this._dragDropRegistry);else{let e=new Ht(this._dragDropRegistry);e.direction=this._direction,e.orientation=i,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,t)=>this.sortPredicate(e,t,this)),this}withScrollableParents(i){let e=this._container;return this._scrollableElements=i.indexOf(e)===-1?[e,...i]:i.slice(),this}withElementContainer(i){if(i===this._container)return this;let e=we(this.element),t=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(i);return t>-1&&this._scrollableElements.splice(t,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(i),this._cachedShadowRoot=null,this._scrollableElements.unshift(i),this._container=i,this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?this._sortStrategy.getItemIndex(i):this._draggables.indexOf(i)}getItemAtIndex(i){return this._isDragging?this._sortStrategy.getItemAtIndex(i):this._draggables[i]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,t,n){if(this.sortingDisabled||!this._domRect||!In(this._domRect,Ln,e,t))return;let a=this._sortStrategy.sort(i,e,t,n);a&&this.sorted.next({previousIndex:a.previousIndex,currentIndex:a.currentIndex,container:this,item:i})}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let t,n=ye.NONE,a=ae.NONE;if(this._parentPositions.positions.forEach((c,p)=>{p===this._document||!c.clientRect||t||In(c.clientRect,Ln,i,e)&&([n,a]=gr(p,c.clientRect,this._direction,i,e),(n||a)&&(t=p))}),!n&&!a){let{width:c,height:p}=this._viewportRuler.getViewportSize(),g={width:c,height:p,top:0,right:c,bottom:p,left:0};n=zn(g,e),a=$n(g,i),t=window}t&&(n!==this._verticalScrollDirection||a!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=a,this._scrollNode=t,(n||a)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let i=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let i=this._container.style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Gi(0,di).pipe(Ue(this._stopScrollTimers)).subscribe(()=>{let i=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===ye.UP?i.scrollBy(0,-e):this._verticalScrollDirection===ye.DOWN&&i.scrollBy(0,e),this._horizontalScrollDirection===ae.LEFT?i.scrollBy(-e,0):this._horizontalScrollDirection===ae.RIGHT&&i.scrollBy(e,0)})};_isOverContainer(i,e){return this._domRect!=null&&ki(this._domRect,i,e)}_getSiblingContainerFromPosition(i,e,t){return this._siblings.find(n=>n._canReceive(i,e,t))}_canReceive(i,e,t){if(!this._domRect||!ki(this._domRect,e,t)||!this.enterPredicate(i,this))return!1;let n=this._getShadowRoot().elementFromPoint(e,t);return n?n===this._container||this._container.contains(n):!1}_startReceiving(i,e){let t=this._activeSiblings;!t.has(i)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(t.add(i),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:i,receiver:this,items:e}))}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:i,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(i);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let i=Bt(this._container);this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let i=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}};function zn(o,i){let{top:e,bottom:t,height:n}=o,a=n*Gn;return i>=e-a&&i<=e+a?ye.UP:i>=t-a&&i<=t+a?ye.DOWN:ye.NONE}function $n(o,i){let{left:e,right:t,width:n}=o,a=n*Gn;return i>=e-a&&i<=e+a?ae.LEFT:i>=t-a&&i<=t+a?ae.RIGHT:ae.NONE}function gr(o,i,e,t,n){let a=zn(i,n),c=$n(i,t),p=ye.NONE,g=ae.NONE;if(a){let h=o.scrollTop;a===ye.UP?h>0&&(p=ye.UP):o.scrollHeight-h>o.clientHeight&&(p=ye.DOWN)}if(c){let h=o.scrollLeft;e==="rtl"?c===ae.RIGHT?h<0&&(g=ae.RIGHT):o.scrollWidth+h>o.clientWidth&&(g=ae.LEFT):c===ae.LEFT?h>0&&(g=ae.LEFT):o.scrollWidth-h>o.clientWidth&&(g=ae.RIGHT)}return[p,g]}var dt={capture:!0},Ei={passive:!1,capture:!0},hr=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=R({type:o,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(t,n){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return o})(),Ni=(()=>{class o{_ngZone=C(je);_document=C(Le);_styleLoader=C(yn);_renderer=C(Je).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new Y;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=w([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new Y;pointerUp=new Y;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Ei)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,t){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(hr),this._activeDragInstances.update(n=>[...n,e]),this._activeDragInstances().length===1)){let n=t.type.startsWith("touch"),a=p=>this.pointerUp.next(p),c=[["scroll",p=>this._scroll.next(p),dt],["selectstart",this._preventDefaultWhileDragging,Ei]];n?c.push(["touchend",a,dt],["touchcancel",a,dt]):c.push(["mouseup",a,dt]),n||c.push(["mousemove",p=>this.pointerMove.next(p),Ei]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=c.map(([p,g,h])=>this._renderer.listen(this._document,p,g,h))})}}stopDragging(e){this._activeDragInstances.update(t=>{let n=t.indexOf(e);return n>-1?(t.splice(n,1),[...t]):t}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let t=[this._scroll];return e&&e!==this._document&&t.push(new et(n=>this._ngZone.runOutsideAngular(()=>{let a=this._renderer.listen(e,"scroll",c=>{this._activeDragInstances().length&&n.next(c)},dt);return()=>{a()}}))),vt(...t)}registerDirectiveNode(e,t){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,t)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),xr={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Ri=(()=>{class o{_document=C(Le);_ngZone=C(je);_viewportRuler=C(Sn);_dragDropRegistry=C(Ni);_renderer=C(Je).createRenderer(null,null);constructor(){}createDrag(e,t=xr){return new Ii(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Mi(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Ut=new Te("CDK_DRAG_PARENT");var Hn=new Te("CdkDragHandle"),Wt=(()=>{class o{element=C(ze);_parentDrag=C(Ut,{optional:!0,skipSelf:!0});_dragDropRegistry=C(Ni);_stateChanges=new Y;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let t=this._dragDropRegistry.getDragDirectiveForNode(e);if(t){this._parentDrag=t,t._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=$e({type:o,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Me]},features:[He([{provide:Hn,useExisting:o}])]})}return o})(),Un=new Te("CDK_DRAG_CONFIG"),Wn=new Te("CdkDropList"),Jt=(()=>{class o{element=C(ze);dropContainer=C(Wn,{optional:!0,skipSelf:!0});_ngZone=C(je);_viewContainerRef=C(gi);_dir=C(Ci,{optional:!0});_changeDetectorRef=C(Dt);_selfHandle=C(Hn,{optional:!0,self:!0});_parentDrag=C(Ut,{optional:!0,skipSelf:!0});_dragDropRegistry=C(Ni);_destroyed=new Y;_handles=new Bi([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new M;released=new M;ended=new M;entered=new M;exited=new M;dropped=new M;moved=new et(e=>{let t=this._dragRef.moved.pipe(ji(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(e);return()=>{t.unsubscribe()}});_injector=C(it);constructor(){let e=this.dropContainer,t=C(Un,{optional:!0}),n=C(Ri);this._dragRef=n.createDrag(this.element,{dragStartThreshold:t&&t.dragStartThreshold!=null?t.dragStartThreshold:5,pointerDirectionChangeThreshold:t&&t.pointerDirectionChangeThreshold!=null?t.pointerDirectionChangeThreshold:5,zIndex:t?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),t&&this._assignDefaults(t),e&&(e.addItem(this),e._dropListRef.beforeStarted.pipe(Ue(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){pi(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let t=this._handles.getValue();t.push(e),this._handles.next(t)}_removeHandle(e){let t=this._handles.getValue(),n=t.indexOf(e);n>-1&&(t.splice(n,1),this._handles.next(t))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,t=e;this.rootElementSelector&&(t=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):we(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let t=this._dir,n=this.dragStartDelay,a=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,c=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof n=="object"&&n?n:Lt(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(c).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(Ct(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let t=this.element.nativeElement.parentElement;for(;t;){let n=this._dragDropRegistry.getDragDirectiveForNode(t);if(n){e.withParent(n._dragRef);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){let{lockAxis:t,dragStartDelay:n,constrainPosition:a,previewClass:c,boundaryElement:p,draggingDisabled:g,rootElementSelector:h,previewContainer:y}=e;this.disabled=g??!1,this.dragStartDelay=n||0,this.lockAxis=t||null,a&&(this.constrainPosition=a),c&&(this.previewClass=c),p&&(this.boundaryElement=p),h&&(this.rootElementSelector=h),y&&(this.previewContainer=y)}_setupHandlesListener(){this._handles.pipe(zi(e=>{let t=e.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),ci(e=>vt(...e.map(t=>t._stateChanges.pipe(St(t))))),Ue(this._destroyed)).subscribe(e=>{let t=this._dragRef,n=e.element.nativeElement;e.disabled?t.disableHandle(n):t.enableHandle(n)})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=$e({type:o,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){t&2&&V("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Me],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",nn]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[He([{provide:Ut,useExisting:o}]),Ge]})}return o})(),Pi=new Te("CdkDropListGroup"),Jn=(()=>{class o{_items=new Set;disabled=!1;ngOnDestroy(){this._items.clear()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=$e({type:o,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:[2,"cdkDropListGroupDisabled","disabled",Me]},exportAs:["cdkDropListGroup"],features:[He([{provide:Pi,useExisting:o}])]})}return o})(),Kt=(()=>{class o{element=C(ze);_changeDetectorRef=C(Dt);_scrollDispatcher=C(Cn);_dir=C(Ci,{optional:!0});_group=C(Pi,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new Y;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=C(Gt).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new M;entered=new M;exited=new M;sorted=new M;_unsortedItems=new Set;constructor(){let e=C(Ri),t=C(Un,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(n,a)=>this.enterPredicate(n.data,a.data),this._dropListRef.sortPredicate=(n,a,c)=>this.sortPredicate(n,a.data,c.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),o._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),e._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let t=this._latestSortedRefs.indexOf(e._dragRef);t>-1&&(this._latestSortedRefs.splice(t,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=o._dropLists.indexOf(this);e>-1&&o._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(St(this._dir.value),Ue(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{let t=En(this.connectedTo).map(n=>{if(typeof n=="string"){let a=o._dropLists.find(c=>c.id===n);return a}return n});if(this._group&&this._group._items.forEach(n=>{t.indexOf(n)===-1&&t.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(a=>a.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(n)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Lt(this.autoScrollStep,2),e.hasAnchor=this.hasAnchor,e.connectedTo(t.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),vt(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:t,draggingDisabled:n,sortingDisabled:a,listAutoScrollDisabled:c,listOrientation:p}=e;this.disabled=n??!1,this.sortingDisabled=a??!1,this.autoScrollDisabled=c??!1,this.orientation=p||"vertical",this.lockAxis=t||null}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=$e({type:o,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,n){t&2&&(se("id",n.id),V("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Me],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Me],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Me],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",Me]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[He([{provide:Pi,useValue:void 0},{provide:Wn,useExisting:o}])]})}return o})();var fr=new Te("CdkDragPlaceholder"),Kn=(()=>{class o{templateRef=C(ui);_drag=C(Ut,{optional:!0});data;constructor(){this._drag?._setPlaceholderTemplate(this)}ngOnDestroy(){this._drag?._resetPlaceholderTemplate(this)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=$e({type:o,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[He([{provide:fr,useExisting:o}])]})}return o})();var Yt=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=Et({type:o});static \u0275inj=wt({providers:[Ri],imports:[wn]})}return o})();var qt=class o{stateService=C(ue);utilityService=C(Z);exportFixedCostsPdf(){let i=this.stateService.getFixedCostsSortedByOrder(),e=this.stateService.getFixedCostGroupsSortedByOrder(),t=this.stateService.accounts(),n=this.stateService.categories(),a=this.stateService.getFixedIncomeTotal(),c=this.stateService.getFixedCostsTotal(),p=this.stateService.getFixedTransferTotal(),g=a-c,h=this.generatePdfHtml(i,e,t,n,a,c,p,g);this.printHtml(h)}generatePdfHtml(i,e,t,n,a,c,p,g){let h=new Date().toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric"}),y=J=>J&&t.find(ee=>ee.id===J)?.name||"-",T=J=>this.stateService.getCategoryFullName(J),k=J=>this.utilityService.formatCurrency(J),D=J=>{switch(J){case"income":return"+";case"expense":return"-";case"transfer":return"\u2194"}},N=J=>{switch(J){case"income":return"#22c55e";case"expense":return"#ef4444";case"transfer":return"#a855f7"}},L=i.filter(J=>!J.groupId&&!J.excludeFromTotal),G=i.filter(J=>J.excludeFromTotal),ge=new Map;e.forEach(J=>{ge.set(J.id,i.filter(ee=>ee.groupId===J.id&&!ee.excludeFromTotal))});let he=(J,ee=!1)=>J.map(X=>`
                <tr class="cost-row${ee?" excluded":""}">
                    <td class="type-cell">
                        <span class="type-badge" style="background: ${N(X.type)}15; color: ${N(X.type)}">
                            ${D(X.type)}
                        </span>
                    </td>
                    <td class="name-cell">
                        <div class="name">${X.name}</div>
                        ${X.note?`<div class="note">${X.note}</div>`:""}
                    </td>
                    <td class="category-cell">${X.type==="transfer"?`${y(X.account)} \u2192 ${y(X.toAccount)}`:T(X.category)}</td>
                    <td class="account-cell">${X.type!=="transfer"?y(X.account):"-"}</td>
                    <td class="amount-cell" style="color: ${N(X.type)}">
                        ${X.type==="income"?"+":X.type==="expense"?"-":""}${k(X.amount)}
                    </td>
                </tr>
            `).join("");return`
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Fixkosten \xDCbersicht</title>
    <style>
        @page {
            size: A4;
            margin: 20mm;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 10pt;
            color: #1f2937;
            line-height: 1.4;
            background: white;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #6366f1;
        }
        
        .header h1 {
            font-size: 20pt;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 4px;
        }
        
        .header .subtitle {
            color: #6b7280;
            font-size: 9pt;
        }
        
        .header .date {
            text-align: right;
            color: #6b7280;
            font-size: 9pt;
        }
        
        /* Summary Cards */
        .summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .summary-card {
            padding: 12px;
            border-radius: 6px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
        }
        
        .summary-card .label {
            font-size: 8pt;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #6b7280;
            margin-bottom: 4px;
        }
        
        .summary-card .value {
            font-size: 14pt;
            font-weight: 700;
        }
        
        .summary-card.income .value { color: #22c55e; }
        .summary-card.expense .value { color: #ef4444; }
        .summary-card.transfer .value { color: #a855f7; }
        .summary-card.net .value { color: ${g>=0?"#22c55e":"#ef4444"}; }
        
        /* Groups */
        .group {
            margin-bottom: 20px;
            page-break-inside: avoid;
        }
        
        .group-header {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 10px 14px;
            border-radius: 6px 6px 0 0;
            font-weight: 600;
            font-size: 11pt;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .group-header.ungrouped {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
        }
        
        .group-header.excluded {
            background: linear-gradient(135deg, #eab308 0%, #f59e0b 100%);
        }
        
        .group-header .count {
            font-weight: 400;
            font-size: 9pt;
            opacity: 0.85;
        }
        
        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border: 1px solid #e5e7eb;
            border-top: none;
            border-radius: 0 0 6px 6px;
            overflow: hidden;
        }
        
        th {
            background: #f3f4f6;
            padding: 8px 10px;
            text-align: left;
            font-size: 8pt;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #6b7280;
            border-bottom: 1px solid #e5e7eb;
        }
        
        td {
            padding: 10px;
            border-bottom: 1px solid #f3f4f6;
            vertical-align: top;
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .type-cell {
            width: 40px;
            text-align: center;
        }
        
        .type-badge {
            display: inline-block;
            width: 24px;
            height: 24px;
            line-height: 24px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 12pt;
            text-align: center;
        }
        
        .name-cell {
            min-width: 150px;
        }
        
        .name-cell .name {
            font-weight: 600;
            color: #1f2937;
        }
        
        .name-cell .note {
            font-size: 8pt;
            color: #6b7280;
            margin-top: 2px;
            font-style: italic;
        }
        
        .category-cell {
            color: #4b5563;
            font-size: 9pt;
        }
        
        .account-cell {
            color: #4b5563;
            font-size: 9pt;
        }
        
        .amount-cell {
            text-align: right;
            font-weight: 700;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 10pt;
            white-space: nowrap;
        }
        
        .cost-row.excluded {
            opacity: 0.6;
        }
        
        /* Group subtotal */
        .group-subtotal {
            background: #f9fafb;
            font-weight: 600;
        }
        
        .group-subtotal td {
            padding: 10px;
            border-top: 2px solid #e5e7eb;
        }
        
        /* Footer */
        .footer {
            margin-top: 30px;
            padding-top: 16px;
            border-top: 1px solid #e5e7eb;
            font-size: 8pt;
            color: #9ca3af;
            text-align: center;
        }
        
        @media print {
            body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div>
            <h1>\u{1F4CB} Fixkosten \xDCbersicht</h1>
            <div class="subtitle">Monatliche feste Einnahmen und Ausgaben</div>
        </div>
        <div class="date">
            Erstellt am ${h}
        </div>
    </div>
    
    <div class="summary">
        <div class="summary-card income">
            <div class="label">Einnahmen</div>
            <div class="value">+${k(a)}</div>
        </div>
        <div class="summary-card expense">
            <div class="label">Ausgaben</div>
            <div class="value">-${k(c)}</div>
        </div>
        <div class="summary-card transfer">
            <div class="label">Transfers</div>
            <div class="value">${k(p)}</div>
        </div>
        <div class="summary-card net">
            <div class="label">Netto</div>
            <div class="value">${g>=0?"+":""}${k(g)}</div>
        </div>
    </div>
    
    ${L.length>0?`
    <div class="group">
        <div class="group-header ungrouped">
            <span>Ohne Gruppe</span>
            <span class="count">${L.length} Eintr\xE4ge</span>
        </div>
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Kategorie</th>
                    <th>Konto</th>
                    <th style="text-align: right">Betrag</th>
                </tr>
            </thead>
            <tbody>
                ${he(L)}
                <tr class="group-subtotal">
                    <td colspan="4">Summe</td>
                    <td class="amount-cell">${k(L.reduce((J,ee)=>ee.type==="income"?J+ee.amount:ee.type==="expense"?J-ee.amount:J,0))}</td>
                </tr>
            </tbody>
        </table>
    </div>
    `:""}
    
    ${e.map(J=>{let ee=ge.get(J.id)||[];if(ee.length===0)return"";let X=ee.reduce((si,bt)=>bt.type==="income"?si+bt.amount:bt.type==="expense"?si-bt.amount:si,0);return`
        <div class="group">
            <div class="group-header">
                <span>\u{1F4C1} ${J.name}</span>
                <span class="count">${ee.length} Eintr\xE4ge</span>
            </div>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Kategorie</th>
                        <th>Konto</th>
                        <th style="text-align: right">Betrag</th>
                    </tr>
                </thead>
                <tbody>
                    ${he(ee)}
                    <tr class="group-subtotal">
                        <td colspan="4">Summe ${J.name}</td>
                        <td class="amount-cell" style="color: ${X>=0?"#22c55e":"#ef4444"}">${X>=0?"+":""}${k(Math.abs(X))}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        `}).join("")}
    
    ${G.length>0?`
    <div class="group">
        <div class="group-header excluded">
            <span>\u26A0\uFE0F Nicht in Summe enthalten</span>
            <span class="count">${G.length} Eintr\xE4ge</span>
        </div>
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th>Name</th>
                    <th>Kategorie</th>
                    <th>Konto</th>
                    <th style="text-align: right">Betrag</th>
                </tr>
            </thead>
            <tbody>
                ${he(G,!0)}
            </tbody>
        </table>
    </div>
    `:""}
    
    <div class="footer">
        Budget App \u2022 Fixkosten Export \u2022 ${h}
    </div>
</body>
</html>
        `}printHtml(i){let e=window.open("","_blank","width=800,height=600");if(!e){alert("Popup wurde blockiert. Bitte erlauben Sie Popups f\xFCr diese Seite.");return}e.document.write(i),e.document.close(),e.onload=()=>{setTimeout(()=>{e.print()},250)}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ee=(o,i)=>i.id;function _r(o,i){o&1&&(r(0,"div",28)(1,"span",29),s(2,"bookmark"),d(),r(3,"p",30),s(4,"Keine Fixkosten definiert."),d(),r(5,"p",31),s(6,'Klicken Sie auf "Neue Fixkosten" um welche hinzuzuf\xFCgen.'),d()())}function br(o,i){o&1&&A(0,"div",54)}function vr(o,i){if(o&1&&s(0),o&2){let e,t=m().$implicit,n=m(3);re(" ",((e=n.getAccountById(t.account))==null?null:e.name)||"?"," \u2192 ",((e=n.getAccountById(t.toAccount))==null?null:e.name)||"?"," ")}}function yr(o,i){if(o&1&&s(0),o&2){let e,t=m().$implicit,n=m(3);re(" ",((e=n.getAccountById(t.account))==null?null:e.name)||"Unbekannt"," \xB7 ",n.getCategoryFullName(t.category)," ")}}function Cr(o,i){o&1&&(r(0,"span",51),s(1,"note"),d())}function Sr(o,i){if(o&1&&(r(0,"option",63),s(1),d()),o&2){let e=i.$implicit,t=m(2).$implicit;_("value",e.id)("selected",e.id===t.category),l(),S(e.name)}}function wr(o,i){if(o&1&&(r(0,"option",63),s(1),d()),o&2){let e=i.$implicit,t=m(2).$implicit;_("value",e.id)("selected",e.id===t.account),l(),S(e.name)}}function Er(o,i){if(o&1&&(r(0,"option",63),s(1),d()),o&2){let e=i.$implicit,t=m(3).$implicit;_("value",e.id)("selected",e.id===t.toAccount),l(),S(e.name)}}function Tr(o,i){if(o&1&&(r(0,"div")(1,"label",57),s(2,"Nach Konto"),d(),r(3,"select",74),O(4,Er,2,3,"option",63,Ee),d()()),o&2){let e=m(2).$implicit,t=m(3);l(3),_("disabled",!t.isEditingInline(e.id)),l(),B(t.accounts)}}function kr(o,i){if(o&1&&(r(0,"option",63),s(1),d()),o&2){let e=i.$implicit,t=m(3).$implicit;_("value",e.id)("selected",e.id===t.groupId),l(),S(e.name)}}function Dr(o,i){if(o&1&&(r(0,"div")(1,"label",57),s(2,"Gruppe"),d(),r(3,"select",75)(4,"option",76),s(5,"Keine Gruppe"),d(),O(6,kr,2,3,"option",63,Ee),d()()),o&2){let e=m(2).$implicit,t=m(3);l(3),_("disabled",!t.isEditingInline(e.id)),l(3),B(t.getSortedGroups())}}function Ir(o,i){if(o&1){let e=P();r(0,"button",77),u("click",function(){x(e);let n=m(2).$implicit,a=m(3);return f(a.toggleInlineEdit(n.id))}),r(1,"span",72),s(2,"edit"),d(),r(3,"span"),s(4,"Bearbeiten"),d()()}}function Fr(o,i){if(o&1){let e=P();r(0,"button",78),u("click",function(){x(e);let n=m(2).$implicit,a=m(3);return f(a.cancelInlineEdit(n.id))}),r(1,"span",72),s(2,"close"),d(),r(3,"span"),s(4,"Abbrechen"),d()(),r(5,"button",79)(6,"span",72),s(7,"save"),d(),r(8,"span"),s(9,"Speichern"),d()()}}function Mr(o,i){if(o&1){let e=P();r(0,"div",55),u("click",function(n){return x(e),f(n.stopPropagation())}),r(1,"form",56),u("submit",function(n){x(e);let a=m().$implicit,c=m(3);return f(c.onInlineFixedCostEdit(n,a.id))}),r(2,"div")(3,"label",57),s(4,"Typ"),d(),r(5,"div",4)(6,"button",58),u("click",function(){x(e);let n=m().$implicit,a=m(3);return f(a.setInlineFixedCostType(n.id,"expense"))}),s(7," Ausgabe "),d(),r(8,"button",58),u("click",function(){x(e);let n=m().$implicit,a=m(3);return f(a.setInlineFixedCostType(n.id,"income"))}),s(9," Einnahme "),d(),r(10,"button",58),u("click",function(){x(e);let n=m().$implicit,a=m(3);return f(a.setInlineFixedCostType(n.id,"transfer"))}),s(11," Transfer "),d()()(),r(12,"div",59)(13,"div")(14,"label",57),s(15,"Name"),d(),A(16,"input",60),d(),r(17,"div")(18,"label",57),s(19,"Betrag (\u20AC)"),d(),A(20,"input",61),d()(),r(21,"div")(22,"label",57),s(23,"Kategorie"),d(),r(24,"select",62),O(25,Sr,2,3,"option",63,Ee),d()(),r(27,"div",64)(28,"div")(29,"label",57),s(30),d(),r(31,"select",65),O(32,wr,2,3,"option",63,Ee),d()(),I(34,Tr,6,1,"div"),d(),I(35,Dr,8,1,"div"),r(36,"div")(37,"label",57),s(38,"Notiz"),d(),r(39,"textarea",66),s(40),d()(),r(41,"div",43),A(42,"input",67),r(43,"label",68),s(44," Nicht in Summe einrechnen "),d()(),r(45,"div",69),I(46,Ir,5,0,"button",70),I(47,Fr,10,0),r(48,"button",71),u("click",function(){x(e);let n=m().$implicit,a=m(3);return f(a.onDeleteFixedCost(n.id))}),r(49,"span",72),s(50,"delete"),d(),r(51,"span"),s(52,"L\xF6schen"),d()(),r(53,"button",73),u("click",function(){x(e);let n=m().$implicit,a=m(3);return f(a.onCreateTransaction(n))}),r(54,"span",72),s(55,"add"),d(),r(56,"span"),s(57,"Buchen"),d()()()()()}if(o&2){let e=m().$implicit,t=m(3);l(6),z(t.getInlineFixedCostType(e.id)==="expense"?"flex-1 bg-red-500/20 text-red-500 border border-red-500 px-3 py-2 rounded-sm text-sm font-medium transition-colors disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(2),z(t.getInlineFixedCostType(e.id)==="income"?"flex-1 bg-green-500/20 text-green-500 border border-green-500 px-3 py-2 rounded-sm text-sm font-medium transition-colors disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(2),z(t.getInlineFixedCostType(e.id)==="transfer"?"flex-1 bg-purple-500/20 text-purple-500 border border-purple-500 px-3 py-2 rounded-sm text-sm font-medium transition-colors disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(6),_("value",e.name)("disabled",!t.isEditingInline(e.id)),l(4),_("value",e.amount)("disabled",!t.isEditingInline(e.id)),l(4),_("disabled",!t.isEditingInline(e.id)),l(),B(t.getSortedCategories()),l(2),V("sm:grid-cols-2",t.getInlineFixedCostType(e.id)==="transfer"),l(3),E(" ",t.getInlineFixedCostType(e.id)==="transfer"?"Von Konto":"Konto"," "),l(),_("disabled",!t.isEditingInline(e.id)),l(),B(t.accounts),l(2),F(t.getInlineFixedCostType(e.id)==="transfer"?34:-1),l(),F(t.groups.length>0?35:-1),l(4),_("disabled",!t.isEditingInline(e.id)),l(),S(e.note||""),l(2),_("id",fi("excludeFromTotal_",e.id))("checked",e.excludeFromTotal)("disabled",!t.isEditingInline(e.id)),l(),_("for",fi("excludeFromTotal_",e.id)),l(3),F(t.isEditingInline(e.id)?-1:46),l(),F(t.isEditingInline(e.id)?47:-1)}}function Pr(o,i){if(o&1){let e=P();r(0,"div",40),j(1,br,1,0,"div",41),r(2,"div",42),u("click",function(){let n=x(e).$implicit,a=m(3);return f(a.toggleExpansion(n.id))}),r(3,"div",43)(4,"div",44),u("click",function(n){return x(e),f(n.stopPropagation())}),r(5,"span",45),s(6,"drag_indicator"),d()(),r(7,"div",46)(8,"span",47),s(9),d()(),r(10,"div",48)(11,"div",49),s(12),d(),r(13,"div",50),I(14,vr,1,2)(15,yr,1,2),d()(),I(16,Cr,2,0,"span",51),r(17,"div",52),s(18),d()()(),I(19,Mr,58,30,"div",53),d()}if(o&2){let e=i.$implicit,t=m(3);_("cdkDragData",e)("cdkDragDisabled",t.expandedFixedCostId()===e.id),l(7),_("ngClass",t.getTypeBgColor(e.type)),l(),_("ngClass",t.getTypeColor(e.type)),l(),S(t.getTypeIcon(e.type)),l(2),_("title",nt(e.name)),l(),S(e.name),l(2),F(e.type==="transfer"?14:15),l(2),F(e.note?16:-1),l(),_("ngClass",t.getTypeColor(e.type)),l(),re(" ",e.type==="income"?"+":e.type==="expense"?"-":"","",t.formatCurrency(e.amount)," "),l(),F(t.expandedFixedCostId()===e.id?19:-1)}}function Ar(o,i){if(o&1){let e=P();r(0,"div",32)(1,"div",35)(2,"div",36)(3,"span",6),s(4,"list"),d(),r(5,"span",37),s(6,"Ohne Gruppe"),d(),r(7,"span",38),s(8),d()()(),r(9,"div",39),u("cdkDropListDropped",function(n){x(e);let a=m(2);return f(a.onDrop(n))}),O(10,Pr,20,14,"div",40,Ee),d()()}if(o&2){let e=m(2);l(8),E("(",e.getFixedCostsByGroup(null).length,")"),l(),_("cdkDropListData",e.getFixedCostsByGroup(null)),l(),B(e.getFixedCostsByGroup(null))}}function Vr(o,i){o&1&&A(0,"div",54)}function Nr(o,i){if(o&1&&s(0),o&2){let e,t=m().$implicit,n=m(4);re(" ",((e=n.getAccountById(t.account))==null?null:e.name)||"?"," \u2192 ",((e=n.getAccountById(t.toAccount))==null?null:e.name)||"?"," ")}}function Rr(o,i){if(o&1&&s(0),o&2){let e,t=m().$implicit,n=m(4);re(" ",((e=n.getAccountById(t.account))==null?null:e.name)||"Unbekannt"," \xB7 ",n.getCategoryFullName(t.category)," ")}}function Or(o,i){o&1&&(r(0,"span",91),s(1,"note"),d())}function Br(o,i){if(o&1&&(r(0,"option",63),s(1),d()),o&2){let e=i.$implicit,t=m(2).$implicit;_("value",e.id)("selected",e.id===t.category),l(),S(e.name)}}function Lr(o,i){if(o&1&&(r(0,"option",63),s(1),d()),o&2){let e=i.$implicit,t=m(2).$implicit;_("value",e.id)("selected",e.id===t.account),l(),S(e.name)}}function jr(o,i){if(o&1&&(r(0,"option",63),s(1),d()),o&2){let e=i.$implicit,t=m(3).$implicit;_("value",e.id)("selected",e.id===t.groupId),l(),S(e.name)}}function Gr(o,i){if(o&1&&(r(0,"div")(1,"label",92),s(2,"Gruppe"),d(),r(3,"select",103)(4,"option",76),s(5,"Keine"),d(),O(6,jr,2,3,"option",63,Ee),d()()),o&2){let e=m(2).$implicit,t=m(4);l(3),_("disabled",!t.isEditingInline(e.id)),l(3),B(t.getSortedGroups())}}function zr(o,i){if(o&1){let e=P();r(0,"button",104),u("click",function(){x(e);let n=m(2).$implicit,a=m(4);return f(a.toggleInlineEdit(n.id))}),r(1,"span",72),s(2,"edit"),d(),s(3,"Bearbeiten"),d()}}function $r(o,i){if(o&1){let e=P();r(0,"button",105),u("click",function(){x(e);let n=m(2).$implicit,a=m(4);return f(a.cancelInlineEdit(n.id))}),r(1,"span",72),s(2,"close"),d(),s(3,"Abbrechen"),d(),r(4,"button",106)(5,"span",72),s(6,"save"),d(),s(7,"Speichern"),d()}}function Hr(o,i){if(o&1){let e=P();r(0,"div",55),u("click",function(n){return x(e),f(n.stopPropagation())}),r(1,"form",56),u("submit",function(n){x(e);let a=m().$implicit,c=m(4);return f(c.onInlineFixedCostEdit(n,a.id))}),r(2,"div")(3,"label",57),s(4,"Typ"),d(),r(5,"div",4)(6,"button",58),u("click",function(){x(e);let n=m().$implicit,a=m(4);return f(a.setInlineFixedCostType(n.id,"expense"))}),s(7,"Ausgabe"),d(),r(8,"button",58),u("click",function(){x(e);let n=m().$implicit,a=m(4);return f(a.setInlineFixedCostType(n.id,"income"))}),s(9,"Einnahme"),d(),r(10,"button",58),u("click",function(){x(e);let n=m().$implicit,a=m(4);return f(a.setInlineFixedCostType(n.id,"transfer"))}),s(11,"Transfer"),d()()(),r(12,"div",59)(13,"div")(14,"label",92),s(15,"Name"),d(),A(16,"input",93),d(),r(17,"div")(18,"label",92),s(19,"Betrag"),d(),A(20,"input",94),d()(),r(21,"div")(22,"label",92),s(23,"Kategorie"),d(),r(24,"select",95),O(25,Br,2,3,"option",63,Ee),d()(),r(27,"div")(28,"label",92),s(29,"Konto"),d(),r(30,"select",96),O(31,Lr,2,3,"option",63,Ee),d()(),I(33,Gr,8,1,"div"),r(34,"div")(35,"label",92),s(36,"Notiz"),d(),r(37,"textarea",97),s(38),d()(),r(39,"div",43),A(40,"input",98),r(41,"label",99),s(42,"Nicht in Summe"),d()(),r(43,"div",69),I(44,zr,4,0,"button",100),I(45,$r,8,0),r(46,"button",101),u("click",function(){x(e);let n=m().$implicit,a=m(4);return f(a.onDeleteFixedCost(n.id))}),r(47,"span",72),s(48,"delete"),d(),s(49,"L\xF6schen"),d(),r(50,"button",102),u("click",function(){x(e);let n=m().$implicit,a=m(4);return f(a.onCreateTransaction(n))}),r(51,"span",72),s(52,"add"),d(),s(53,"Buchen"),d()()()()}if(o&2){let e=m().$implicit,t=m(4);l(6),z(t.getInlineFixedCostType(e.id)==="expense"?"flex-1 bg-red-500/20 text-red-500 border border-red-500 px-3 py-2 rounded-sm text-sm font-medium disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(2),z(t.getInlineFixedCostType(e.id)==="income"?"flex-1 bg-green-500/20 text-green-500 border border-green-500 px-3 py-2 rounded-sm text-sm font-medium disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(2),z(t.getInlineFixedCostType(e.id)==="transfer"?"flex-1 bg-purple-500/20 text-purple-500 border border-purple-500 px-3 py-2 rounded-sm text-sm font-medium disabled:opacity-50":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium border border-dash-border disabled:opacity-50"),_("disabled",!t.isEditingInline(e.id)),l(6),_("value",e.name)("disabled",!t.isEditingInline(e.id)),l(4),_("value",e.amount)("disabled",!t.isEditingInline(e.id)),l(4),_("disabled",!t.isEditingInline(e.id)),l(),B(t.getSortedCategories()),l(5),_("disabled",!t.isEditingInline(e.id)),l(),B(t.accounts),l(2),F(t.groups.length>0?33:-1),l(4),_("disabled",!t.isEditingInline(e.id)),l(),S(e.note||""),l(2),_("checked",e.excludeFromTotal)("disabled",!t.isEditingInline(e.id)),l(4),F(t.isEditingInline(e.id)?-1:44),l(),F(t.isEditingInline(e.id)?45:-1)}}function Ur(o,i){if(o&1){let e=P();r(0,"div",40),j(1,Vr,1,0,"div",41),r(2,"div",42),u("click",function(){let n=x(e).$implicit,a=m(4);return f(a.toggleExpansion(n.id))}),r(3,"div",43)(4,"div",44),u("click",function(n){return x(e),f(n.stopPropagation())}),r(5,"span",45),s(6,"drag_indicator"),d()(),r(7,"div",46)(8,"span",47),s(9),d()(),r(10,"div",48)(11,"div",90),s(12),d(),r(13,"div",50),I(14,Nr,1,2)(15,Rr,1,2),d()(),I(16,Or,2,0,"span",91),r(17,"div",52),s(18),d()()(),I(19,Hr,54,22,"div",53),d()}if(o&2){let e=i.$implicit,t=m(4);_("cdkDragData",e)("cdkDragDisabled",t.expandedFixedCostId()===e.id),l(7),_("ngClass",t.getTypeBgColor(e.type)),l(),_("ngClass",t.getTypeColor(e.type)),l(),S(t.getTypeIcon(e.type)),l(3),S(e.name),l(2),F(e.type==="transfer"?14:15),l(2),F(e.note?16:-1),l(),_("ngClass",t.getTypeColor(e.type)),l(),re(" ",e.type==="income"?"+":e.type==="expense"?"-":"","",t.formatCurrency(e.amount)," "),l(),F(t.expandedFixedCostId()===e.id?19:-1)}}function Wr(o,i){o&1&&(r(0,"div",89),s(1,"Keine Fixkosten in dieser Gruppe"),d())}function Jr(o,i){if(o&1){let e=P();r(0,"div",88),u("cdkDropListDropped",function(n){x(e);let a=m(3);return f(a.onDrop(n))}),O(1,Ur,20,12,"div",40,Ee),I(3,Wr,2,0,"div",89),d()}if(o&2){let e=m().$implicit,t=m(2);_("cdkDropListData",t.getFixedCostsByGroup(e.id)),se("data-group-id",e.id),l(),B(t.getFixedCostsByGroup(e.id)),l(2),F(t.getFixedCostsByGroup(e.id).length===0?3:-1)}}function Kr(o,i){if(o&1){let e=P();r(0,"div",33)(1,"div",80),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.toggleGroupCollapsed(n.id))}),r(2,"div",81)(3,"span",82),s(4,"expand_more"),d(),r(5,"span",83),s(6,"folder"),d(),r(7,"span",37),s(8),d(),r(9,"span",17),s(10),d()(),r(11,"div",84)(12,"button",85),u("click",function(n){let a=x(e).$implicit;return m(2).onEditGroup(a),f(n.stopPropagation())}),r(13,"span",72),s(14,"edit"),d()(),r(15,"button",86),u("click",function(n){let a=x(e).$implicit;return m(2).onDeleteGroup(a.id),f(n.stopPropagation())}),r(16,"span",72),s(17,"delete"),d()()()(),I(18,Jr,4,3,"div",87),d()}if(o&2){let e=i.$implicit,t=m(2);l(3),V("rotate-0",!t.isGroupCollapsed(e.id))("-rotate-90",t.isGroupCollapsed(e.id)),l(5),S(e.name),l(2),E("(",t.getFixedCostsByGroup(e.id).length,")"),l(8),F(t.isGroupCollapsed(e.id)?-1:18)}}function Yr(o,i){o&1&&A(0,"div",54)}function qr(o,i){if(o&1){let e=P();r(0,"div",111),j(1,Yr,1,0,"div",41),r(2,"div",42),u("click",function(){let n=x(e).$implicit,a=m(3);return f(a.toggleExpansion(n.id))}),r(3,"div",43)(4,"div",112),u("click",function(n){return x(e),f(n.stopPropagation())}),r(5,"span",45),s(6,"drag_indicator"),d()(),r(7,"div",46)(8,"span",47),s(9),d()(),r(10,"div",48)(11,"div",90),s(12),d(),r(13,"div",50),s(14),d()(),r(15,"div",113),s(16),d()()()()}if(o&2){let e,t=i.$implicit,n=m(3);_("cdkDragData",t)("cdkDragDisabled",n.expandedFixedCostId()===t.id),l(7),_("ngClass",n.getTypeBgColor(t.type)),l(),_("ngClass",n.getTypeColor(t.type)),l(),S(n.getTypeIcon(t.type)),l(3),S(t.name),l(2),S(((e=n.getAccountById(t.account))==null?null:e.name)||"Unbekannt"),l(),_("ngClass",n.getTypeColor(t.type)),l(),re(" ",t.type==="income"?"+":t.type==="expense"?"-":"","",n.formatCurrency(t.amount)," ")}}function Zr(o,i){if(o&1){let e=P();r(0,"div",34)(1,"div",107)(2,"div",108)(3,"span",6),s(4,"visibility_off"),d(),r(5,"span",37),s(6,"Nicht in Summe"),d(),r(7,"span",38),s(8),d(),r(9,"span",109),s(10),d()()(),r(11,"div",110),u("cdkDropListDropped",function(n){x(e);let a=m(2);return f(a.onDrop(n))}),O(12,qr,17,10,"div",111,Ee),d()()}if(o&2){let e=m(2);l(8),E("(",e.excludedCount,")"),l(2),E("Summe: ",e.formatCurrency(e.Math.abs(e.excludedTotal))),l(),_("cdkDropListData",e.getExcludedFixedCosts()),l(),B(e.getExcludedFixedCosts())}}function Xr(o,i){if(o&1&&(I(0,Ar,12,2,"div",32),O(1,Kr,19,7,"div",33,Ee),I(3,Zr,14,3,"div",34)),o&2){let e=m();F(e.getFixedCostsByGroup(null).length>0?0:-1),l(),B(e.getSortedGroups()),l(2),F(e.getExcludedFixedCosts().length>0?3:-1)}}var mt=class o{utilityService=C(Z);stateService=C(ue);pdfService=C(qt);fixedCosts=[];accounts=[];categories=[];groups=[];fixedIncomeTotal=0;fixedCostsTotal=0;fixedTransferTotal=0;fixedIncomeCount=0;fixedExpenseCount=0;fixedTransferCount=0;excludedTotal=0;excludedCount=0;addFixedCost=new M;editFixedCost=new M;deleteFixedCost=new M;createTransaction=new M;addGroup=new M;editGroup=new M;deleteGroup=new M;reorderFixedCosts=new M;submitFixedCost=new M;expandedFixedCostId=w(null,{});editingFixedCostId=w(null,{});inlineFixedCostTypes=w(new Map,{});Math=Math;formatCurrency(i){return this.utilityService.formatCurrency(i)}getAccountById(i){if(i)return this.accounts.find(e=>e.id===i)}getCategoryFullName(i){return this.stateService.getCategoryFullName(i)}getGroupById(i){return this.groups.find(e=>e.id===i)}getSortedGroups(){return[...this.groups].sort((i,e)=>i.order-e.order)}getSortedCategories(){return[...this.categories].sort((i,e)=>i.name.localeCompare(e.name))}getFixedCostsByGroup(i){return this.fixedCosts.filter(e=>i===null?!e.groupId&&!e.excludeFromTotal:e.groupId===i&&!e.excludeFromTotal).sort((e,t)=>e.order-t.order)}getExcludedFixedCosts(){return this.fixedCosts.filter(i=>i.excludeFromTotal).sort((i,e)=>i.order-e.order)}isGroupCollapsed(i){return this.getGroupById(i)?.collapsed??!1}toggleGroupCollapsed(i){this.stateService.toggleFixedCostGroupCollapsed(i)}toggleExpansion(i){if(this.expandedFixedCostId()===i)this.expandedFixedCostId.set(null),this.editingFixedCostId.set(null);else{this.expandedFixedCostId.set(i);let e=this.fixedCosts.find(t=>t.id===i);if(e){let t=new Map(this.inlineFixedCostTypes());t.set(i,e.type),this.inlineFixedCostTypes.set(t)}}}toggleInlineEdit(i){this.editingFixedCostId.set(this.editingFixedCostId()===i?null:i)}cancelInlineEdit(i){this.editingFixedCostId.set(null);let e=this.fixedCosts.find(t=>t.id===i);if(e){let t=new Map(this.inlineFixedCostTypes());t.set(i,e.type),this.inlineFixedCostTypes.set(t)}}isEditingInline(i){return this.editingFixedCostId()===i}getInlineFixedCostType(i){return this.inlineFixedCostTypes().get(i)||"expense"}setInlineFixedCostType(i,e){let t=new Map(this.inlineFixedCostTypes());t.set(i,e),this.inlineFixedCostTypes.set(t)}onInlineFixedCostEdit(i,e){i.preventDefault();let t=i.target,n=new FormData(t),a=this.getInlineFixedCostType(e);if(!this.fixedCosts.find(g=>g.id===e))return;let p={name:n.get("name"),amount:parseFloat(n.get("amount")),type:a,category:n.get("category"),account:n.get("account"),toAccount:a==="transfer"?n.get("toAccount"):void 0,groupId:n.get("groupId")||void 0,note:n.get("note")||void 0,excludeFromTotal:n.get("excludeFromTotal")==="on"};this.stateService.updateFixedCost(e,p),this.editingFixedCostId.set(null)}onDrop(i){let e=i.item.data,t=i.container;if(i.previousContainer!==t){let a=t.data,c;if(a.length>0)c=a[0].groupId;else{let h=t.element.nativeElement.getAttribute("data-group-id");h==="null"||h===null?c=void 0:c=h}let p=this.fixedCosts.find(g=>g.id===e.id);p&&this.stateService.updateFixedCost(e.id,{name:p.name,amount:p.amount,type:p.type,category:p.category,account:p.account,toAccount:p.toAccount,groupId:c,note:p.note,excludeFromTotal:p.excludeFromTotal})}else if(i.previousIndex!==i.currentIndex){let a=i.container.data;if(!a||a.length===0)return;let c=[...a];Qe(c,i.previousIndex,i.currentIndex);let p=c.map(g=>g.id);this.reorderFixedCosts.emit(p)}}onAddFixedCost(){this.addFixedCost.emit()}onDeleteFixedCost(i){this.deleteFixedCost.emit(i)}onCreateTransaction(i){this.createTransaction.emit(i)}onAddGroup(){this.addGroup.emit()}onEditGroup(i){this.editGroup.emit(i)}onDeleteGroup(i){this.deleteGroup.emit(i)}getTypeIcon(i){switch(i){case"income":return"trending_up";case"expense":return"trending_down";case"transfer":return"swap_horiz"}}getTypeColor(i){switch(i){case"income":return"text-green-500";case"expense":return"text-red-500";case"transfer":return"text-purple-500"}}getTypeBgColor(i){switch(i){case"income":return"bg-green-500/20";case"expense":return"bg-red-500/20";case"transfer":return"bg-purple-500/20"}}exportPdf(){this.pdfService.exportFixedCostsPdf()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-fixed-costs-view"]],inputs:{fixedCosts:"fixedCosts",accounts:"accounts",categories:"categories",groups:"groups",fixedIncomeTotal:"fixedIncomeTotal",fixedCostsTotal:"fixedCostsTotal",fixedTransferTotal:"fixedTransferTotal",fixedIncomeCount:"fixedIncomeCount",fixedExpenseCount:"fixedExpenseCount",fixedTransferCount:"fixedTransferCount",excludedTotal:"excludedTotal",excludedCount:"excludedCount"},outputs:{addFixedCost:"addFixedCost",editFixedCost:"editFixedCost",deleteFixedCost:"deleteFixedCost",createTransaction:"createTransaction",addGroup:"addGroup",editGroup:"editGroup",deleteGroup:"deleteGroup",reorderFixedCosts:"reorderFixedCosts",submitFixedCost:"submitFixedCost"},decls:73,vars:13,consts:[[1,"flex","flex-col","gap-4"],[1,"gradient-card","p-3","md:p-4","rounded-sm"],[1,"flex","flex-col","sm:flex-row","items-stretch","sm:items-center","justify-between","gap-3","md:gap-4"],[1,"text-lg","font-bold","text-dash-text","whitespace-nowrap"],[1,"flex","gap-2"],["title","Als PDF exportieren",1,"bg-dash-bg","hover:bg-dash-card-hover","text-dash-text-dim","hover:text-white","px-3","md:px-4","py-2","rounded-sm","text-sm","font-medium","flex","items-center","justify-center","gap-2","whitespace-nowrap","border","border-dash-border","transition-colors",3,"click"],[1,"material-symbols-sharp","text-lg"],[1,"hidden","sm:inline"],[1,"bg-dash-bg","hover:bg-dash-card-hover","text-dash-text-dim","hover:text-white","px-3","md:px-4","py-2","rounded-sm","text-sm","font-medium","flex","items-center","justify-center","gap-2","whitespace-nowrap","border","border-dash-border","transition-colors",3,"click"],[1,"gradient-btn","text-white","px-3","md:px-4","py-2","rounded-sm","text-sm","font-medium","flex","items-center","justify-center","gap-2","whitespace-nowrap",3,"click"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-3","md:gap-4"],[1,"flex","items-center","gap-2","md:gap-3","mb-2"],[1,"w-8","h-8","md:w-10","md:h-10","rounded-sm","bg-green-500/20","flex","items-center","justify-center"],[1,"material-symbols-sharp","text-green-500","text-lg","md:text-2xl"],[1,"min-w-0"],[1,"text-[10px]","md:text-xs","text-dash-text-dim","uppercase","tracking-wider","truncate"],[1,"text-base","md:text-xl","font-bold","text-green-500"],[1,"text-xs","text-dash-text-dim"],[1,"w-8","h-8","md:w-10","md:h-10","rounded-sm","bg-red-500/20","flex","items-center","justify-center"],[1,"material-symbols-sharp","text-red-500","text-lg","md:text-2xl"],[1,"text-base","md:text-xl","font-bold","text-red-500"],[1,"w-8","h-8","md:w-10","md:h-10","rounded-sm","bg-purple-500/20","flex","items-center","justify-center"],[1,"material-symbols-sharp","text-purple-500","text-lg","md:text-2xl"],[1,"text-base","md:text-xl","font-bold","text-purple-500"],[1,"w-8","h-8","md:w-10","md:h-10","rounded-sm","bg-dash-accent/20","flex","items-center","justify-center"],[1,"material-symbols-sharp","text-dash-accent","text-lg","md:text-2xl"],[1,"text-base","md:text-xl","font-bold"],["cdkDropListGroup","",1,"gradient-card","rounded-sm"],[1,"p-8","text-center"],[1,"material-symbols-sharp","text-4xl","text-dash-text-dim","mb-4","block"],[1,"text-dash-text-dim","text-sm"],[1,"text-dash-text-dim","text-xs","mt-2"],[1,"border-b","border-dash-border"],[1,"border-b","border-dash-border","last:border-b-0"],[1,"border-t-2","border-dash-border"],[1,"p-3","md:p-4","bg-dash-bg/50","border-b","border-dash-border"],[1,"flex","items-center","gap-2","text-dash-text-dim"],[1,"font-medium","text-sm"],[1,"text-xs"],["cdkDropList","","data-group-id","null",1,"min-h-[20px]",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"fixed-cost-item","border-b","border-dash-border","last:border-b-0",3,"cdkDragData","cdkDragDisabled"],["class","fixed-cost-placeholder",4,"cdkDragPlaceholder"],[1,"p-3","md:p-4","hover:bg-dash-card-hover","transition-colors","cursor-pointer",3,"click"],[1,"flex","items-center","gap-3"],["cdkDragHandle","",1,"cursor-grab","active:cursor-grabbing","text-dash-text-dim","hover:text-dash-accent","flex-shrink-0",3,"click"],[1,"material-symbols-sharp","text-xl"],[1,"w-8","h-8","rounded-sm","flex","items-center","justify-center","flex-shrink-0",3,"ngClass"],[1,"material-symbols-sharp","text-base",3,"ngClass"],[1,"flex-1","min-w-0"],[1,"font-medium","text-dash-text","truncate",3,"title"],[1,"text-xs","text-dash-text-dim","truncate"],["title","Hat Notiz",1,"material-symbols-sharp","text-sm","text-dash-text-dim"],[1,"font-mono","font-bold","text-right","whitespace-nowrap",3,"ngClass"],[1,"px-3","md:px-4","pb-3","md:pb-4","border-t","border-dash-border"],[1,"fixed-cost-placeholder"],[1,"px-3","md:px-4","pb-3","md:pb-4","border-t","border-dash-border",3,"click"],[1,"space-y-4","pt-4",3,"submit"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],["type","button",3,"click","disabled"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["type","text","name","name","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"value","disabled"],["type","number","name","amount","step","0.01","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"value","disabled"],["name","category","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[3,"value","selected"],[1,"grid","grid-cols-1","gap-4"],["name","account","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["name","note","rows","2",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed","resize-none",3,"disabled"],["type","checkbox","name","excludeFromTotal",1,"w-4","h-4","bg-dash-bg","border","border-dash-border","rounded","accent-dash-accent","disabled:opacity-50",3,"id","checked","disabled"],[1,"text-sm","text-dash-text-dim","cursor-pointer",3,"for"],[1,"flex","flex-wrap","justify-end","gap-2","pt-2"],["type","button",1,"px-3","py-1.5","bg-dash-bg","hover:bg-dash-border","text-dash-text","text-xs","rounded-sm","border","border-dash-border","transition-colors","flex","items-center","gap-1"],["type","button",1,"px-3","py-1.5","bg-red-500/10","hover:bg-red-500/20","text-red-500","text-xs","rounded-sm","border","border-red-500/30","transition-colors","flex","items-center","gap-1",3,"click"],[1,"material-symbols-sharp","text-sm"],["type","button",1,"px-3","py-1.5","bg-dash-accent/10","hover:bg-dash-accent/20","text-dash-accent","text-xs","rounded-sm","border","border-dash-accent/30","transition-colors","flex","items-center","gap-1",3,"click"],["name","toAccount","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["name","groupId",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["value",""],["type","button",1,"px-3","py-1.5","bg-dash-bg","hover:bg-dash-border","text-dash-text","text-xs","rounded-sm","border","border-dash-border","transition-colors","flex","items-center","gap-1",3,"click"],["type","button",1,"px-3","py-1.5","bg-dash-bg","hover:bg-dash-border","text-dash-text-dim","hover:text-white","text-xs","rounded-sm","border","border-dash-border","transition-colors","flex","items-center","gap-1",3,"click"],["type","submit",1,"px-3","py-1.5","bg-dash-accent","hover:bg-dash-accent-hover","text-white","text-xs","rounded-sm","transition-colors","flex","items-center","gap-1"],[1,"p-3","md:p-4","bg-dash-bg/50","border-b","border-dash-border","flex","items-center","justify-between","cursor-pointer","hover:bg-dash-card-hover","transition-colors",3,"click"],[1,"flex","items-center","gap-2","text-dash-text"],[1,"material-symbols-sharp","text-lg","transition-transform"],[1,"material-symbols-sharp","text-lg","text-dash-accent"],[1,"flex","items-center","gap-2"],[1,"p-1","hover:bg-dash-card","text-dash-text-dim","hover:text-white","rounded-sm","transition-colors",3,"click"],[1,"p-1","hover:bg-red-500/20","text-dash-text-dim","hover:text-red-500","rounded-sm","transition-colors",3,"click"],["cdkDropList","",1,"min-h-[20px]",3,"cdkDropListData"],["cdkDropList","",1,"min-h-[20px]",3,"cdkDropListDropped","cdkDropListData"],[1,"p-4","text-center","text-dash-text-dim","text-sm"],[1,"font-medium","text-dash-text","truncate"],[1,"material-symbols-sharp","text-sm","text-dash-text-dim"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2"],["type","text","name","name","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","disabled:opacity-50",3,"value","disabled"],["type","number","name","amount","step","0.01","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","disabled:opacity-50",3,"value","disabled"],["name","category","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","disabled:opacity-50",3,"disabled"],["name","account","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","disabled:opacity-50",3,"disabled"],["name","note","rows","2",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","disabled:opacity-50","resize-none",3,"disabled"],["type","checkbox","name","excludeFromTotal",1,"w-4","h-4",3,"checked","disabled"],[1,"text-sm","text-dash-text-dim"],["type","button",1,"px-3","py-1.5","bg-dash-bg","hover:bg-dash-border","text-dash-text","text-xs","rounded-sm","border","border-dash-border","flex","items-center","gap-1"],["type","button",1,"px-3","py-1.5","bg-red-500/10","text-red-500","text-xs","rounded-sm","border","border-red-500/30","flex","items-center","gap-1",3,"click"],["type","button",1,"px-3","py-1.5","bg-dash-accent/10","text-dash-accent","text-xs","rounded-sm","border","border-dash-accent/30","flex","items-center","gap-1",3,"click"],["name","groupId",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","py-2","rounded-sm","disabled:opacity-50",3,"disabled"],["type","button",1,"px-3","py-1.5","bg-dash-bg","hover:bg-dash-border","text-dash-text","text-xs","rounded-sm","border","border-dash-border","flex","items-center","gap-1",3,"click"],["type","button",1,"px-3","py-1.5","bg-dash-bg","text-dash-text-dim","text-xs","rounded-sm","border","border-dash-border","flex","items-center","gap-1",3,"click"],["type","submit",1,"px-3","py-1.5","bg-dash-accent","text-white","text-xs","rounded-sm","flex","items-center","gap-1"],[1,"p-3","md:p-4","bg-yellow-500/5","border-b","border-dash-border"],[1,"flex","items-center","gap-2","text-yellow-500"],[1,"ml-auto","text-xs"],["cdkDropList","","data-group-id","excluded",1,"min-h-[20px]",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"fixed-cost-item","opacity-60","border-b","border-dash-border","last:border-b-0",3,"cdkDragData","cdkDragDisabled"],["cdkDragHandle","",1,"cursor-grab","text-dash-text-dim","hover:text-dash-accent","flex-shrink-0",3,"click"],[1,"font-mono","font-bold","whitespace-nowrap",3,"ngClass"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4,"Fixkosten"),d(),r(5,"div",4)(6,"button",5),u("click",function(){return t.exportPdf()}),r(7,"span",6),s(8,"picture_as_pdf"),d(),r(9,"span",7),s(10,"PDF Export"),d()(),r(11,"button",8),u("click",function(){return t.onAddGroup()}),r(12,"span",6),s(13,"folder_open"),d(),r(14,"span",7),s(15,"Neue Gruppe"),d()(),r(16,"button",9),u("click",function(){return t.onAddFixedCost()}),r(17,"span",6),s(18,"add"),d(),r(19,"span"),s(20,"Neue Fixkosten"),d()()()()(),r(21,"div",10)(22,"div",1)(23,"div",11)(24,"div",12)(25,"span",13),s(26,"trending_up"),d()(),r(27,"div",14)(28,"div",15),s(29,"Einnahmen "),d(),r(30,"div",16),s(31),d()()(),r(32,"div",17),s(33),d()(),r(34,"div",1)(35,"div",11)(36,"div",18)(37,"span",19),s(38,"trending_down"),d()(),r(39,"div",14)(40,"div",15),s(41,"Ausgaben "),d(),r(42,"div",20),s(43),d()()(),r(44,"div",17),s(45),d()(),r(46,"div",1)(47,"div",11)(48,"div",21)(49,"span",22),s(50,"swap_horiz"),d()(),r(51,"div",14)(52,"div",15),s(53,"Transfers "),d(),r(54,"div",23),s(55),d()()(),r(56,"div",17),s(57),d()(),r(58,"div",1)(59,"div",11)(60,"div",24)(61,"span",25),s(62,"account_balance"),d()(),r(63,"div",14)(64,"div",15),s(65,"Netto"),d(),r(66,"div",26),s(67),d()()(),r(68,"div",17),s(69,"Differenz"),d()()(),r(70,"div",27),I(71,_r,7,0,"div",28)(72,Xr,4,2),d()()),e&2&&(l(31),E("+",t.formatCurrency(t.fixedIncomeTotal)," "),l(2),E("",t.fixedIncomeCount," Eintr\xE4ge"),l(10),E("-",t.formatCurrency(t.fixedCostsTotal)," "),l(2),E("",t.fixedExpenseCount," Eintr\xE4ge"),l(10),E("",t.formatCurrency(t.fixedTransferTotal)," "),l(2),E("",t.fixedTransferCount," Eintr\xE4ge"),l(9),V("text-green-500",t.fixedIncomeTotal-t.fixedCostsTotal>=0)("text-red-500",t.fixedIncomeTotal-t.fixedCostsTotal<0),l(),re(" ",t.fixedIncomeTotal-t.fixedCostsTotal>=0?"+":"","",t.formatCurrency(t.fixedIncomeTotal-t.fixedCostsTotal)," "),l(4),F(t.fixedCosts.length===0?71:72))},dependencies:[$,rn,q,pe,Ve,Ne,ce,me,Yt,Kt,Jn,Jt,Wt,Kn],encapsulation:2})};function Qr(o,i){if(o&1&&(b(0,"div",9),s(1),v()),o&2){let e=m().$implicit;l(),E(" ",e.value," ")}}function ea(o,i){o&1&&oe(0,"div",12)}function ta(o,i){if(o&1&&(b(0,"div",11),s(1),I(2,ea,1,0,"div",12),v()),o&2){let e=m().$implicit;V("text-dash-text-dim",!e.hasEntry&&!e.isToday)("bg-dash-card-hover",e.hasEntry)("text-white",e.hasEntry)("border",e.isToday)("border-dash-accent",e.isToday)("text-dash-accent",e.isToday),l(),E(" ",(e.value==null?null:e.value.getDate())||""," "),l(),F(e.hasEntry?2:-1)}}function ia(o,i){if(o&1&&I(0,Qr,2,1,"div",9)(1,ta,3,14,"div",10),o&2){let e=i.$implicit;F(e.type==="week"?0:1)}}var Zt=class o{transactions=[];monthChange=new M;currentDate=w(new Date,{});ngOnChanges(i){}days=de(()=>{let i=this.currentDate(),e=i.getFullYear(),t=i.getMonth(),n=new Date(e,t,1),c=new Date(e,t+1,0).getDate(),p=n.getDay(),g=p===0?6:p-1,h=[],y=D=>{let N=new Date(Date.UTC(D.getFullYear(),D.getMonth(),D.getDate())),L=N.getUTCDay()||7;N.setUTCDate(N.getUTCDate()+4-L);let G=new Date(Date.UTC(N.getUTCFullYear(),0,1));return Math.ceil(((N.getTime()-G.getTime())/864e5+1)/7)},T=0,k=new Date(e,t,1-g);h.push({type:"week",value:y(k)});for(let D=0;D<g;D++)h.push({type:"day",value:null,hasEntry:!1,isToday:!1}),T++;for(let D=1;D<=c;D++){if(T===7){T=0;let ge=new Date(e,t,D);h.push({type:"week",value:y(ge)})}let N=new Date(e,t,D),L=this.hasTransactionOnDate(N),G=this.isSameDay(N,new Date);h.push({type:"day",value:N,hasEntry:L,isToday:G}),T++}for(;T<7;)h.push({type:"day",value:null,hasEntry:!1,isToday:!1}),T++;return h},{});monthName=de(()=>this.currentDate().toLocaleString("default",{month:"long",year:"numeric"}),{});prevMonth(){let i=new Date(this.currentDate());i.setMonth(i.getMonth()-1),this.currentDate.set(i),this.monthChange.emit(i)}nextMonth(){let i=new Date(this.currentDate());i.setMonth(i.getMonth()+1),this.currentDate.set(i),this.monthChange.emit(i)}goToToday(){let i=new Date;this.currentDate.set(i),this.monthChange.emit(i)}hasTransactionOnDate(i){return this.transactions.some(e=>{let t=new Date(e.date);return this.isSameDay(t,i)})}isSameDay(i,e){return i.getFullYear()===e.getFullYear()&&i.getMonth()===e.getMonth()&&i.getDate()===e.getDate()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-budget-calendar"]],inputs:{transactions:"transactions"},outputs:{monthChange:"monthChange"},features:[Ge],decls:34,vars:3,consts:[[1,"h-full","flex","flex-col","bg-dash-card","border","border-dash-border","p-4","rounded-sm"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-dash-text-dim","hover:text-white","transition-colors","p-1","flex","items-center","justify-center",3,"click"],[1,"material-symbols-sharp","text-sm"],[1,"flex","items-center","gap-2"],[1,"font-bold","text-sm","tracking-widest"],[1,"text-dash-text-dim","hover:text-dash-accent","transition-colors","px-2","py-0.5","text-[10px]","border","border-dash-border","rounded-sm","hover:border-dash-accent",3,"click"],[1,"grid","grid-cols-8","gap-1","text-center","text-[10px]","text-dash-text-dim","mb-2","font-bold"],[1,"grid","grid-cols-8","gap-1","text-center","text-xs","flex-1"],[1,"aspect-square","flex","items-center","justify-center","text-dash-text-dim","text-[10px]","font-mono","opacity-50"],[1,"aspect-square","flex","items-center","justify-center","rounded-sm","transition-all","duration-200","relative","group",3,"text-dash-text-dim","bg-dash-card-hover","text-white","border","border-dash-accent","text-dash-accent"],[1,"aspect-square","flex","items-center","justify-center","rounded-sm","transition-all","duration-200","relative","group"],[1,"absolute","bottom-1","w-1","h-1","rounded-full","bg-dash-accent"]],template:function(e,t){e&1&&(b(0,"div",0)(1,"div",1)(2,"button",2),Ce("click",function(){return t.prevMonth()}),b(3,"span",3),s(4,"chevron_left"),v()(),b(5,"div",4)(6,"span",5),s(7),Fe(8,"uppercase"),v(),b(9,"button",6),Ce("click",function(){return t.goToToday()}),s(10," TODAY "),v()(),b(11,"button",2),Ce("click",function(){return t.nextMonth()}),b(12,"span",3),s(13,"chevron_right"),v()()(),b(14,"div",7)(15,"span"),s(16,"KW"),v(),b(17,"span"),s(18,"MO"),v(),b(19,"span"),s(20,"TU"),v(),b(21,"span"),s(22,"WE"),v(),b(23,"span"),s(24,"TH"),v(),b(25,"span"),s(26,"FR"),v(),b(27,"span"),s(28,"SA"),v(),b(29,"span"),s(30,"SU"),v()(),b(31,"div",8),O(32,ia,2,1,null,null,Tt),v()()),e&2&&(l(7),S(kt(8,1,t.monthName())),l(25),B(t.days()))},dependencies:[$,It],encapsulation:2})};var na=(o,i)=>i.id;function oa(o,i){if(o&1){let e=P();r(0,"button",13),u("click",function(){let n=x(e).$implicit,a=m();return f(a.onSelectAccount(n.id))}),r(1,"span",18),s(2),d(),r(3,"span",15),s(4),d()()}if(o&2){let e=i.$implicit,t=m();z(t.selectedAccountId===e.id?"w-full flex justify-between items-center p-3 rounded-sm bg-dash-accent text-white transition-colors":"w-full flex justify-between items-center p-3 rounded-sm bg-dash-bg hover:bg-dash-card-hover text-dash-text-dim hover:text-white transition-colors border border-dash-border"),l(2),S(e.name),l(),V("text-green-400",e.balance>0&&t.selectedAccountId!==e.id)("text-red-400",e.balance<0&&t.selectedAccountId!==e.id),l(),E(" ",t.formatCurrency(e.balance)," ")}}function ra(o,i){o&1&&(r(0,"div",19),s(1," Keine Konten erstellt. "),d())}var pt=class o{utilityService=C(Z);stats={balance:0,income:0,expenses:0};accounts=[];transactions=[];selectedAccountId=null;totalBalance=0;selectAccount=new M;monthChange=new M;formatCurrency(i){return this.utilityService.formatCurrency(i)}onSelectAccount(i){this.selectAccount.emit(i)}onMonthChange(i){this.monthChange.emit(i)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-budget-sidebar"]],inputs:{stats:"stats",accounts:"accounts",transactions:"transactions",selectedAccountId:"selectedAccountId",totalBalance:"totalBalance"},outputs:{selectAccount:"selectAccount",monthChange:"monthChange"},decls:34,vars:8,consts:[[1,"flex","flex-col","gap-4"],[1,"gradient-card","p-4","rounded-sm"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","tracking-wider","mb-4"],[1,"space-y-3"],[1,"flex","justify-between","items-center"],[1,"text-dash-text-dim","text-sm"],[1,"font-mono","font-bold","text-dash-text"],[1,"font-mono","font-bold","text-green-500"],[1,"font-mono","font-bold","text-red-500"],[3,"monthChange","transactions"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","tracking-wider"],[1,"space-y-2"],[3,"click"],[1,"text-sm","font-medium"],[1,"font-mono","text-xs"],[3,"class"],["class","text-center py-4 text-dash-text-dim text-sm italic",4,"ngIf"],[1,"text-sm","font-medium","truncate"],[1,"text-center","py-4","text-dash-text-dim","text-sm","italic"]],template:function(e,t){e&1&&(r(0,"aside",0)(1,"div",1)(2,"h3",2),s(3,"\xDCbersicht"),d(),r(4,"div",3)(5,"div",4)(6,"span",5),s(7,"Bilanz"),d(),r(8,"span",6),s(9),d()(),r(10,"div",4)(11,"span",5),s(12,"Einnahmen"),d(),r(13,"span",7),s(14),d()(),r(15,"div",4)(16,"span",5),s(17,"Ausgaben"),d(),r(18,"span",8),s(19),d()()()(),r(20,"app-budget-calendar",9),u("monthChange",function(a){return t.onMonthChange(a)}),d(),r(21,"div",1)(22,"div",10)(23,"h3",11),s(24,"Konten"),d()(),r(25,"div",12)(26,"button",13),u("click",function(){return t.onSelectAccount(null)}),r(27,"span",14),s(28,"Alle Konten"),d(),r(29,"span",15),s(30),d()(),O(31,oa,5,8,"button",16,na),j(33,ra,2,0,"div",17),d()()()),e&2&&(l(9),S(t.formatCurrency(t.stats.balance)),l(5),E("+",t.formatCurrency(t.stats.income)),l(5),E("-",t.formatCurrency(t.stats.expenses)),l(),_("transactions",t.transactions),l(6),z(t.selectedAccountId?"w-full flex justify-between items-center p-3 rounded-sm bg-dash-bg hover:bg-dash-card-hover text-dash-text-dim hover:text-white transition-colors border border-dash-border":"w-full flex justify-between items-center p-3 rounded-sm bg-dash-accent text-white transition-colors"),l(4),S(t.formatCurrency(t.totalBalance)),l(),B(t.accounts),l(2),_("ngIf",t.accounts.length===0))},dependencies:[$,le,Zt],encapsulation:2})};var Oi=(o,i)=>i.id;function aa(o,i){if(o&1&&(r(0,"div",7)(1,"div",25)(2,"span",26),s(3,"info"),d(),r(4,"span"),s(5,"Vorausgef\xFCllt aus Fixkosten: "),r(6,"strong"),s(7),d()()()()),o&2){let e=m();l(7),S(e.prefillFromFixedCost.name)}}function sa(o,i){if(o&1&&(r(0,"option",16),s(1),d()),o&2){let e=i.$implicit;_("value",e.id),l(),S(e.name)}}function da(o,i){if(o&1&&(r(0,"option",16),s(1),d()),o&2){let e=i.$implicit;_("value",e.id),l(),S(e.name)}}function la(o,i){if(o&1&&(r(0,"option",16),s(1),d()),o&2){let e=i.$implicit;_("value",e.id),l(),S(e.name)}}function ca(o,i){if(o&1&&(r(0,"div")(1,"label",9),s(2,"Nach Konto"),d(),r(3,"select",27)(4,"option",15),s(5,"W\xE4hlen"),d(),O(6,la,2,2,"option",16,Oi),d()()),o&2){let e=m();l(3),_("ngModel",e.editingTransaction==null?null:e.editingTransaction.toAccount),l(3),B(e.accounts)}}var ut=class o{utilityService=C(Z);editingTransaction=null;prefillFromFixedCost=null;accounts=[];categories=[];close=new M;submit=new M;currentTransactionType=w("expense",{});ngOnInit(){this.editingTransaction?this.currentTransactionType.set(this.editingTransaction.type):this.prefillFromFixedCost&&this.currentTransactionType.set(this.prefillFromFixedCost.type==="income"?"income":"expense")}setTransactionType(i){this.currentTransactionType.set(i)}getTodayDateString(){return this.utilityService.getTodayDateString()}getSortedCategories(){return[...this.categories].sort((i,e)=>i.name.localeCompare(e.name))}onSubmit(i){i.preventDefault();let e=i.target,t=new FormData(e);this.submit.emit({type:this.currentTransactionType(),amount:parseFloat(t.get("amount")),description:t.get("description"),category:t.get("category"),account:t.get("account"),date:t.get("date"),toAccount:this.currentTransactionType()==="transfer"?t.get("toAccount"):void 0,note:t.get("note")||void 0})}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-transaction-modal"]],inputs:{editingTransaction:"editingTransaction",prefillFromFixedCost:"prefillFromFixedCost",accounts:"accounts",categories:"categories"},outputs:{close:"close",submit:"submit"},decls:60,vars:17,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-md","accent-glow"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"mb-4","p-3","bg-dash-accent/10","border","border-dash-accent/30","rounded-sm"],[1,"space-y-4",3,"submit"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],[1,"flex","gap-2"],["type","button",3,"click"],["type","number","name","amount","step","0.01","required","","placeholder","0,00",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"ngModel"],["type","text","name","description","required","","placeholder","z.B. Einkauf bei Supermarkt",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"ngModel"],["name","category","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"ngModel"],["value",""],[3,"value"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["name","account","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","md:px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"ngModel"],[4,"ngIf"],["type","date","id","transactionDate","name","date","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"value"],["name","note","rows","2","placeholder","Optionale Notiz...",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","resize-none",3,"ngModel"],[1,"flex","gap-2","pt-4"],["type","button",1,"flex-1","bg-dash-bg","hover:bg-dash-card-hover","text-dash-text-dim","hover:text-white","px-4","py-2","rounded-sm","text-sm","font-medium","transition-colors","border","border-dash-border",3,"click"],["type","submit",1,"flex-1","gradient-btn","text-white","px-4","py-2","rounded-sm","text-sm","font-medium"],[1,"flex","items-center","gap-2","text-dash-accent","text-sm"],[1,"material-symbols-sharp","text-lg"],["name","toAccount","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-3","md:px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"ngModel"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),u("click",function(){return t.onClose()}),d(),r(2,"div",2)(3,"div",3)(4,"h2",4),s(5),d(),r(6,"button",5),u("click",function(){return t.onClose()}),r(7,"span",6),s(8,"close"),d()()(),I(9,aa,8,1,"div",7),r(10,"form",8),u("submit",function(a){return t.onSubmit(a)}),r(11,"div")(12,"label",9),s(13,"Typ"),d(),r(14,"div",10)(15,"button",11),u("click",function(){return t.setTransactionType("expense")}),s(16," Ausgabe "),d(),r(17,"button",11),u("click",function(){return t.setTransactionType("income")}),s(18," Einnahme "),d(),r(19,"button",11),u("click",function(){return t.setTransactionType("transfer")}),s(20," Transfer "),d()()(),r(21,"div")(22,"label",9),s(23,"Betrag (\u20AC)"),d(),A(24,"input",12),d(),r(25,"div")(26,"label",9),s(27,"Beschreibung"),d(),A(28,"input",13),d(),r(29,"div")(30,"label",9),s(31,"Kategorie"),d(),r(32,"select",14)(33,"option",15),s(34,"Kategorie w\xE4hlen"),d(),O(35,sa,2,2,"option",16,Oi),d()(),r(37,"div",17)(38,"div")(39,"label",9),s(40),d(),r(41,"select",18)(42,"option",15),s(43,"W\xE4hlen"),d(),O(44,da,2,2,"option",16,Oi),d()(),j(46,ca,8,1,"div",19),d(),r(47,"div")(48,"label",9),s(49,"Datum"),d(),A(50,"input",20),d(),r(51,"div")(52,"label",9),s(53,"Notiz (optional)"),d(),A(54,"textarea",21),d(),r(55,"div",22)(56,"button",23),u("click",function(){return t.onClose()}),s(57," Abbrechen "),d(),r(58,"button",24),s(59),d()()()()()),e&2&&(l(5),E(" ",t.editingTransaction?"Transaktion bearbeiten":t.prefillFromFixedCost?"Fixkosten buchen":"Neue Transaktion"," "),l(4),F(t.prefillFromFixedCost?9:-1),l(6),z(t.currentTransactionType()==="expense"?"flex-1 bg-red-500/20 text-red-500 border border-red-500 px-4 py-2 rounded-sm text-sm font-medium transition-colors":"flex-1 bg-dash-bg text-dash-text-dim px-4 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border"),l(2),z(t.currentTransactionType()==="income"?"flex-1 bg-green-500/20 text-green-500 border border-green-500 px-4 py-2 rounded-sm text-sm font-medium transition-colors":"flex-1 bg-dash-bg text-dash-text-dim px-4 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border"),l(2),z(t.currentTransactionType()==="transfer"?"flex-1 bg-purple-500/20 text-purple-500 border border-purple-500 px-4 py-2 rounded-sm text-sm font-medium transition-colors":"flex-1 bg-dash-bg text-dash-text-dim px-4 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border"),l(5),_("ngModel",(t.editingTransaction==null?null:t.editingTransaction.amount)||(t.prefillFromFixedCost==null?null:t.prefillFromFixedCost.amount)),l(4),_("ngModel",(t.editingTransaction==null?null:t.editingTransaction.description)||(t.prefillFromFixedCost==null?null:t.prefillFromFixedCost.name)),l(4),_("ngModel",(t.editingTransaction==null?null:t.editingTransaction.category)||(t.prefillFromFixedCost==null?null:t.prefillFromFixedCost.category)),l(3),B(t.getSortedCategories()),l(5),E(" ",t.currentTransactionType()==="transfer"?"Von Konto":"Konto"," "),l(),_("ngModel",(t.editingTransaction==null?null:t.editingTransaction.account)||(t.prefillFromFixedCost==null?null:t.prefillFromFixedCost.account)),l(3),B(t.accounts),l(2),_("ngIf",t.currentTransactionType()==="transfer"),l(4),_("value",(t.editingTransaction==null?null:t.editingTransaction.date)||t.getTodayDateString()),l(4),_("ngModel",(t.editingTransaction==null?null:t.editingTransaction.note)||(t.prefillFromFixedCost==null?null:t.prefillFromFixedCost.note)),l(5),E(" ",t.editingTransaction?"Speichern":"Hinzuf\xFCgen"," "))},dependencies:[$,le,q,pe,Ve,Ne,xe,hn,xn,fe,ce,Ft,_e,me],encapsulation:2})};var gt=class o{editingAccount=null;close=new M;submit=new M;onSubmit(i){i.preventDefault();let e=i.target,t=new FormData(e);this.submit.emit({name:t.get("accountName"),balance:parseFloat(t.get("accountBalance"))})}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-account-modal"]],inputs:{editingAccount:"editingAccount"},outputs:{close:"close",submit:"submit"},decls:23,vars:4,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-md","accent-glow"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"space-y-4",3,"submit"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],["type","text","name","accountName","required","","placeholder","z.B. Girokonto",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"value"],["type","number","name","accountBalance","step","0.01","required","","placeholder","0,00",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"value"],[1,"flex","gap-2","pt-4"],["type","button",1,"flex-1","bg-dash-bg","hover:bg-dash-card-hover","text-dash-text-dim","hover:text-white","px-4","py-2","rounded-sm","text-sm","font-medium","transition-colors","border","border-dash-border",3,"click"],["type","submit",1,"flex-1","gradient-btn","text-white","px-4","py-2","rounded-sm","text-sm","font-medium"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),u("click",function(){return t.onClose()}),d(),r(2,"div",2)(3,"div",3)(4,"h2",4),s(5),d(),r(6,"button",5),u("click",function(){return t.onClose()}),r(7,"span",6),s(8,"close"),d()()(),r(9,"form",7),u("submit",function(a){return t.onSubmit(a)}),r(10,"div")(11,"label",8),s(12,"Name"),d(),A(13,"input",9),d(),r(14,"div")(15,"label",8),s(16),d(),A(17,"input",10),d(),r(18,"div",11)(19,"button",12),u("click",function(){return t.onClose()}),s(20," Abbrechen "),d(),r(21,"button",13),s(22," Speichern "),d()()()()()),e&2&&(l(5),E("",t.editingAccount?"Konto bearbeiten":"Neues Konto"," "),l(8),_("value",(t.editingAccount==null?null:t.editingAccount.name)||""),l(3),E(" ",t.editingAccount?"Aktueller Kontostand (\u20AC)":"Startguthaben (\u20AC)"," "),l(),_("value",t.editingAccount==null?null:t.editingAccount.balance))},dependencies:[$,q,pe,ce,me],encapsulation:2})};var ht=class o{editingCategory=null;close=new M;submit=new M;onSubmit(i){i.preventDefault();let e=i.target,t=new FormData(e);this.submit.emit({name:t.get("categoryName"),type:t.get("categoryType")})}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-category-modal"]],inputs:{editingCategory:"editingCategory"},outputs:{close:"close",submit:"submit"},decls:35,vars:5,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-md","accent-glow"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"space-y-4",3,"submit"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],["type","text","name","categoryName","required","","placeholder","z.B. Kleidung",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"value"],[1,"flex","gap-4"],[1,"flex","items-center","gap-2","cursor-pointer"],["type","radio","name","categoryType","value","expense",1,"text-dash-accent","focus:ring-dash-accent","bg-dash-bg","border-dash-border",3,"checked"],[1,"text-sm","text-dash-text"],["type","radio","name","categoryType","value","income",1,"text-dash-accent","focus:ring-dash-accent","bg-dash-bg","border-dash-border",3,"checked"],["type","radio","name","categoryType","value","both",1,"text-dash-accent","focus:ring-dash-accent","bg-dash-bg","border-dash-border",3,"checked"],[1,"flex","gap-2","pt-4"],["type","button",1,"flex-1","bg-dash-bg","hover:bg-dash-card-hover","text-dash-text-dim","hover:text-white","px-4","py-2","rounded-sm","text-sm","font-medium","transition-colors","border","border-dash-border",3,"click"],["type","submit",1,"flex-1","gradient-btn","text-white","px-4","py-2","rounded-sm","text-sm","font-medium"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),u("click",function(){return t.onClose()}),d(),r(2,"div",2)(3,"div",3)(4,"h2",4),s(5),d(),r(6,"button",5),u("click",function(){return t.onClose()}),r(7,"span",6),s(8,"close"),d()()(),r(9,"form",7),u("submit",function(a){return t.onSubmit(a)}),r(10,"div")(11,"label",8),s(12,"Name"),d(),A(13,"input",9),d(),r(14,"div")(15,"label",8),s(16,"Typ"),d(),r(17,"div",10)(18,"label",11),A(19,"input",12),r(20,"span",13),s(21,"Ausgabe"),d()(),r(22,"label",11),A(23,"input",14),r(24,"span",13),s(25,"Einnahme"),d()(),r(26,"label",11),A(27,"input",15),r(28,"span",13),s(29,"Beides"),d()()()(),r(30,"div",16)(31,"button",17),u("click",function(){return t.onClose()}),s(32," Abbrechen "),d(),r(33,"button",18),s(34," Speichern "),d()()()()()),e&2&&(l(5),S(t.editingCategory?"Kategorie bearbeiten":"Neue Kategorie"),l(8),_("value",(t.editingCategory==null?null:t.editingCategory.name)||""),l(6),_("checked",!t.editingCategory||(t.editingCategory==null?null:t.editingCategory.type)==="expense"),l(4),_("checked",(t.editingCategory==null?null:t.editingCategory.type)==="income"),l(4),_("checked",(t.editingCategory==null?null:t.editingCategory.type)==="both"))},dependencies:[$,q,pe,ce,me],encapsulation:2})};var Xt=(o,i)=>i.id;function ma(o,i){if(o&1&&(r(0,"option",15),s(1),d()),o&2){let e=i.$implicit,t=m();_("value",e.id)("selected",(t.editingFixedCost==null?null:t.editingFixedCost.category)===e.id),l(),S(e.name)}}function pa(o,i){if(o&1&&(r(0,"option",15),s(1),d()),o&2){let e=i.$implicit,t=m();_("value",e.id)("selected",(t.editingFixedCost==null?null:t.editingFixedCost.account)===e.id),l(),S(e.name)}}function ua(o,i){if(o&1&&(r(0,"option",15),s(1),d()),o&2){let e=i.$implicit,t=m(2);_("value",e.id)("selected",(t.editingFixedCost==null?null:t.editingFixedCost.toAccount)===e.id),l(),S(e.name)}}function ga(o,i){if(o&1&&(r(0,"div")(1,"label",8),s(2,"Nach Konto"),d(),r(3,"select",25)(4,"option",14),s(5,"Konto w\xE4hlen"),d(),O(6,ua,2,3,"option",15,Xt),d()()),o&2){let e=m();l(6),B(e.accounts)}}function ha(o,i){if(o&1&&(r(0,"option",15),s(1),d()),o&2){let e=i.$implicit,t=m(2);_("value",e.id)("selected",(t.editingFixedCost==null?null:t.editingFixedCost.groupId)===e.id),l(),S(e.name)}}function xa(o,i){if(o&1&&(r(0,"div")(1,"label",8),s(2,"Gruppe (optional)"),d(),r(3,"select",26)(4,"option",14),s(5,"Keine Gruppe"),d(),O(6,ha,2,3,"option",15,Xt),d()()),o&2){let e=m();l(6),B(e.getSortedGroups())}}var xt=class o{stateService=C(ue);editingFixedCost=null;accounts=[];categories=[];groups=[];close=new M;submit=new M;currentType=w("expense",{});ngOnInit(){this.editingFixedCost&&this.currentType.set(this.editingFixedCost.type)}setType(i){this.currentType.set(i)}getSortedCategories(){return[...this.categories].sort((i,e)=>i.name.localeCompare(e.name))}getSortedGroups(){return[...this.groups].sort((i,e)=>i.order-e.order)}onSubmit(i){i.preventDefault();let e=i.target,t=new FormData(e);this.submit.emit({name:t.get("fixedCostName"),amount:parseFloat(t.get("fixedCostAmount")),type:this.currentType(),category:t.get("fixedCostCategory"),account:t.get("fixedCostAccount"),toAccount:this.currentType()==="transfer"?t.get("fixedCostToAccount"):void 0,groupId:t.get("fixedCostGroup")||void 0,note:t.get("fixedCostNote")||void 0,excludeFromTotal:t.get("fixedCostExclude")==="on"})}onClose(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-fixed-cost-modal"]],inputs:{editingFixedCost:"editingFixedCost",accounts:"accounts",categories:"categories",groups:"groups"},outputs:{close:"close",submit:"submit"},decls:61,vars:16,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-md","accent-glow","max-h-[90vh]","overflow-y-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"space-y-4",3,"submit"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],["type","text","name","fixedCostName","required","","placeholder","z.B. Miete, Strom, Netflix",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"value"],["type","number","name","fixedCostAmount","step","0.01","required","","placeholder","0,00",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"value"],[1,"flex","gap-2"],["type","button",3,"click"],["name","fixedCostCategory","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent"],["value",""],[3,"value","selected"],[1,"grid","grid-cols-1","gap-4"],["name","fixedCostAccount","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent"],["name","fixedCostNote","rows","2","placeholder","Optionale Notiz...",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent","resize-none"],[1,"flex","items-center","gap-3"],["type","checkbox","name","fixedCostExclude","id","fixedCostExclude",1,"w-4","h-4","bg-dash-bg","border","border-dash-border","rounded","accent-dash-accent",3,"checked"],["for","fixedCostExclude",1,"text-sm","text-dash-text-dim","cursor-pointer"],[1,"flex","gap-2","pt-4"],["type","button",1,"flex-1","bg-dash-bg","hover:bg-dash-card-hover","text-dash-text-dim","hover:text-white","px-4","py-2","rounded-sm","text-sm","font-medium","transition-colors","border","border-dash-border",3,"click"],["type","submit",1,"flex-1","gradient-btn","text-white","px-4","py-2","rounded-sm","text-sm","font-medium"],["name","fixedCostToAccount","required","",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent"],["name","fixedCostGroup",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),u("click",function(){return t.onClose()}),d(),r(2,"div",2)(3,"div",3)(4,"h2",4),s(5),d(),r(6,"button",5),u("click",function(){return t.onClose()}),r(7,"span",6),s(8,"close"),d()()(),r(9,"form",7),u("submit",function(a){return t.onSubmit(a)}),r(10,"div")(11,"label",8),s(12,"Name"),d(),A(13,"input",9),d(),r(14,"div")(15,"label",8),s(16,"Betrag (\u20AC)"),d(),A(17,"input",10),d(),r(18,"div")(19,"label",8),s(20,"Typ"),d(),r(21,"div",11)(22,"button",12),u("click",function(){return t.setType("expense")}),s(23," Ausgabe "),d(),r(24,"button",12),u("click",function(){return t.setType("income")}),s(25," Einnahme "),d(),r(26,"button",12),u("click",function(){return t.setType("transfer")}),s(27," Transfer "),d()()(),r(28,"div")(29,"label",8),s(30,"Kategorie"),d(),r(31,"select",13)(32,"option",14),s(33,"Kategorie w\xE4hlen"),d(),O(34,ma,2,3,"option",15,Xt),d()(),r(36,"div",16)(37,"div")(38,"label",8),s(39),d(),r(40,"select",17)(41,"option",14),s(42,"Konto w\xE4hlen"),d(),O(43,pa,2,3,"option",15,Xt),d()(),I(45,ga,8,0,"div"),d(),I(46,xa,8,0,"div"),r(47,"div")(48,"label",8),s(49,"Notiz (optional)"),d(),r(50,"textarea",18),s(51),d()(),r(52,"div",19),A(53,"input",20),r(54,"label",21),s(55," Nicht in Summe einrechnen "),d()(),r(56,"div",22)(57,"button",23),u("click",function(){return t.onClose()}),s(58," Abbrechen "),d(),r(59,"button",24),s(60," Speichern "),d()()()()()),e&2&&(l(5),S(t.editingFixedCost?"Fixkosten bearbeiten":"Neue Fixkosten"),l(8),_("value",(t.editingFixedCost==null?null:t.editingFixedCost.name)||""),l(4),_("value",(t.editingFixedCost==null?null:t.editingFixedCost.amount)||""),l(5),z(t.currentType()==="expense"?"flex-1 bg-red-500/20 text-red-500 border border-red-500 px-3 py-2 rounded-sm text-sm font-medium transition-colors":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border hover:border-dash-text-dim"),l(2),z(t.currentType()==="income"?"flex-1 bg-green-500/20 text-green-500 border border-green-500 px-3 py-2 rounded-sm text-sm font-medium transition-colors":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border hover:border-dash-text-dim"),l(2),z(t.currentType()==="transfer"?"flex-1 bg-purple-500/20 text-purple-500 border border-purple-500 px-3 py-2 rounded-sm text-sm font-medium transition-colors":"flex-1 bg-dash-bg text-dash-text-dim px-3 py-2 rounded-sm text-sm font-medium transition-colors border border-dash-border hover:border-dash-text-dim"),l(8),B(t.getSortedCategories()),l(2),V("sm:grid-cols-2",t.currentType()==="transfer"),l(3),E(" ",t.currentType()==="transfer"?"Von Konto":"Konto"," "),l(4),B(t.accounts),l(2),F(t.currentType()==="transfer"?45:-1),l(),F(t.groups.length>0?46:-1),l(5),S((t.editingFixedCost==null?null:t.editingFixedCost.note)||""),l(2),_("checked",t.editingFixedCost==null?null:t.editingFixedCost.excludeFromTotal))},dependencies:[$,q,pe,Ve,Ne,ce,me],encapsulation:2})};function fa(o,i){if(o&1){let e=P();r(0,"div",11)(1,"div",12)(2,"h3",13),s(3,"Daten Import / Export "),d(),r(4,"p",14),s(5,"Importieren oder exportieren Sie Ihre Transaktionen als JSON-Datei."),d(),r(6,"div",15)(7,"button",16),u("click",function(){x(e);let n=m();return f(n.onImportData())}),s(8," JSON Importieren "),d(),r(9,"button",16),u("click",function(){x(e);let n=m();return f(n.onExportData())}),s(10," JSON Exportieren "),d()()(),r(11,"div",17)(12,"h3",18),s(13,"Gefahrenzone"),d(),r(14,"p",14),s(15,"Hier k\xF6nnen Sie alle Ihre Transaktionsdaten unwiderruflich l\xF6schen."),d(),r(16,"button",19),u("click",function(){x(e);let n=m();return f(n.onDeleteAllTransactions())}),s(17," Alle Transaktionen l\xF6schen "),d()()()}}function _a(o,i){if(o&1){let e=P();r(0,"div",26)(1,"div",27)(2,"span",28),s(3),d(),r(4,"span",29),s(5),d()(),r(6,"div",30)(7,"button",31),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.onEditAccount(n))}),s(8," Bearbeiten "),d(),r(9,"button",32),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.onDeleteAccount(n.id))}),s(10," L\xF6schen "),d()()()}if(o&2){let e=i.$implicit,t=m(2);l(3),S(e.name),l(2),S(t.formatCurrency(e.balance))}}function ba(o,i){o&1&&(r(0,"div",33),s(1," Keine Konten erstellt. "),d())}function va(o,i){if(o&1){let e=P();r(0,"div",11)(1,"div",20)(2,"h3",21),s(3,"Konten verwalten"),d(),r(4,"button",22),u("click",function(){x(e);let n=m();return f(n.onAddAccount())}),s(5," Neues Konto "),d()(),r(6,"div",23),j(7,_a,11,2,"div",24)(8,ba,2,0,"div",25),d()()}if(o&2){let e=m();l(7),_("ngForOf",e.accounts),l(),_("ngIf",e.accounts.length===0)}}function ya(o,i){if(o&1){let e=P();r(0,"div",26)(1,"div",34)(2,"div",35)(3,"span",36),s(4),d(),r(5,"span",37),s(6),d()()(),r(7,"div",30)(8,"button",31),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.onEditCategory(n))}),s(9," Bearbeiten "),d(),r(10,"button",32),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.onDeleteCategory(n.id))}),s(11," L\xF6schen "),d()()()}if(o&2){let e=i.$implicit;l(4),S(e.name),l(),V("text-green-500",e.type==="income")("text-red-500",e.type==="expense")("text-dash-text-dim",e.type==="both"),l(),E(" ",e.type==="income"?"Einnahme":e.type==="expense"?"Ausgabe":"Beides"," ")}}function Ca(o,i){o&1&&(r(0,"div",33),s(1," Keine Kategorien erstellt. "),d())}function Sa(o,i){if(o&1){let e=P();r(0,"div",11)(1,"div",20)(2,"h3",21),s(3,"Kategorien verwalten"),d(),r(4,"button",22),u("click",function(){x(e);let n=m();return f(n.onAddCategory())}),s(5," Neue Kategorie "),d()(),r(6,"div",23),j(7,ya,12,8,"div",24)(8,Ca,2,0,"div",25),d()()}if(o&2){let e=m();l(7),_("ngForOf",e.getSortedCategories()),l(),_("ngIf",e.categories.length===0)}}function wa(o,i){if(o&1){let e=P();r(0,"div",41)(1,"div",34)(2,"input",42),u("change",function(){let n=x(e).$implicit,a=m(2);return f(a.toggleGroupSelection(n.id))}),d(),r(3,"span",43),s(4,"drag_indicator"),d(),r(5,"span",36),s(6),d()(),r(7,"div",30)(8,"button",31),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.onEditGroup(n))}),s(9," Bearbeiten "),d(),r(10,"button",32),u("click",function(){let n=x(e).$implicit,a=m(2);return f(a.onDeleteGroup(n.id))}),s(11," L\xF6schen "),d()()()}if(o&2){let e=i.$implicit,t=m(2);V("border-dash-accent",t.isGroupSelected(e.id))("bg-dash-accent/10",t.isGroupSelected(e.id)),l(2),_("checked",t.isGroupSelected(e.id)),l(4),S(e.name)}}function Ea(o,i){o&1&&(r(0,"div",33),s(1," Keine Gruppen erstellt. "),d())}function Ta(o,i){if(o&1){let e=P();r(0,"div",44)(1,"div",15)(2,"button",45),u("click",function(){x(e);let n=m(2);return f(n.onDeleteSelectedGroups())}),s(3),d(),r(4,"button",46),u("click",function(){x(e);let n=m(2);return f(n.onDeleteAllGroups())}),s(5," Alle l\xF6schen "),d()()()}if(o&2){let e=m(2);l(2),V("opacity-50",!e.hasSelectedGroups())("cursor-not-allowed",!e.hasSelectedGroups()),_("disabled",!e.hasSelectedGroups()),l(),E(" Ausgew\xE4hlte l\xF6schen (",e.selectedGroupIds().size,") ")}}function ka(o,i){if(o&1){let e=P();r(0,"div",11)(1,"div",20)(2,"h3",21),s(3,"Gruppen verwalten"),d(),r(4,"button",22),u("click",function(){x(e);let n=m();return f(n.onAddGroup())}),s(5," Neue Gruppe "),d()(),r(6,"div",38),u("cdkDropListDropped",function(n){x(e);let a=m();return f(a.onGroupDrop(n))}),j(7,wa,12,6,"div",39)(8,Ea,2,0,"div",25),d(),j(9,Ta,6,6,"div",40),d()}if(o&2){let e=m();l(7),_("ngForOf",e.getSortedGroups()),l(),_("ngIf",e.groups.length===0),l(),_("ngIf",e.groups.length>0)}}var ft=class o{utilityService=C(Z);accounts=[];categories=[];groups=[];close=new M;importData=new M;exportData=new M;deleteAllTransactions=new M;addAccount=new M;editAccount=new M;deleteAccount=new M;addCategory=new M;editCategory=new M;deleteCategory=new M;addGroup=new M;editGroup=new M;deleteGroup=new M;deleteAllGroups=new M;deleteSelectedGroups=new M;reorderGroups=new M;settingsView=w("main",{});selectedGroupIds=w(new Set,{});formatCurrency(i){return this.utilityService.formatCurrency(i)}getSortedCategories(){return[...this.categories].sort((i,e)=>i.name.localeCompare(e.name))}getSortedGroups(){return[...this.groups].sort((i,e)=>i.order-e.order)}onClose(){this.close.emit()}onImportData(){this.importData.emit()}onExportData(){this.exportData.emit()}onDeleteAllTransactions(){this.deleteAllTransactions.emit()}onAddAccount(){this.addAccount.emit()}onEditAccount(i){this.editAccount.emit(i)}onDeleteAccount(i){this.deleteAccount.emit(i)}onAddCategory(){this.addCategory.emit()}onEditCategory(i){this.editCategory.emit(i)}onDeleteCategory(i){this.deleteCategory.emit(i)}onAddGroup(){this.addGroup.emit()}onEditGroup(i){this.editGroup.emit(i)}onDeleteGroup(i){this.deleteGroup.emit(i)}onDeleteAllGroups(){this.deleteAllGroups.emit(),this.selectedGroupIds.set(new Set)}onDeleteSelectedGroups(){let i=Array.from(this.selectedGroupIds());i.length>0&&(this.deleteSelectedGroups.emit(i),this.selectedGroupIds.set(new Set))}toggleGroupSelection(i){this.selectedGroupIds.update(e=>{let t=new Set(e);return t.has(i)?t.delete(i):t.add(i),t})}isGroupSelected(i){return this.selectedGroupIds().has(i)}hasSelectedGroups(){return this.selectedGroupIds().size>0}onGroupDrop(i){let e=this.getSortedGroups();Qe(e,i.previousIndex,i.currentIndex);let t=e.map(n=>n.id);this.reorderGroups.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-settings-modal"]],inputs:{accounts:"accounts",categories:"categories",groups:"groups"},outputs:{close:"close",importData:"importData",exportData:"exportData",deleteAllTransactions:"deleteAllTransactions",addAccount:"addAccount",editAccount:"editAccount",deleteAccount:"deleteAccount",addCategory:"addCategory",editCategory:"editCategory",deleteCategory:"deleteCategory",addGroup:"addGroup",editGroup:"editGroup",deleteGroup:"deleteGroup",deleteAllGroups:"deleteAllGroups",deleteSelectedGroups:"deleteSelectedGroups",reorderGroups:"reorderGroups"},decls:23,vars:12,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","rounded-sm","shadow-2xl","w-full","max-w-4xl","flex","flex-col","h-[80vh]","overflow-hidden","accent-glow"],[1,"flex","items-center","justify-between","p-6","border-b","border-dash-border","gradient-header"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors","font-bold","px-2",3,"click"],[1,"flex","flex-1","overflow-hidden"],[1,"w-1/3","border-r","border-dash-border","bg-dash-bg/50","p-4","flex","flex-col","gap-2","overflow-y-auto"],[1,"text-left","px-4","py-3","rounded-sm","text-sm","font-medium","transition-colors","flex","items-center","gap-3",3,"click"],[1,"w-2/3","p-6","overflow-y-auto"],["class","flex flex-col gap-6",4,"ngIf"],[1,"flex","flex-col","gap-6"],[1,"flex","flex-col","gap-3"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","tracking-wider"],[1,"text-sm","text-dash-text-dim"],[1,"grid","grid-cols-2","gap-3"],[1,"flex","items-center","justify-center","gap-2","px-4","py-3","bg-dash-bg","border","border-dash-border","hover:border-dash-accent","text-dash-text","rounded-sm","transition-colors","text-sm",3,"click"],[1,"flex","flex-col","gap-3","pt-6","border-t","border-dash-border"],[1,"text-xs","font-bold","text-red-500","uppercase","tracking-wider"],[1,"flex","items-center","justify-center","gap-2","px-4","py-3","bg-red-500/10","border","border-red-500/30","hover:bg-red-500/20","text-red-500","rounded-sm","transition-colors","text-sm","w-full",3,"click"],[1,"flex","justify-between","items-center"],[1,"text-base","font-bold","text-dash-text"],[1,"bg-dash-accent","hover:bg-dash-accent-hover","text-white","px-3","py-1.5","rounded-sm","text-xs","font-medium","transition-colors","flex","items-center","gap-2",3,"click"],[1,"flex","flex-col","gap-2"],["class","flex justify-between items-center bg-dash-bg p-3 rounded-sm border border-dash-border group hover:border-dash-text-dim transition-colors",4,"ngFor","ngForOf"],["class","text-center py-8 text-dash-text-dim text-sm italic",4,"ngIf"],[1,"flex","justify-between","items-center","bg-dash-bg","p-3","rounded-sm","border","border-dash-border","group","hover:border-dash-text-dim","transition-colors"],[1,"flex","flex-col"],[1,"text-sm","font-medium","text-dash-text"],[1,"text-xs","text-dash-text-dim","font-mono"],[1,"flex","gap-1"],["title","Bearbeiten",1,"px-2","py-1","hover:bg-dash-card","text-dash-text-dim","hover:text-white","rounded-sm","transition-colors","text-xs",3,"click"],["title","L\xF6schen",1,"px-2","py-1","hover:bg-red-500/20","text-dash-text-dim","hover:text-red-500","rounded-sm","transition-colors","text-xs",3,"click"],[1,"text-center","py-8","text-dash-text-dim","text-sm","italic"],[1,"flex","items-center","gap-3","flex-1","overflow-hidden"],[1,"flex","flex-col","overflow-hidden"],[1,"text-sm","font-medium","text-dash-text","truncate"],[1,"text-[10px]","uppercase","tracking-wider","font-bold"],["cdkDropList","",1,"flex","flex-col","gap-2",3,"cdkDropListDropped"],["cdkDrag","","class","flex justify-between items-center bg-dash-bg p-3 rounded-sm border border-dash-border group hover:border-dash-text-dim transition-colors cursor-move",3,"border-dash-accent","bg-dash-accent/10",4,"ngFor","ngForOf"],["class","flex flex-col gap-3 pt-4 border-t border-dash-border",4,"ngIf"],["cdkDrag","",1,"flex","justify-between","items-center","bg-dash-bg","p-3","rounded-sm","border","border-dash-border","group","hover:border-dash-text-dim","transition-colors","cursor-move"],["type","checkbox",1,"w-4","h-4","rounded","border-dash-border","bg-dash-bg","text-dash-accent","focus:ring-dash-accent","cursor-pointer",3,"change","checked"],["cdkDragHandle","",1,"material-symbols-sharp","text-dash-text-dim","text-sm","cursor-move"],[1,"flex","flex-col","gap-3","pt-4","border-t","border-dash-border"],[1,"flex","items-center","justify-center","gap-2","px-4","py-3","bg-orange-500/10","border","border-orange-500/30","hover:bg-orange-500/20","text-orange-500","rounded-sm","transition-colors","text-sm",3,"click","disabled"],[1,"flex","items-center","justify-center","gap-2","px-4","py-3","bg-red-500/10","border","border-red-500/30","hover:bg-red-500/20","text-red-500","rounded-sm","transition-colors","text-sm",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),u("click",function(){return t.onClose()}),d(),r(2,"div",2)(3,"div",3)(4,"h2",4),s(5,"Settings"),d(),r(6,"button",5),u("click",function(){return t.onClose()}),s(7," X "),d()(),r(8,"div",6)(9,"div",7)(10,"button",8),u("click",function(){return t.settingsView.set("main")}),s(11," Daten "),d(),r(12,"button",8),u("click",function(){return t.settingsView.set("accounts")}),s(13," Konten "),d(),r(14,"button",8),u("click",function(){return t.settingsView.set("categories")}),s(15," Kategorien "),d(),r(16,"button",8),u("click",function(){return t.settingsView.set("groups")}),s(17," Gruppen "),d()(),r(18,"div",9),j(19,fa,18,0,"div",10)(20,va,9,2,"div",10)(21,Sa,9,2,"div",10)(22,ka,10,3,"div",10),d()()()()),e&2&&(l(10),z(t.settingsView()==="main"?"bg-dash-accent text-white":"hover:bg-dash-card-hover text-dash-text-dim hover:text-white"),l(2),z(t.settingsView()==="accounts"?"bg-dash-accent text-white":"hover:bg-dash-card-hover text-dash-text-dim hover:text-white"),l(2),z(t.settingsView()==="categories"?"bg-dash-accent text-white":"hover:bg-dash-card-hover text-dash-text-dim hover:text-white"),l(2),z(t.settingsView()==="groups"?"bg-dash-accent text-white":"hover:bg-dash-card-hover text-dash-text-dim hover:text-white"),l(3),_("ngIf",t.settingsView()==="main"),l(),_("ngIf",t.settingsView()==="accounts"),l(),_("ngIf",t.settingsView()==="categories"),l(),_("ngIf",t.settingsView()==="groups"))},dependencies:[$,Ke,le,q,Yt,Kt,Jt,Wt],encapsulation:2})};var Qt=class o{editingGroup=null;close=new M;groupSubmit=new M;groupName="";ngOnInit(){this.groupName=this.editingGroup?.name||""}ngOnChanges(i){i.editingGroup&&(this.groupName=this.editingGroup?.name||"")}onSubmit(i){i.preventDefault();let e=i.target,a=new FormData(e).get("groupName")||this.groupName;a&&a.trim()&&(this.groupSubmit.emit({name:a.trim()}),this.groupName="")}onClose(){this.groupName="",this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-fixed-cost-group-modal"]],inputs:{editingGroup:"editingGroup"},outputs:{close:"close",groupSubmit:"groupSubmit"},features:[Ge],decls:19,vars:2,consts:[[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4"],[1,"absolute","inset-0","bg-black/60","backdrop-blur-sm",3,"click"],[1,"relative","gradient-card","p-6","rounded-sm","shadow-2xl","w-full","max-w-sm","accent-glow"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"space-y-4",3,"submit"],[1,"block","text-xs","font-bold","text-dash-text-dim","uppercase","mb-2","tracking-wider"],["type","text","required","","name","groupName","placeholder","z.B. Wohnung, Abonnements, Versicherungen",1,"w-full","bg-dash-bg","border","border-dash-border","text-dash-text","px-4","py-2","rounded-sm","focus:outline-none","focus:border-dash-accent",3,"ngModelChange","ngModel"],[1,"flex","gap-2","pt-4"],["type","button",1,"flex-1","bg-dash-bg","hover:bg-dash-card-hover","text-dash-text-dim","hover:text-white","px-4","py-2","rounded-sm","text-sm","font-medium","transition-colors","border","border-dash-border",3,"click"],["type","submit",1,"flex-1","gradient-btn","text-white","px-4","py-2","rounded-sm","text-sm","font-medium"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1),u("click",function(){return t.onClose()}),d(),r(2,"div",2)(3,"div",3)(4,"h2",4),s(5),d(),r(6,"button",5),u("click",function(){return t.onClose()}),r(7,"span",6),s(8,"close"),d()()(),r(9,"form",7),u("submit",function(a){return t.onSubmit(a)}),r(10,"div")(11,"label",8),s(12,"Gruppenname"),d(),r(13,"input",9),ne("ngModelChange",function(a){return ie(t.groupName,a)||(t.groupName=a),a}),d()(),r(14,"div",10)(15,"button",11),u("click",function(){return t.onClose()}),s(16," Abbrechen "),d(),r(17,"button",12),s(18," Speichern "),d()()()()()),e&2&&(l(5),S(t.editingGroup?"Gruppe bearbeiten":"Neue Gruppe"),l(8),te("ngModel",t.groupName))},dependencies:[$,q,pe,xe,fe,ce,Ft,_e,me],encapsulation:2})};function Da(o,i){if(o&1){let e=P();r(0,"app-settings-modal",28),u("close",function(){x(e);let n=m();return f(n.toggleSettingsModal())})("importData",function(){x(e);let n=m();return f(n.triggerImport())})("exportData",function(){x(e);let n=m();return f(n.triggerExport())})("deleteAllTransactions",function(){x(e);let n=m();return f(n.deleteAllTransactions())})("addAccount",function(){x(e);let n=m();return f(n.toggleAccountModal())})("editAccount",function(n){x(e);let a=m();return f(a.openEditAccountModal(n))})("deleteAccount",function(n){x(e);let a=m();return f(a.deleteAccount(n))})("addCategory",function(){x(e);let n=m();return f(n.toggleCategoryModal())})("editCategory",function(n){x(e);let a=m();return f(a.openEditCategoryModal(n))})("deleteCategory",function(n){x(e);let a=m();return f(a.deleteCategory(n))})("addGroup",function(){x(e);let n=m();return f(n.toggleFixedCostGroupModal())})("editGroup",function(n){x(e);let a=m();return f(a.openEditFixedCostGroupModal(n))})("deleteGroup",function(n){x(e);let a=m();return f(a.deleteFixedCostGroup(n))})("deleteAllGroups",function(){x(e);let n=m();return f(n.deleteAllFixedCostGroups())})("deleteSelectedGroups",function(n){x(e);let a=m();return f(a.deleteSelectedFixedCostGroups(n))})("reorderGroups",function(n){x(e);let a=m();return f(a.reorderFixedCostGroups(n))}),d()}if(o&2){let e=m();_("accounts",e.accounts())("categories",e.categories())("groups",e.getFixedCostGroupsSortedByOrder())}}function Ia(o,i){if(o&1){let e=P();r(0,"app-transactions-view",29),u("addTransaction",function(){x(e);let n=m();return f(n.toggleTransactionModal())})("editTransaction",function(n){x(e);let a=m();return f(a.openEditModal(n))})("deleteTransaction",function(n){x(e);let a=m();return f(a.deleteTransaction(n))})("copyToFixedCost",function(n){x(e);let a=m();return f(a.copyTransactionToFixedCost(n))})("search",function(n){x(e);let a=m();return f(a.stateService.onSearch(n))}),d()}if(o&2){let e=m();_("transactions",e.getSortedTransactions())("accounts",e.accounts())("categories",e.categories())("searchQuery",e.searchQuery())}}function Fa(o,i){if(o&1&&A(0,"app-statistics-view",18),o&2){let e,t=m();_("stats",t.getStats())("categoryStats",t.getCategoryStats())("incomeCategoryStats",t.getIncomeCategoryStats())("dailyTrend",t.getDailyTrend())("topExpenses",t.getTopExpenses())("selectedMonthName",t.getSelectedMonthName())("selectedAccountName",t.selectedAccountId()?((e=t.getAccountById(t.selectedAccountId()))==null?null:e.name)??null:null)("transactionCount",t.getSortedTransactions().length)("incomeTransactionCount",t.getIncomeTransactionCount())("expenseTransactionCount",t.getExpenseTransactionCount())("averageDailyExpense",t.getAverageDailyExpense())("averageDailyIncome",t.getAverageDailyIncome())("largestExpense",t.getLargestExpense())("largestIncome",t.getLargestIncome())("pieChartGradient",t.getPieChartGradient())("incomePieChartGradient",t.getIncomePieChartGradient())("trendPoints",t.getTrendPoints())("trendAreaPoints",t.getTrendAreaPoints())("trendMaxValue",t.getTrendMaxValue())("trendMinValue",t.getTrendMinValue())("zeroLineY",t.getZeroLineY())("daysInSelectedMonth",t.getDaysInSelectedMonth())}}function Ma(o,i){if(o&1){let e=P();r(0,"app-fixed-costs-view",30),u("addFixedCost",function(){x(e);let n=m();return f(n.toggleFixedCostModal())})("editFixedCost",function(n){x(e);let a=m();return f(a.openEditFixedCostModal(n))})("deleteFixedCost",function(n){x(e);let a=m();return f(a.deleteFixedCost(n))})("createTransaction",function(n){x(e);let a=m();return f(a.createTransactionFromFixedCost(n))})("addGroup",function(){x(e);let n=m();return f(n.toggleFixedCostGroupModal())})("editGroup",function(n){x(e);let a=m();return f(a.openEditFixedCostGroupModal(n))})("deleteGroup",function(n){x(e);let a=m();return f(a.deleteFixedCostGroup(n))})("reorderFixedCosts",function(n){x(e);let a=m();return f(a.reorderFixedCosts(n))}),d()}if(o&2){let e=m();_("fixedCosts",e.getFixedCostsSortedByOrder())("accounts",e.accounts())("categories",e.categories())("groups",e.getFixedCostGroupsSortedByOrder())("fixedIncomeTotal",e.getFixedIncomeTotal())("fixedCostsTotal",e.getFixedCostsTotal())("fixedTransferTotal",e.getFixedTransferTotal())("fixedIncomeCount",e.getFixedIncomeCount())("fixedExpenseCount",e.getFixedExpenseCount())("fixedTransferCount",e.getFixedTransferCount())("excludedTotal",e.getExcludedFixedCostsTotal())("excludedCount",e.getExcludedFixedCostsCount())}}function Pa(o,i){if(o&1){let e=P();r(0,"app-transaction-modal",31),u("close",function(){x(e);let n=m();return n.toggleTransactionModal(),n.editingTransaction.set(null),f(n.clearPrefillData())})("submit",function(n){x(e);let a=m();return f(a.onTransactionModalSubmit(n))}),d()}if(o&2){let e=m();_("editingTransaction",e.editingTransaction())("prefillFromFixedCost",e.prefillFromFixedCost())("accounts",e.accounts())("categories",e.categories())}}function Aa(o,i){if(o&1){let e=P();r(0,"app-account-modal",32),u("close",function(){x(e);let n=m();return n.toggleAccountModal(),f(n.editingAccount.set(null))})("submit",function(n){x(e);let a=m();return f(a.onAccountModalSubmit(n))}),d()}if(o&2){let e=m();_("editingAccount",e.editingAccount())}}function Va(o,i){if(o&1){let e=P();r(0,"app-category-modal",33),u("close",function(){x(e);let n=m();return n.toggleCategoryModal(),f(n.editingCategory.set(null))})("submit",function(n){x(e);let a=m();return f(a.onCategoryModalSubmit(n))}),d()}if(o&2){let e=m();_("editingCategory",e.editingCategory())}}function Na(o,i){if(o&1){let e=P();r(0,"app-fixed-cost-modal",34),u("close",function(){x(e);let n=m();return f(n.toggleFixedCostModal())})("submit",function(n){x(e);let a=m();return f(a.onFixedCostModalSubmit(n))}),d()}if(o&2){let e=m();_("editingFixedCost",e.editingFixedCost())("accounts",e.accounts())("categories",e.categories())("groups",e.getFixedCostGroupsSortedByOrder())}}function Ra(o,i){if(o&1){let e=P();r(0,"app-fixed-cost-group-modal",35),u("close",function(){x(e);let n=m();return f(n.toggleFixedCostGroupModal())})("groupSubmit",function(n){x(e);let a=m();return f(a.onFixedCostGroupModalSubmit(n))}),d()}if(o&2){let e=m();_("editingGroup",e.editingFixedCostGroup())}}function Oa(o,i){if(o&1){let e=P();r(0,"div",27)(1,"div",36)(2,"div",37)(3,"span",38),s(4,"check_circle"),d()(),r(5,"div",39),s(6),d(),r(7,"button",40),u("click",function(){x(e);let n=m();return f(n.hideToast())}),r(8,"span",14),s(9,"close"),d()()()()}if(o&2){let e=m();l(6),S(e.toastMessage())}}var ei=class o{themeService=C(Re);sidebarService=C(be);settingsService=C(Oe);router=C(Ae);stateService=C(ue);utilityService=C(Z);statsService=C(Rt);isOnline=w(!0,{});showTransactionModal=w(!1,{});showAccountModal=w(!1,{});showCategoryModal=w(!1,{});showSettingsModal=w(!1,{});showFixedCostModal=w(!1,{});showFixedCostGroupModal=w(!1,{});settingsView=w("main",{});viewMode=w("transactions",{});editingCategory=w(null,{});editingFixedCost=w(null,{});editingTransaction=w(null,{});editingAccount=w(null,{});editingFixedCostGroup=w(null,{});prefillFromFixedCost=w(null,{});currentTransactionType=w("expense",{});expandedTransactionId=w(null,{});inlineEditingTransactionId=w(null,{});inlineTransactionTypes=w(new Map,{});toastMessage=w(null,{});toastTimeout=null;Math=Math;constructor(){window.addEventListener("blur",()=>this.isOnline.set(!1)),window.addEventListener("focus",()=>this.isOnline.set(!0)),this.router.events.subscribe(()=>{this.showSettingsModal()&&this.showSettingsModal.set(!1)});let i=this.settingsService.trigger();Ie(()=>{let e=this.settingsService.trigger();e>i&&(this.showSettingsModal.set(!0),i=e)})}get transactions(){return this.stateService.transactions}get accounts(){return this.stateService.accounts}get categories(){return this.stateService.categories}get fixedCosts(){return this.stateService.fixedCosts}get fixedCostGroups(){return this.stateService.fixedCostGroups}get selectedAccountId(){return this.stateService.selectedAccountId}get searchQuery(){return this.stateService.searchQuery}get selectedMonth(){return this.stateService.selectedMonth}getCategoryById(i){return this.stateService.getCategoryById(i)}getCategoryFullName(i){return this.stateService.getCategoryFullName(i)}getSortedCategories(){return this.stateService.getSortedCategories()}getAccountById(i){return this.stateService.getAccountById(i)}getTotalBalance(){return this.stateService.getTotalBalance()}getFilteredTransactions(){return this.stateService.getFilteredTransactions()}getSortedTransactions(){return this.stateService.getSortedTransactions()}getFixedCosts(){return this.stateService.getFixedCosts()}getFixedCostsSortedByCategory(){return this.stateService.getFixedCostsSortedByCategory()}getFixedCostsTotal(){return this.stateService.getFixedCostsTotal()}getFixedIncomeTotal(){return this.stateService.getFixedIncomeTotal()}getFixedTransferTotal(){return this.stateService.getFixedTransferTotal()}getFixedIncomeCount(){return this.stateService.getFixedIncomeCount()}getFixedExpenseCount(){return this.stateService.getFixedExpenseCount()}getFixedTransferCount(){return this.stateService.getFixedTransferCount()}getExcludedFixedCostsTotal(){return this.stateService.getExcludedFixedCostsTotal()}getExcludedFixedCostsCount(){return this.stateService.getExcludedFixedCostsCount()}getFixedCostsSortedByOrder(){return this.stateService.getFixedCostsSortedByOrder()}getFixedCostGroupsSortedByOrder(){return this.stateService.getFixedCostGroupsSortedByOrder()}formatCurrency(i){return this.utilityService.formatCurrency(i)}formatDate(i){return this.utilityService.formatDate(i)}getTodayDateString(){return this.utilityService.getTodayDateString()}getStats(){return this.statsService.getStats()}getCategoryStats(){return this.statsService.getCategoryStats()}getIncomeCategoryStats(){return this.statsService.getIncomeCategoryStats()}getDailyTrend(){return this.statsService.getDailyTrend()}getPieChartGradient(){return this.statsService.getPieChartGradient()}getIncomePieChartGradient(){return this.statsService.getIncomePieChartGradient()}getTrendPoints(){return this.statsService.getTrendPoints()}getTrendAreaPoints(){return this.statsService.getTrendAreaPoints()}getTrendMaxValue(){return this.statsService.getTrendMaxValue()}getTrendMinValue(){return this.statsService.getTrendMinValue()}getZeroLineY(){return this.statsService.getZeroLineY()}getDaysInSelectedMonth(){return this.statsService.getDaysInSelectedMonth()}getSelectedMonthName(){return this.statsService.getSelectedMonthName()}getIncomeTransactionCount(){return this.statsService.getIncomeTransactionCount()}getExpenseTransactionCount(){return this.statsService.getExpenseTransactionCount()}getTopExpenses(){return this.statsService.getTopExpenses()}getAverageDailyExpense(){return this.statsService.getAverageDailyExpense()}getAverageDailyIncome(){return this.statsService.getAverageDailyIncome()}getLargestExpense(){return this.statsService.getLargestExpense()}getLargestIncome(){return this.statsService.getLargestIncome()}toggleSettingsModal(){this.showSettingsModal.update(i=>!i),this.showSettingsModal()||this.settingsView.set("main")}toggleRightSidebar(){this.sidebarService.toggleRight()}toggleTransactionModal(){this.showTransactionModal.set(!this.showTransactionModal())}toggleAccountModal(){this.showAccountModal.set(!this.showAccountModal())}toggleCategoryModal(){this.showCategoryModal.set(!this.showCategoryModal())}toggleFixedCostModal(){this.showFixedCostModal.set(!this.showFixedCostModal()),this.showFixedCostModal()||this.editingFixedCost.set(null)}toggleViewMode(i){this.viewMode.set(i)}setTransactionType(i){this.currentTransactionType.set(i)}selectAccount(i){this.stateService.selectAccount(i)}openEditAccountModal(i){this.editingAccount.set(i),this.showAccountModal.set(!0)}deleteAccount(i){confirm("M\xF6chten Sie dieses Konto wirklich l\xF6schen?")&&this.stateService.deleteAccount(i)}onAccountSubmit(i){i.preventDefault();let e=i.target,t=new FormData(e),n=t.get("accountName"),a=parseFloat(t.get("accountBalance"));this.editingAccount()?this.stateService.updateAccount(this.editingAccount().id,n,a):this.stateService.addAccount(n,a),this.toggleAccountModal(),this.editingAccount.set(null),e.reset()}openEditCategoryModal(i){this.editingCategory.set(i),this.showCategoryModal.set(!0)}deleteCategory(i){confirm("M\xF6chten Sie diese Kategorie wirklich l\xF6schen?")&&this.stateService.deleteCategory(i)}onCategorySubmit(i){i.preventDefault();let e=i.target,t=new FormData(e),n=t.get("categoryName"),a=t.get("categoryType")||"both";this.editingCategory()?this.stateService.updateCategory(this.editingCategory().id,n,a):this.stateService.addCategory(n,a),this.toggleCategoryModal(),this.editingCategory.set(null),e.reset()}toggleExpansion(i){this.expandedTransactionId()===i?this.expandedTransactionId.set(null):this.expandedTransactionId.set(i)}deleteTransaction(i){confirm("M\xF6chten Sie diese Transaktion wirklich l\xF6schen?")&&this.stateService.deleteTransaction(i)}deleteAllTransactions(){confirm("Sind Sie sicher, dass Sie ALLE Transaktionen l\xF6schen m\xF6chten? Dies kann nicht r\xFCckg\xE4ngig gemacht werden.")&&this.stateService.deleteAllTransactions()}openEditModal(i){this.editingTransaction.set(i),this.currentTransactionType.set(i.type),this.showTransactionModal.set(!0),setTimeout(()=>{let e=document.getElementById("transactionDate");e&&(e.value=i.date)},0)}onTransactionSubmit(i){i.preventDefault();let e=i.target,t=new FormData(e),n=this.currentTransactionType(),a=parseFloat(t.get("amount")),c=t.get("description"),p=t.get("category"),g=t.get("account"),h=t.get("toAccount"),y=t.get("date"),T={type:n,amount:a,description:c,category:p,account:g,toAccount:n==="transfer"?h:void 0,date:y};if(this.editingTransaction()){let k=this.editingTransaction();this.stateService.updateTransaction(k.id,T,k)}else this.stateService.addTransaction(T);this.toggleTransactionModal(),e.reset(),this.editingTransaction.set(null),this.prefillFromFixedCost.set(null),this.setTodayDate()}setTodayDate(){setTimeout(()=>{let i=document.getElementById("transactionDate");i&&(i.value=new Date().toISOString().split("T")[0])},0)}toggleInlineEdit(i){if(this.inlineEditingTransactionId()===i)this.inlineEditingTransactionId.set(null);else{let e=this.stateService.transactions().find(t=>t.id===i);e&&(this.inlineEditingTransactionId.set(i),this.inlineTransactionTypes.update(t=>{let n=new Map(t);return n.set(i,e.type),n}))}}cancelInlineEdit(i){this.inlineEditingTransactionId.set(null),this.inlineTransactionTypes.update(e=>{let t=new Map(e);return t.delete(i),t})}isEditingInline(i){return this.inlineEditingTransactionId()===i}setInlineTransactionType(i,e){this.inlineTransactionTypes.update(t=>{let n=new Map(t);return n.set(i,e),n})}getInlineTransactionType(i){let e=this.stateService.transactions().find(t=>t.id===i);return this.inlineTransactionTypes().get(i)||e?.type||"expense"}onInlineTransactionEdit(i,e){i.preventDefault();let t=i.target,n=new FormData(t),a=this.getInlineTransactionType(e),c=parseFloat(n.get("amount")),p=n.get("description"),g=n.get("category"),h=n.get("account"),y=n.get("toAccount"),T=n.get("date");if(a==="transfer"&&!y){alert("Bei einem Transfer muss ein Zielkonto angegeben werden.");return}let k=this.stateService.transactions().find(N=>N.id===e);if(!k)return;let D={type:a,amount:c,description:p,category:g,account:h,toAccount:a==="transfer"?y:void 0,date:T};this.stateService.updateTransaction(e,D,k),this.cancelInlineEdit(e)}openEditFixedCostModal(i){this.editingFixedCost.set(i),this.showFixedCostModal.set(!0)}deleteFixedCost(i){confirm("M\xF6chten Sie diese Fixkosten wirklich l\xF6schen?")&&this.stateService.deleteFixedCost(i)}onFixedCostSubmit(i){i.preventDefault();let e=i.target,t=new FormData(e),n={name:t.get("fixedCostName"),amount:parseFloat(t.get("fixedCostAmount")),type:t.get("fixedCostType"),category:t.get("fixedCostCategory"),account:t.get("fixedCostAccount"),toAccount:t.get("fixedCostToAccount")||void 0,groupId:t.get("fixedCostGroup")||void 0,note:t.get("fixedCostNote")||void 0,excludeFromTotal:t.get("fixedCostExclude")==="on"};this.editingFixedCost()?this.stateService.updateFixedCost(this.editingFixedCost().id,n):this.stateService.addFixedCost(n),this.toggleFixedCostModal(),e.reset()}createTransactionFromFixedCost(i){this.prefillFromFixedCost.set(i),this.currentTransactionType.set(i.type),this.showTransactionModal.set(!0),setTimeout(()=>{let e=document.getElementById("transactionDate");e&&(e.value=new Date().toISOString().split("T")[0])},0)}clearPrefillData(){this.prefillFromFixedCost.set(null)}copyTransactionToFixedCost(i){this.stateService.copyTransactionToFixedCost(i),alert(`"${i.description}" wurde als Fixkosten gespeichert.`)}onSearch(i){let e=i.target;this.stateService.onSearch(e.value)}onMonthChange(i){this.stateService.onMonthChange(i)}triggerImport(){let i=document.createElement("input");i.type="file",i.accept=".json",i.onchange=e=>{let t=e.target.files[0];t&&this.processImportFile(t)},i.click()}processImportFile(i){let e=new FileReader;e.onload=t=>{let n=t.target.result;this.parseAndImportJSON(n)},e.readAsText(i)}parseAndImportJSON(i){let e;try{e=JSON.parse(i)}catch{alert("Fehler beim Parsen der JSON-Datei. Bitte \xFCberpr\xFCfen Sie das Format.");return}if(e.version===2&&e.transaktionen){let t=this.stateService.importExtendedFormat(e);alert(`Import erfolgreich:
- ${t.transactions} Transaktionen
- ${t.fixedCosts} Fixkosten`)}else if(Array.isArray(e)){let t=this.stateService.importLegacyFormat(e);t>0?alert(`${t} Transaktionen erfolgreich importiert.`):alert("Keine g\xFCltigen Transaktionen in der Datei gefunden.")}else alert("Unbekanntes Dateiformat. Bitte \xFCberpr\xFCfen Sie die JSON-Datei.")}triggerExport(){let i=this.stateService.transactions(),e=this.stateService.fixedCosts();if(i.length===0&&e.length===0){alert("Keine Daten zum Exportieren vorhanden.");return}let t=this.stateService.getExportData(),n=JSON.stringify(t,null,2),a=new Blob([n],{type:"application/json;charset=utf-8;"}),c=document.createElement("a"),p=URL.createObjectURL(a);c.setAttribute("href",p),c.setAttribute("download",`budget_export_${new Date().toISOString().split("T")[0]}.json`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)}onTransactionModalSubmit(i){let e={type:i.type,amount:i.amount,description:i.description,category:i.category,account:i.account,toAccount:i.type==="transfer"?i.toAccount:void 0,date:i.date};if(this.editingTransaction()){let t=this.editingTransaction();this.stateService.updateTransaction(t.id,e,t)}else this.stateService.addTransaction(e);this.toggleTransactionModal(),this.editingTransaction.set(null),this.prefillFromFixedCost.set(null)}onAccountModalSubmit(i){this.editingAccount()?this.stateService.updateAccount(this.editingAccount().id,i.name,i.balance):this.stateService.addAccount(i.name,i.balance),this.toggleAccountModal(),this.editingAccount.set(null)}onCategoryModalSubmit(i){this.editingCategory()?this.stateService.updateCategory(this.editingCategory().id,i.name,i.type):this.stateService.addCategory(i.name,i.type),this.toggleCategoryModal(),this.editingCategory.set(null)}onFixedCostModalSubmit(i){this.editingFixedCost()?this.stateService.updateFixedCost(this.editingFixedCost().id,i):this.stateService.addFixedCost(i),this.toggleFixedCostModal()}toggleFixedCostGroupModal(){this.showFixedCostGroupModal.set(!this.showFixedCostGroupModal()),this.showFixedCostGroupModal()||this.editingFixedCostGroup.set(null)}openEditFixedCostGroupModal(i){this.editingFixedCostGroup.set(i),this.showFixedCostGroupModal.set(!0)}deleteFixedCostGroup(i){confirm("M\xF6chten Sie diese Gruppe wirklich l\xF6schen? Die Fixkosten bleiben erhalten.")&&this.stateService.deleteFixedCostGroup(i)}onFixedCostGroupModalSubmit(i){!!this.editingFixedCostGroup()?(this.stateService.updateFixedCostGroup(this.editingFixedCostGroup().id,i.name),this.showToast(`Gruppe "${i.name}" aktualisiert`)):(this.stateService.addFixedCostGroup(i.name),this.showToast(`Gruppe "${i.name}" erstellt - verschiebe jetzt Fixkosten in die Gruppe`)),this.showFixedCostGroupModal.set(!1),this.editingFixedCostGroup.set(null)}showToast(i){this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastMessage.set(i),this.toastTimeout=setTimeout(()=>{this.toastMessage.set(null)},5e3)}hideToast(){this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastMessage.set(null)}reorderFixedCosts(i){this.stateService.reorderFixedCosts(i)}deleteAllFixedCostGroups(){confirm("M\xF6chten Sie wirklich ALLE Gruppen l\xF6schen? Die Fixkosten bleiben erhalten.")&&(this.stateService.deleteAllFixedCostGroups(),this.showToast("Alle Gruppen gel\xF6scht"))}deleteSelectedFixedCostGroups(i){confirm(`M\xF6chten Sie die ${i.length} ausgew\xE4hlten Gruppen wirklich l\xF6schen?`)&&(this.stateService.deleteSelectedFixedCostGroups(i),this.showToast(`${i.length} Gruppen gel\xF6scht`))}reorderFixedCostGroups(i){this.stateService.reorderFixedCostGroups(i)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-budget-page"]],decls:48,vars:27,consts:[[1,"min-h-screen","text-dash-text","p-4","md:p-8","font-sans","selection:bg-dash-accent","selection:text-white","pb-16"],[1,"max-w-7xl","mx-auto","grid","grid-cols-1","md:grid-cols-12","gap-4"],[1,"md:col-span-12","flex","items-center","justify-between","gradient-header","p-3","md:p-4","rounded-sm","sticky","top-0","z-50","shadow-lg"],[1,"flex","items-center","gap-2","md:gap-4"],[3,"openSettings"],[1,"text-xs","md:text-sm","font-bold","tracking-widest","text-dash-text-dim","uppercase"],[1,"flex","gap-2","md:gap-4","text-xs","font-mono","text-dash-text-dim","items-center"],[1,"flex","items-center","gap-1","md:gap-2","bg-dash-bg","rounded-sm","p-1","border","border-dash-border"],[3,"click"],[1,"material-symbols-sharp","text-sm","align-middle","md:mr-1"],[1,"hidden","md:inline"],[1,"hidden","sm:block"],[1,"text-white"],["title","Rechte Sidebar",1,"w-10","h-10","bg-dash-bg","rounded-sm","flex","items-center","justify-center","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all",3,"click"],[1,"material-symbols-sharp","text-xl"],[3,"accounts","categories","groups"],[1,"md:col-span-8","lg:col-span-9","flex","flex-col","gap-4","order-2","md:order-1"],[3,"transactions","accounts","categories","searchQuery"],[3,"stats","categoryStats","incomeCategoryStats","dailyTrend","topExpenses","selectedMonthName","selectedAccountName","transactionCount","incomeTransactionCount","expenseTransactionCount","averageDailyExpense","averageDailyIncome","largestExpense","largestIncome","pieChartGradient","incomePieChartGradient","trendPoints","trendAreaPoints","trendMaxValue","trendMinValue","zeroLineY","daysInSelectedMonth"],[3,"fixedCosts","accounts","categories","groups","fixedIncomeTotal","fixedCostsTotal","fixedTransferTotal","fixedIncomeCount","fixedExpenseCount","fixedTransferCount","excludedTotal","excludedCount"],[1,"md:col-span-4","lg:col-span-3","flex","flex-col","gap-4","order-1","md:order-2"],[3,"selectAccount","monthChange","stats","accounts","transactions","selectedAccountId","totalBalance"],[3,"editingTransaction","prefillFromFixedCost","accounts","categories"],[3,"editingAccount"],[3,"editingCategory"],[3,"editingFixedCost","accounts","categories","groups"],[3,"editingGroup"],[1,"fixed","bottom-8","left-1/2","-translate-x-1/2","z-50","animate-slide-in-up"],[3,"close","importData","exportData","deleteAllTransactions","addAccount","editAccount","deleteAccount","addCategory","editCategory","deleteCategory","addGroup","editGroup","deleteGroup","deleteAllGroups","deleteSelectedGroups","reorderGroups","accounts","categories","groups"],[3,"addTransaction","editTransaction","deleteTransaction","copyToFixedCost","search","transactions","accounts","categories","searchQuery"],[3,"addFixedCost","editFixedCost","deleteFixedCost","createTransaction","addGroup","editGroup","deleteGroup","reorderFixedCosts","fixedCosts","accounts","categories","groups","fixedIncomeTotal","fixedCostsTotal","fixedTransferTotal","fixedIncomeCount","fixedExpenseCount","fixedTransferCount","excludedTotal","excludedCount"],[3,"close","submit","editingTransaction","prefillFromFixedCost","accounts","categories"],[3,"close","submit","editingAccount"],[3,"close","submit","editingCategory"],[3,"close","submit","editingFixedCost","accounts","categories","groups"],[3,"close","groupSubmit","editingGroup"],[1,"bg-gradient-to-r","from-green-600","to-emerald-500","p-5","rounded-lg","shadow-2xl","border-2","border-green-400/50","flex","items-center","gap-4","max-w-lg",2,"box-shadow","0 0 30px rgba(34, 197, 94, 0.4), 0 10px 40px rgba(0, 0, 0, 0.3)"],[1,"w-12","h-12","rounded-full","bg-white/20","flex","items-center","justify-center","flex-shrink-0","animate-pulse"],[1,"material-symbols-sharp","text-white","text-3xl"],[1,"flex-1","text-base","font-semibold","text-white"],[1,"text-white/70","hover:text-white","transition-colors","flex-shrink-0","hover:scale-110",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3)(4,"app-apps-launcher",4),u("openSettings",function(){return t.toggleSettingsModal()}),d(),r(5,"h1",5),s(6,"Budget"),d()(),r(7,"div",6)(8,"div",7)(9,"button",8),u("click",function(){return t.toggleViewMode("transactions")}),r(10,"span",9),s(11,"receipt_long"),d(),r(12,"span",10),s(13,"Transaktionen"),d()(),r(14,"button",8),u("click",function(){return t.toggleViewMode("statistics")}),r(15,"span",9),s(16,"analytics"),d(),r(17,"span",10),s(18,"Statistik"),d()(),r(19,"button",8),u("click",function(){return t.toggleViewMode("fixedcosts")}),r(20,"span",9),s(21,"bookmark"),d(),r(22,"span",10),s(23,"Fixkosten"),d()()(),r(24,"div",11),s(25,"STATUS "),r(26,"span"),s(27),d()(),r(28,"div",11),s(29,"TRANSACTIONS "),r(30,"span",12),s(31),d()(),r(32,"button",13),u("click",function(){return t.toggleRightSidebar()}),r(33,"span",14),s(34,"menu_open"),d()()()(),I(35,Da,1,3,"app-settings-modal",15),r(36,"main",16),I(37,Ia,1,4,"app-transactions-view",17),I(38,Fa,1,22,"app-statistics-view",18),I(39,Ma,1,12,"app-fixed-costs-view",19),d(),r(40,"aside",20)(41,"app-budget-sidebar",21),u("selectAccount",function(a){return t.selectAccount(a)})("monthChange",function(a){return t.onMonthChange(a)}),d()(),I(42,Pa,1,4,"app-transaction-modal",22),I(43,Aa,1,1,"app-account-modal",23),I(44,Va,1,1,"app-category-modal",24),I(45,Na,1,4,"app-fixed-cost-modal",25),I(46,Ra,1,1,"app-fixed-cost-group-modal",26),I(47,Oa,10,1,"div",27),d()()),e&2&&(l(9),z(t.viewMode()==="transactions"?"px-2 md:px-3 py-1.5 rounded-sm text-xs font-medium transition-colors bg-dash-accent text-white":"px-2 md:px-3 py-1.5 rounded-sm text-xs font-medium transition-colors text-dash-text-dim hover:text-white"),l(5),z(t.viewMode()==="statistics"?"px-2 md:px-3 py-1.5 rounded-sm text-xs font-medium transition-colors bg-dash-accent text-white":"px-2 md:px-3 py-1.5 rounded-sm text-xs font-medium transition-colors text-dash-text-dim hover:text-white"),l(5),z(t.viewMode()==="fixedcosts"?"px-2 md:px-3 py-1.5 rounded-sm text-xs font-medium transition-colors bg-dash-accent text-white":"px-2 md:px-3 py-1.5 rounded-sm text-xs font-medium transition-colors text-dash-text-dim hover:text-white"),l(7),V("text-dash-accent",t.isOnline())("text-red-500",!t.isOnline()),l(),E(" ",t.isOnline()?"ONLINE":"OFFLINE"," "),l(4),S(t.transactions().length),l(4),F(t.showSettingsModal()?35:-1),l(2),F(t.viewMode()==="transactions"?37:-1),l(),F(t.viewMode()==="statistics"?38:-1),l(),F(t.viewMode()==="fixedcosts"?39:-1),l(2),_("stats",t.getStats())("accounts",t.accounts())("transactions",t.transactions())("selectedAccountId",t.selectedAccountId())("totalBalance",t.getTotalBalance()),l(),F(t.showTransactionModal()?42:-1),l(),F(t.showAccountModal()?43:-1),l(),F(t.showCategoryModal()?44:-1),l(),F(t.showFixedCostModal()?45:-1),l(),F(t.showFixedCostGroupModal()?46:-1),l(),F(t.toastMessage()?47:-1))},dependencies:[$,q,qe,ot,rt,mt,pt,ut,gt,ht,xt,ft,Qt],encapsulation:2})};var qn=[{path:"",component:Mt},{path:"journal",component:Nt},{path:"budget",component:ei},{path:"manga-builder",loadComponent:()=>import("./chunk-5WQPPLHJ.js").then(o=>o.MangaBuilderPage)},{path:"manga-reader",loadComponent:()=>import("./chunk-ZD6YFA7V.js").then(o=>o.MangaReaderPage)},{path:"audio-notes",loadComponent:()=>import("./chunk-7B3QUALX.js").then(o=>o.AudioNotesPage)}];var Zn={providers:[Ui(),un(qn,gn())]};var ti=class o{deferredPrompt;canInstall=w(!1,{});constructor(){window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),this.deferredPrompt=i,this.canInstall.set(!0)})}async installPwa(){if(!this.deferredPrompt)return;this.deferredPrompt.prompt();let{outcome:i}=await this.deferredPrompt.userChoice;this.deferredPrompt=null,this.canInstall.set(!1)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var ii=class o{player=null;apiReady=!1;apiLoadPromise=null;loopEnabled=!0;HISTORY_STORAGE_KEY="youtube_url_history";MAX_HISTORY_ITEMS=5;pendingVideoId=null;pendingUrl=null;defaultStreamId="jfKfPfyJRdk";defaultTitle="lofi hip hop radio \u{1F4DA} beats to relax/study to";currentVideoId=this.defaultStreamId;isPlaying=w(!1,{});currentTitle=w(this.defaultTitle,{});isLoading=w(!1,{});isCustomVideo=w(!1,{});urlHistory=w([],{});constructor(){this.loadYouTubeAPI(),this.loadHistoryFromStorage()}loadHistoryFromStorage(){try{let i=localStorage.getItem(this.HISTORY_STORAGE_KEY);if(i){let e=JSON.parse(i);this.urlHistory.set(e)}}catch(i){console.error("Error loading URL history:",i)}}saveHistoryToStorage(){try{localStorage.setItem(this.HISTORY_STORAGE_KEY,JSON.stringify(this.urlHistory()))}catch(i){console.error("Error saving URL history:",i)}}addToHistory(i,e,t){let a=this.urlHistory().filter(g=>g.videoId!==i),p=[{videoId:i,title:e,url:t,timestamp:Date.now()},...a].slice(0,this.MAX_HISTORY_ITEMS);this.urlHistory.set(p),this.saveHistoryToStorage()}updateHistoryTitle(i,e){let n=this.urlHistory().map(a=>a.videoId===i?W(H({},a),{title:e}):a);this.urlHistory.set(n),this.saveHistoryToStorage()}loadYouTubeAPI(){return this.apiLoadPromise?this.apiLoadPromise:(this.apiLoadPromise=new Promise(i=>{if(window.YT&&window.YT.Player){this.apiReady=!0,i();return}let e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";let t=document.getElementsByTagName("script")[0];t.parentNode?.insertBefore(e,t),window.onYouTubeIframeAPIReady=()=>{this.apiReady=!0,i()}}),this.apiLoadPromise)}async initPlayer(i){if(await this.loadYouTubeAPI(),!this.player)return new Promise(e=>{this.player=new window.YT.Player(i,{height:"0",width:"0",videoId:this.defaultStreamId,playerVars:{autoplay:0,controls:0,disablekb:1,fs:0,modestbranding:1,rel:0,showinfo:0},events:{onReady:()=>{this.isLoading.set(!1),e()},onStateChange:t=>{this.handleStateChange(t)},onError:t=>{console.error("YouTube Player Error:",t.data),this.isPlaying.set(!1),this.isLoading.set(!1)}}})})}handleStateChange(i){switch(i.data){case 1:this.isPlaying.set(!0),this.isLoading.set(!1),this.fetchAndUpdateTitle();break;case 2:this.isPlaying.set(!1),this.isLoading.set(!1);break;case 3:this.isLoading.set(!0);break;case 0:this.loopEnabled&&this.player?(this.player.seekTo(0),this.player.playVideo()):(this.isPlaying.set(!1),this.isLoading.set(!1));break;case-1:this.isPlaying.set(!1),this.isLoading.set(!1);break}}fetchAndUpdateTitle(){if(!this.player||!this.player.getVideoData)return;let i=this.player.getVideoData();i&&i.title&&(this.currentTitle.set(i.title),this.pendingVideoId&&this.pendingUrl&&(this.addToHistory(this.pendingVideoId,i.title,this.pendingUrl),this.pendingVideoId=null,this.pendingUrl=null))}togglePlay(){this.player&&(this.isPlaying()?this.player.pauseVideo():(this.isLoading.set(!0),this.player.playVideo()))}play(){this.player&&!this.isPlaying()&&(this.isLoading.set(!0),this.player.playVideo())}pause(){this.player&&this.isPlaying()&&this.player.pauseVideo()}destroy(){this.player&&(this.player.destroy(),this.player=null)}extractVideoId(i){if(!i)return null;let e=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/)([a-zA-Z0-9_-]{11})/,/^([a-zA-Z0-9_-]{11})$/];for(let t of e){let n=i.match(t);if(n)return n[1]}return null}loadCustomVideo(i){let e=this.extractVideoId(i);return!e||!this.player?!1:(this.currentVideoId=e,this.isCustomVideo.set(!0),this.isLoading.set(!0),this.currentTitle.set("L\xE4dt..."),this.pendingVideoId=e,this.pendingUrl=i,this.player.loadVideoById(e),!0)}loadFromHistory(i){this.player&&(this.currentVideoId=i.videoId,this.isCustomVideo.set(!0),this.isLoading.set(!0),this.currentTitle.set(i.title),this.addToHistory(i.videoId,i.title,i.url),this.player.loadVideoById(i.videoId))}clearHistory(){this.urlHistory.set([]),this.saveHistoryToStorage()}resetToDefault(){this.player&&(this.currentVideoId=this.defaultStreamId,this.isCustomVideo.set(!1),this.currentTitle.set(this.defaultTitle),this.isLoading.set(!0),this.player.loadVideoById(this.defaultStreamId))}getCurrentVideoId(){return this.currentVideoId}static \u0275fac=function(e){return new(e||o)};static \u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ba=(o,i)=>i.videoId;function La(o,i){if(o&1&&(r(0,"p",25),s(1),d()),o&2){let e=m(2);l(),S(e.urlError())}}function ja(o,i){if(o&1){let e=P();r(0,"div",2)(1,"div",17)(2,"div",18)(3,"span",19),s(4,"smart_display"),d(),r(5,"span",20),s(6,"YouTube URL"),d()(),r(7,"div",21)(8,"input",22),ne("ngModelChange",function(n){x(e);let a=m();return ie(a.youtubeUrl,n)||(a.youtubeUrl=n),f(n)}),u("keyup.enter",function(){x(e);let n=m();return f(n.loadCustomUrl())}),d(),r(9,"button",23),u("click",function(){x(e);let n=m();return f(n.loadCustomUrl())}),r(10,"span",24),s(11,"check"),d()()(),I(12,La,2,1,"p",25),r(13,"p",26),s(14,"Video wird in Dauerschleife abgespielt \u{1F501}"),d()()()}if(o&2){let e=m();l(8),te("ngModel",e.youtubeUrl),l(4),F(e.urlError()?12:-1)}}function Ga(o,i){if(o&1){let e=P();r(0,"button",34),u("click",function(){let n=x(e).$implicit,a=m(3);return f(a.loadFromHistory(n))}),r(1,"span",35),s(2),d(),r(3,"span",36),s(4),d()()}if(o&2){let e=i.$implicit,t=m(3);V("bg-dash-accent/20",t.youtubePlayer.getCurrentVideoId()===e.videoId),_("title",e.title),l(2),E(" ",t.youtubePlayer.getCurrentVideoId()===e.videoId&&t.youtubePlayer.isPlaying()?"equalizer":"play_circle"," "),l(2),S(e.title)}}function za(o,i){if(o&1&&(r(0,"div",31)(1,"div",32),O(2,Ga,5,5,"button",33,Ba),d()()),o&2){let e=m(2);l(2),B(e.youtubePlayer.urlHistory())}}function $a(o,i){if(o&1){let e=P();r(0,"div",3)(1,"button",27),u("click",function(){x(e);let n=m();return f(n.toggleHistory())}),r(2,"div",18)(3,"span",28),s(4,"history"),d(),r(5,"span",29),s(6,"Zuletzt gespielt"),d(),r(7,"span",11),s(8),d()(),r(9,"span",30),s(10,"expand_more"),d()(),I(11,za,4,0,"div",31),d()}if(o&2){let e=m();l(8),S(e.youtubePlayer.urlHistory().length),l(),V("rotate-180",e.historyExpanded()),l(2),F(e.historyExpanded()?11:-1)}}function Ha(o,i){o&1&&(r(0,"span",11),s(1,"Custom"),d())}function Ua(o,i){if(o&1){let e=P();r(0,"button",37),u("click",function(){x(e);let n=m();return f(n.resetToDefault())}),r(1,"span",15),s(2,"replay"),d()()}}var ni=class o{youtubePlayer=C(ii);youtubeUrl="";showUrlInput=w(!1,{});historyExpanded=w(!1,{});urlError=w("",{});ngAfterViewInit(){this.youtubePlayer.initPlayer("youtube-player-container")}ngOnDestroy(){this.youtubePlayer.destroy()}togglePlay(){this.youtubePlayer.togglePlay()}toggleUrlInput(){this.showUrlInput.update(i=>!i),this.urlError.set("")}toggleHistory(){this.historyExpanded.update(i=>!i)}loadCustomUrl(){if(!this.youtubeUrl.trim()){this.urlError.set("Bitte URL eingeben");return}this.youtubePlayer.loadCustomVideo(this.youtubeUrl)?(this.youtubeUrl="",this.showUrlInput.set(!1),this.urlError.set("")):this.urlError.set("Ung\xFCltige YouTube URL")}loadFromHistory(i){this.youtubePlayer.loadFromHistory(i)}resetToDefault(){this.youtubePlayer.resetToDefault(),this.youtubeUrl="",this.showUrlInput.set(!1),this.urlError.set("")}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-music-player"]],decls:22,vars:16,consts:[[1,"music-player-container"],["id","youtube-player-container",1,"hidden"],[1,"url-input-container","mb-3","p-3","bg-dash-bg/50","rounded-lg","border","border-dash-border/30"],[1,"url-history","mb-3","bg-dash-bg/50","rounded-lg","border","border-dash-border/30","overflow-hidden"],[1,"flex","items-center","gap-3","p-3","bg-dash-bg/50","rounded-lg","border","border-dash-border/30"],[1,"play-button","flex","items-center","justify-center","w-10","h-10","rounded-full","bg-dash-accent","hover:bg-dash-accent/80","text-white","transition-all","duration-200","hover:scale-105","active:scale-95",3,"click","title"],[1,"material-symbols-sharp","text-xl"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-1.5","mb-0.5"],[1,"material-symbols-sharp","text-xs","text-red-500"],[1,"text-[10px]","uppercase","tracking-wider","text-dash-text-dim","font-medium"],[1,"text-[10px]","px-1.5","py-0.5","bg-dash-accent/20","text-dash-accent","rounded-full"],[1,"text-xs","text-dash-text","truncate",3,"title"],[1,"flex","items-center","gap-1"],["title","YouTube URL hinzuf\xFCgen",1,"flex","items-center","justify-center","w-8","h-8","rounded-full","hover:bg-dash-accent/20","text-dash-text-dim","hover:text-dash-accent","transition-all",3,"click"],[1,"material-symbols-sharp","text-lg"],["title","Zur\xFCck zum Standard",1,"flex","items-center","justify-center","w-8","h-8","rounded-full","hover:bg-red-500/20","text-dash-text-dim","hover:text-red-400","transition-all"],[1,"flex","flex-col","gap-2"],[1,"flex","items-center","gap-2"],[1,"material-symbols-sharp","text-red-500","text-lg"],[1,"text-xs","text-dash-text-dim","uppercase","tracking-wider","font-medium"],[1,"flex","gap-2"],["type","text","placeholder","https://youtube.com/watch?v=...",1,"flex-1","px-3","py-2","text-xs","bg-dash-bg","border","border-dash-border/50","rounded-md","text-dash-text","placeholder-dash-text-dim/50","focus:outline-none","focus:border-dash-accent/50","focus:ring-1","focus:ring-dash-accent/30","transition-all",3,"ngModelChange","keyup.enter","ngModel"],["title","Laden",1,"px-3","py-2","bg-dash-accent","hover:bg-dash-accent/80","text-white","text-xs","font-medium","rounded-md","transition-all","hover:scale-105","active:scale-95",3,"click"],[1,"material-symbols-sharp","text-sm"],[1,"text-[10px]","text-red-400"],[1,"text-[10px]","text-dash-text-dim"],[1,"w-full","flex","items-center","justify-between","p-3","hover:bg-dash-accent/5","transition-colors",3,"click"],[1,"material-symbols-sharp","text-dash-accent","text-sm"],[1,"text-[10px]","text-dash-text-dim","uppercase","tracking-wider","font-medium"],[1,"material-symbols-sharp","text-dash-text-dim","text-sm","transition-transform","duration-200"],[1,"history-content","px-3","pb-3"],[1,"flex","flex-col","gap-1"],[1,"history-item","flex","items-center","gap-2","p-2","rounded-md","hover:bg-dash-accent/10","transition-all","text-left","group",3,"bg-dash-accent/20","title"],[1,"history-item","flex","items-center","gap-2","p-2","rounded-md","hover:bg-dash-accent/10","transition-all","text-left","group",3,"click","title"],[1,"material-symbols-sharp","text-xs","text-dash-text-dim","group-hover:text-dash-accent","transition-colors"],[1,"text-xs","text-dash-text","truncate","flex-1"],["title","Zur\xFCck zum Standard",1,"flex","items-center","justify-center","w-8","h-8","rounded-full","hover:bg-red-500/20","text-dash-text-dim","hover:text-red-400","transition-all",3,"click"]],template:function(e,t){e&1&&(r(0,"div",0),A(1,"div",1),I(2,ja,15,2,"div",2),I(3,$a,12,4,"div",3),r(4,"div",4)(5,"button",5),u("click",function(){return t.togglePlay()}),r(6,"span",6),s(7),d()(),r(8,"div",7)(9,"div",8)(10,"span",9),s(11),d(),r(12,"span",10),s(13),d(),I(14,Ha,2,0,"span",11),d(),r(15,"p",12),s(16),d()(),r(17,"div",13)(18,"button",14),u("click",function(){return t.toggleUrlInput()}),r(19,"span",15),s(20,"add_link"),d()(),I(21,Ua,3,0,"button",16),d()()()),e&2&&(l(2),F(t.showUrlInput()?2:-1),l(),F(t.youtubePlayer.urlHistory().length>0?3:-1),l(2),V("animate-pulse",t.youtubePlayer.isLoading()),_("title",t.youtubePlayer.isPlaying()?"Pause":"Play"),l(2),E(" ",t.youtubePlayer.isPlaying()?"pause":"play_arrow"," "),l(4),E(" ",t.youtubePlayer.isPlaying()?"radio_button_checked":"radio_button_unchecked"," "),l(2),E(" ",t.youtubePlayer.isPlaying()?"Live":"Stream"," "),l(),F(t.youtubePlayer.isCustomVideo()?14:-1),l(),_("title",t.youtubePlayer.currentTitle()),l(),E(" ",t.youtubePlayer.currentTitle()," "),l(2),V("text-dash-accent",t.showUrlInput())("bg-dash-accent/20",t.showUrlInput()),l(3),F(t.youtubePlayer.isCustomVideo()?21:-1))},dependencies:[$,q,xe,fe,_e],styles:[".music-player-container[_ngcontent-%COMP%]{border-top:1px solid rgba(var(--color-accent-rgb),.1);padding-top:.75rem}.play-button[_ngcontent-%COMP%]{box-shadow:0 2px 8px rgba(var(--color-accent-rgb),.3)}.play-button[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px rgba(var(--color-accent-rgb),.4)}.hidden[_ngcontent-%COMP%]{position:absolute;width:0;height:0;overflow:hidden;pointer-events:none}.url-input-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.url-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px rgba(var(--color-accent-rgb),.1)}.url-history[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}.history-item[_ngcontent-%COMP%]{min-height:36px}.history-item[_ngcontent-%COMP%]:active{transform:scale(.98)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.history-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .2s ease-out}"]})};function Wa(o,i){if(o&1){let e=P();r(0,"button",33),u("click",function(){x(e);let n=m();return f(n.installPwa())}),r(1,"span",19),s(2,"download"),d(),r(3,"span",20),s(4,"Install"),d()()}}function Ja(o,i){if(o&1){let e=P();r(0,"a",38),u("click",function(){x(e);let n=m(3);return f(n.closeSidebarOnMobile())}),A(1,"div",39),r(2,"img",40),u("error",function(n){return x(e),f(n.target.style.display="none")}),d(),r(3,"span",41),s(4),d()()}if(o&2){let e=m().$implicit,t=m(2);_("href",e.url,We)("title",e.name),l(2),_("src",t.bookmarkService.getFaviconUrl(e.url),We),l(2),S(e.name)}}function Ka(o,i){if(o&1&&(Yi(0),j(1,Ja,5,4,"a",37),qi()),o&2){let e=i.$implicit;l(),_("ngIf",e.isFavorite)}}function Ya(o,i){if(o&1&&(r(0,"div")(1,"h3",34),s(2," Favoriten "),r(3,"span",35),s(4,"star"),d()(),r(5,"div",17),j(6,Ka,2,1,"ng-container",36),d()()),o&2){let e=m();l(6),_("ngForOf",e.bookmarkService.bookmarks())}}var oi=class o{pwa=C(ti);bookmarkService=C(Ze);sidebarService=C(be);settingsService=C(Oe);exportHandler=()=>this.exportAllData();importHandler=()=>this.triggerImportAll();ngOnInit(){window.addEventListener("app:export",this.exportHandler),window.addEventListener("app:import",this.importHandler)}ngOnDestroy(){window.removeEventListener("app:export",this.exportHandler),window.removeEventListener("app:import",this.importHandler)}toggleSidebar(){this.sidebarService.toggle()}onSettingsClick(){this.settingsService.openSettings(),this.closeSidebarOnMobile()}closeSidebarOnMobile(){window.innerWidth<768&&this.sidebarService.close()}installPwa(){this.pwa.installPwa(),this.sidebarService.close()}downloadAudioNotes(){if(confirm("M\xF6chten Sie die AudioNotes App herunterladen?")){let i=document.createElement("a");i.href="audionotes.apk",i.download="audionotes.apk",i.click(),this.sidebarService.close()}}async exportAllData(){let i=(await import("./chunk-7DPAS54S.js")).default,e=new i,t=new Date().toISOString(),n=this.bookmarkService.bookmarks(),a={exportDate:t,version:"1.0",project:"bookmarks",data:n};e.file("bookmarks.json",JSON.stringify(a,null,2));let c=localStorage.getItem("terminal_journal_entries");if(c){let he={exportDate:t,version:"1.0",project:"journal",data:JSON.parse(c)};e.file("journal.json",JSON.stringify(he,null,2))}let p=localStorage.getItem("mybudget_transactions"),g=localStorage.getItem("mybudget_accounts"),h=localStorage.getItem("mybudget_categories"),y=localStorage.getItem("mybudget_fixedcosts"),T=localStorage.getItem("mybudget_fixedcostgroups"),k={exportDate:t,version:"1.2",project:"budget",data:{transactions:p?JSON.parse(p):[],accounts:g?JSON.parse(g):[],categories:h?JSON.parse(h):[],fixedCosts:y?JSON.parse(y):[],fixedCostGroups:T?JSON.parse(T):[]}};e.file("budget.json",JSON.stringify(k,null,2));let D=localStorage.getItem("audio_notes_entries");if(D){let he={exportDate:t,version:"1.0",project:"audioNotes",data:JSON.parse(D)};e.file("audionotes.json",JSON.stringify(he,null,2))}let N=localStorage.getItem("youtube_url_history");if(N){let he={exportDate:t,version:"1.0",project:"recentlyPlayed",data:JSON.parse(N)};e.file("recentlyplayed.json",JSON.stringify(he,null,2))}let L=await e.generateAsync({type:"blob"}),G=window.URL.createObjectURL(L),ge=document.createElement("a");ge.href=G,ge.download=`dashboard_backup_${new Date().toISOString().split("T")[0]}.zip`,ge.click(),window.URL.revokeObjectURL(G)}triggerImportAll(){let i=document.createElement("input");i.type="file",i.accept=".zip",i.onchange=e=>{let t=e.target.files[0];t&&this.processImportAllFile(t)},i.click()}async processImportAllFile(i){try{let t=await(await import("./chunk-7DPAS54S.js")).default.loadAsync(i),n=[],a=t.file("bookmarks.json"),c=t.file("journal.json"),p=t.file("budget.json"),g=t.file("audionotes.json"),h=t.file("recentlyplayed.json");if(!a&&!c&&!p&&!g&&!h){alert("Keine passenden Daten in der Backup-Datei gefunden.");return}if(!confirm("Warnung: Der Import \xFCberschreibt alle bestehenden Daten.\\n\\nFortfahren?"))return;if(a){let y=await a.async("string"),k=(JSON.parse(y).data||[]).map(D=>W(H({},D),{createdAt:D.createdAt||Date.now()}));this.bookmarkService.importBookmarks(k,!0),n.push("Lesezeichen")}if(c){let y=await c.async("string"),k=(JSON.parse(y).data||[]).map(D=>W(H({},D),{date:new Date(D.date)}));localStorage.setItem("terminal_journal_entries",JSON.stringify(k)),n.push("Journal")}if(p){let y=await p.async("string"),k=JSON.parse(y).data||{};k.transactions&&localStorage.setItem("mybudget_transactions",JSON.stringify(k.transactions)),k.accounts&&localStorage.setItem("mybudget_accounts",JSON.stringify(k.accounts)),k.categories&&localStorage.setItem("mybudget_categories",JSON.stringify(k.categories)),k.fixedCosts&&localStorage.setItem("mybudget_fixedcosts",JSON.stringify(k.fixedCosts)),k.fixedCostGroups&&localStorage.setItem("mybudget_fixedcostgroups",JSON.stringify(k.fixedCostGroups)),n.push("Budget")}if(g){let y=await g.async("string"),k=(JSON.parse(y).data||[]).map(D=>W(H({},D),{timestamp:new Date(D.timestamp)}));localStorage.setItem("audio_notes_entries",JSON.stringify(k)),n.push("AudioNotes")}if(h){let y=await h.async("string"),T=JSON.parse(y);localStorage.setItem("youtube_url_history",JSON.stringify(T.data||[])),n.push("Zuletzt gespielt")}alert(`Import erfolgreich!
Importierte Projekte: ${n.join(", ")}

Bitte laden Sie die Seite neu, um alle \xC4nderungen zu sehen.`),window.location.reload()}catch(e){console.error("Import failed",e),alert("Import fehlgeschlagen. Bitte \xFCberpr\xFCfen Sie das Dateiformat.")}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-sidebar"]],decls:86,vars:6,consts:[[1,"sidebar-container","fixed","top-0","left-0","h-full","w-72","z-[60]","flex","flex-col","transform","transition-transform","duration-300","ease-in-out"],[1,"flex-1","flex","flex-col","gap-4","p-4","overflow-y-auto","pb-0"],[1,"flex","items-center","justify-between","pb-2","border-b","border-dash-border"],[1,"text-lg","font-bold","text-dash-text"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"flex","justify-center","gap-3","text-dash-text-dim"],["title","Alle Daten exportieren (Ctrl+E)",1,"flex","items-center","gap-1.5","text-xs","hover:text-dash-accent","transition-colors",3,"click"],[1,"material-symbols-sharp","text-sm"],[1,"text-[10px]","opacity-60"],[1,"text-dash-border"],["title","Alle Daten importieren (Ctrl+I)",1,"flex","items-center","gap-1.5","text-xs","hover:text-dash-accent","transition-colors",3,"click"],[1,"border-t","border-dash-border"],["title","Settings",1,"w-full","bg-dash-bg","rounded-md","flex","items-center","gap-3","px-3","py-2.5","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all","hover:shadow-md",3,"click"],[1,"material-symbols-sharp","text-xl"],[1,"text-sm","font-medium"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","tracking-wider","mb-2","px-1"],[1,"grid","grid-cols-3","gap-2"],["routerLink","/","title","Dashboard (Alt+D)",1,"aspect-square","bg-dash-bg","rounded-sm","flex","flex-col","items-center","justify-center","gap-0.5","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all","hover:shadow-md",3,"click"],[1,"material-symbols-sharp","text-2xl"],[1,"text-[10px]","font-medium"],[1,"text-[9px]","opacity-60"],["routerLink","/journal","title","Journal (Alt+J)",1,"aspect-square","bg-dash-bg","rounded-sm","flex","flex-col","items-center","justify-center","gap-0.5","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all","hover:shadow-md",3,"click"],["routerLink","/budget","title","Budget (Alt+B)",1,"aspect-square","bg-dash-bg","rounded-sm","flex","flex-col","items-center","justify-center","gap-0.5","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all","hover:shadow-md",3,"click"],["routerLink","/manga-builder","title","Manga Builder (Alt+M)",1,"aspect-square","bg-dash-bg","rounded-sm","flex","flex-col","items-center","justify-center","gap-0.5","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all","hover:shadow-md",3,"click"],[1,"text-[10px]","font-medium","text-center","leading-tight"],["routerLink","/audio-notes","title","AudioNotes (Alt+A)",1,"aspect-square","bg-dash-bg","rounded-sm","flex","flex-col","items-center","justify-center","gap-0.5","hover:bg-dash-accent","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all","hover:shadow-md",3,"click"],["class","aspect-square bg-dash-bg/50 hover:bg-dash-accent rounded-sm flex flex-col items-center justify-center gap-1 cursor-pointer text-dash-text-dim hover:text-white transition-all hover:shadow-md","title","Install App",3,"click",4,"ngIf"],[4,"ngIf"],[1,"music-player-wrapper","p-4","pt-2"],[1,"credits-footer","px-4","pb-3","pt-1","text-[9px]","text-dash-text-dim/60","border-t","border-dash-border/30","text-center"],["href","https://www.flaticon.com","target","_blank","rel","noopener noreferrer",1,"hover:text-dash-accent","transition-colors","underline"],["href","https://www.youtube.com","target","_blank","rel","noopener noreferrer",1,"hover:text-dash-accent","transition-colors","underline"],["title","Install App",1,"aspect-square","bg-dash-bg/50","hover:bg-dash-accent","rounded-sm","flex","flex-col","items-center","justify-center","gap-1","cursor-pointer","text-dash-text-dim","hover:text-white","transition-all","hover:shadow-md",3,"click"],[1,"text-xs","font-bold","text-dash-text-dim","uppercase","tracking-wider","mb-2","px-1","flex","items-center","gap-2"],[1,"material-symbols-sharp","text-[10px]"],[4,"ngFor","ngForOf"],["target","_blank","class","aspect-square gradient-card hover:border-dash-accent rounded-sm flex flex-col items-center justify-center gap-1 cursor-pointer text-dash-text hover:text-dash-accent transition-all group relative overflow-hidden hover:shadow-md",3,"href","title","click",4,"ngIf"],["target","_blank",1,"aspect-square","gradient-card","hover:border-dash-accent","rounded-sm","flex","flex-col","items-center","justify-center","gap-1","cursor-pointer","text-dash-text","hover:text-dash-accent","transition-all","group","relative","overflow-hidden","hover:shadow-md",3,"click","href","title"],[1,"absolute","inset-0","bg-gradient-to-br","from-dash-accent/10","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity"],["alt","Icon",1,"w-6","h-6","rounded-sm","mb-1",3,"error","src"],[1,"text-[10px]","font-medium","truncate","w-full","text-center","px-1"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4,"Navigation"),d(),r(5,"button",4),u("click",function(){return t.toggleSidebar()}),r(6,"span",5),s(7,"chevron_left"),d()()(),r(8,"div",6)(9,"button",7),u("click",function(){return t.exportAllData()}),r(10,"span",8),s(11,"download"),d(),r(12,"span"),s(13,"Export"),d(),r(14,"span",9),s(15,"Ctrl+E"),d()(),r(16,"span",10),s(17,"|"),d(),r(18,"button",11),u("click",function(){return t.triggerImportAll()}),r(19,"span",8),s(20,"upload"),d(),r(21,"span"),s(22,"Import"),d(),r(23,"span",9),s(24,"Ctrl+I"),d()()(),A(25,"div",12),r(26,"button",13),u("click",function(){return t.onSettingsClick()}),r(27,"span",14),s(28,"settings"),d(),r(29,"span",15),s(30,"Settings"),d()(),r(31,"div")(32,"h3",16),s(33,"Projekte"),d(),r(34,"div",17)(35,"a",18),u("click",function(){return t.closeSidebarOnMobile()}),r(36,"span",19),s(37,"dashboard"),d(),r(38,"span",20),s(39,"Dashboard"),d(),r(40,"span",21),s(41,"Alt+D"),d()(),r(42,"a",22),u("click",function(){return t.closeSidebarOnMobile()}),r(43,"span",19),s(44,"book"),d(),r(45,"span",20),s(46,"Journal"),d(),r(47,"span",21),s(48,"Alt+J"),d()(),r(49,"a",23),u("click",function(){return t.closeSidebarOnMobile()}),r(50,"span",19),s(51,"account_balance_wallet"),d(),r(52,"span",20),s(53,"Budget"),d(),r(54,"span",21),s(55,"Alt+B"),d()(),r(56,"a",24),u("click",function(){return t.closeSidebarOnMobile()}),r(57,"span",19),s(58,"auto_stories"),d(),r(59,"span",25),s(60,"Manga"),A(61,"br"),s(62,"Builder"),d(),r(63,"span",21),s(64,"Alt+M"),d()(),r(65,"a",26),u("click",function(){return t.closeSidebarOnMobile()}),r(66,"span",19),s(67,"mic"),d(),r(68,"span",25),s(69,"Audio"),A(70,"br"),s(71,"Notes"),d(),r(72,"span",21),s(73,"Alt+A"),d()(),j(74,Wa,5,0,"button",27),d()(),j(75,Ya,7,1,"div",28),d(),r(76,"div",29),A(77,"app-music-player"),d(),r(78,"div",30)(79,"span"),s(80,"Icons by "),r(81,"a",31),s(82,"Flaticon"),d(),s(83," \xB7 Music by "),r(84,"a",32),s(85,"YouTube"),d()()()()),e&2&&(V("translate-x-0",t.sidebarService.isOpen())("-translate-x-full",!t.sidebarService.isOpen()),l(74),_("ngIf",t.pwa.canInstall()),l(),_("ngIf",t.bookmarkService.bookmarks().length>0))},dependencies:[$,Ke,le,Ye,pn,ni],styles:[".sidebar-container[_ngcontent-%COMP%]{border-right:1px solid rgba(var(--color-accent-rgb),.1);background:linear-gradient(135deg,#1e1e23f2,#141419f2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.music-player-wrapper[_ngcontent-%COMP%], .credits-footer[_ngcontent-%COMP%]{flex-shrink:0;background:inherit}"]})};var qa=(o,i)=>i.date;function Za(o,i){o&1&&(b(0,"div",18)(1,"div",27)(2,"span",28),s(3,"cloud"),v(),b(4,"span",29),s(5,"Wird geladen..."),v()()())}function Xa(o,i){if(o&1&&(b(0,"div",19)(1,"div",30)(2,"span",31),s(3,"error"),v(),b(4,"span",29),s(5),v()()()),o&2){let e=m();l(5),S(e.weatherError())}}function Qa(o,i){if(o&1&&(b(0,"div",43)(1,"span",44),s(2),v(),b(3,"span",45),s(4),v(),b(5,"div",46)(6,"span",47),s(7),v(),b(8,"span",48),s(9),v()()()),o&2){let e=i.$implicit,t=i.$index,n=m(2);l(2),S(n.getDayName(e.date,t)),l(2),E(" ",n.getWeatherIcon(e.weatherCode)," "),l(3),E("",e.tempMax,"\xB0"),l(2),E("/",e.tempMin,"\xB0")}}function es(o,i){if(o&1&&(b(0,"div",32)(1,"div",33)(2,"span",34),s(3,"location_on"),v(),b(4,"span"),s(5),v()(),b(6,"div",35)(7,"span",36),s(8),v(),b(9,"div",37)(10,"div",38),s(11),v(),b(12,"div",29),s(13),v()()(),b(14,"div",39)(15,"div",40)(16,"span",34),s(17,"air"),v(),b(18,"span"),s(19),v()(),b(20,"div",40)(21,"span",34),s(22,"humidity_percentage"),v(),b(23,"span"),s(24),v()()()(),oe(25,"div",41),b(26,"div",42),O(27,Qa,10,4,"div",43,qa),v()),o&2){let e=m();l(5),S(e.currentWeather().location),l(3),E(" ",e.getWeatherIcon(e.currentWeather().weatherCode)," "),l(3),E("",e.currentWeather().temperature,"\xB0"),l(2),E("",e.getWeatherDescription(e.currentWeather().weatherCode)," "),l(6),E("",e.currentWeather().windSpeed," km/h"),l(5),E("",e.currentWeather().humidity,"%"),l(3),B(e.forecast())}}function ts(o,i){if(o&1&&(Pe(),oe(0,"circle",53)),o&2){m();let e=en(7),t=m();se("cx",e.x)("cy",e.y)("fill",t.budgetStats().totalBalance>=0?"#4ade80":"#f87171")}}function is(o,i){if(o&1&&(b(0,"div",26)(1,"div",49),s(2,"Trend (letzte 7 Tage)"),v(),Pe(),b(3,"svg",50),oe(4,"line",51)(5,"polygon")(6,"polyline",52),Xi(7),I(8,ts,1,3,":svg:circle",53),v()()),o&2){let e=m();l(5),se("points",e.getBudgetTrendAreaPoints())("fill",e.budgetStats().totalBalance>=0?"rgba(74, 222, 128, 0.2)":"rgba(248, 113, 113, 0.2)"),l(),se("points",e.getBudgetTrendLinePoints())("stroke",e.budgetStats().totalBalance>=0?"#4ade80":"#f87171"),l();let t=Qi(e.getLastTrendPoint());l(),F(t?8:-1)}}var ri=class o{sidebarService=C(be);journalService=C(ve);budgetTransactions=w([],{});budgetAccounts=w([],{});currentTime=w("",{});currentDate=w("",{});currentDay=w("",{});currentWeek=w(0,{});currentWeather=w(null,{});forecast=w([],{});weatherLoading=w(!0,{});weatherError=w(null,{});clockInterval=null;weatherInterval=null;totalJournalEntries=de(()=>this.journalService.entries().length,{});budgetStats=de(()=>{let i=new Date,e=i.getMonth(),t=i.getFullYear(),n=this.budgetTransactions(),c=this.budgetAccounts().reduce((y,T)=>y+T.balance,0),p=n.filter(y=>{let T=new Date(y.date);return T.getMonth()===e&&T.getFullYear()===t}),g=p.filter(y=>y.type==="income").reduce((y,T)=>y+T.amount,0),h=p.filter(y=>y.type==="expense").reduce((y,T)=>y+T.amount,0);return{totalBalance:c,income:g,expenses:h}},{});budgetTrendData=de(()=>{let i=this.budgetTransactions(),t=this.budgetAccounts().reduce((g,h)=>g+h.balance,0),n=[],a=new Date;a.setHours(23,59,59,999);for(let g=6;g>=0;g--){let h=new Date(a);h.setDate(h.getDate()-g),h.setHours(0,0,0,0),n.push({date:h,balance:0})}let c=t,p=[...i].sort((g,h)=>new Date(h.date).getTime()-new Date(g.date).getTime());n[6].balance=c;for(let g=5;g>=0;g--){let h=n[g].date;new Date(h).setHours(23,59,59,999);let T=n[g+1].date,k=p.filter(D=>{let N=new Date(D.date);return N>=h&&N<T});for(let D of k)D.type==="income"?c-=D.amount:D.type==="expense"&&(c+=D.amount);n[g].balance=c}return n},{});ngOnInit(){this.updateClock(),this.clockInterval=setInterval(()=>this.updateClock(),1e3),this.loadWeather(),this.weatherInterval=setInterval(()=>this.loadWeather(),1800*1e3),this.loadBudgetData()}loadBudgetData(){let i=localStorage.getItem("mybudget_transactions"),e=localStorage.getItem("mybudget_accounts");i&&this.budgetTransactions.set(JSON.parse(i)),e&&this.budgetAccounts.set(JSON.parse(e))}ngOnDestroy(){this.clockInterval&&clearInterval(this.clockInterval),this.weatherInterval&&clearInterval(this.weatherInterval)}updateClock(){let i=new Date;this.currentTime.set(i.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})),this.currentDate.set(i.toLocaleDateString("de-DE",{day:"numeric",month:"long",year:"numeric"})),this.currentDay.set(i.toLocaleDateString("de-DE",{weekday:"long"})),this.currentWeek.set(this.getWeekNumber(i))}getWeekNumber(i){let e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())),t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t);let n=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-n.getTime())/864e5+1)/7)}toggleSidebar(){this.sidebarService.toggleRight()}async loadWeather(){this.weatherLoading.set(!0),this.weatherError.set(null);try{let i=48.2082,e=16.3738,t="Wien";try{let p=await this.getCurrentPosition();i=p.coords.latitude,e=p.coords.longitude,t=await this.getLocationName(i,e)}catch{}let n=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${i}&longitude=${e}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=auto&forecast_days=3`);if(!n.ok)throw new Error("Weather API error");let a=await n.json();this.currentWeather.set({temperature:Math.round(a.current.temperature_2m),weatherCode:a.current.weather_code,windSpeed:Math.round(a.current.wind_speed_10m),humidity:a.current.relative_humidity_2m,location:t});let c=a.daily.time.slice(0,3).map((p,g)=>({date:new Date(p),tempMax:Math.round(a.daily.temperature_2m_max[g]),tempMin:Math.round(a.daily.temperature_2m_min[g]),weatherCode:a.daily.weather_code[g]}));this.forecast.set(c)}catch{this.weatherError.set("Wetter konnte nicht geladen werden")}finally{this.weatherLoading.set(!1)}}getCurrentPosition(){return new Promise((i,e)=>{if(!navigator.geolocation){e(new Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(i,e,{timeout:5e3,maximumAge:6e5})})}async getLocationName(i,e){try{let n=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${i}&lon=${e}&zoom=10`)).json();return n.address?.city||n.address?.town||n.address?.village||"Unbekannt"}catch{return"Unbekannt"}}getWeatherIcon(i){return{0:"clear_day",1:"partly_cloudy_day",2:"partly_cloudy_day",3:"cloud",45:"foggy",48:"foggy",51:"rainy",53:"rainy",55:"rainy",56:"weather_snowy",57:"weather_snowy",61:"rainy",63:"rainy",65:"rainy",66:"weather_snowy",67:"weather_snowy",71:"weather_snowy",73:"weather_snowy",75:"weather_snowy",77:"weather_snowy",80:"rainy",81:"rainy",82:"rainy",85:"weather_snowy",86:"weather_snowy",95:"thunderstorm",96:"thunderstorm",99:"thunderstorm"}[i]||"cloud"}getWeatherDescription(i){return{0:"Klar",1:"\xDCberwiegend klar",2:"Teilweise bew\xF6lkt",3:"Bew\xF6lkt",45:"Nebel",48:"Nebel mit Reif",51:"Leichter Nieselregen",53:"Nieselregen",55:"Starker Nieselregen",56:"Gefrierender Nieselregen",57:"Starker gefr. Nieselregen",61:"Leichter Regen",63:"Regen",65:"Starker Regen",66:"Gefrierender Regen",67:"Starker gefr. Regen",71:"Leichter Schneefall",73:"Schneefall",75:"Starker Schneefall",77:"Schneek\xF6rner",80:"Leichte Regenschauer",81:"Regenschauer",82:"Starke Regenschauer",85:"Leichte Schneeschauer",86:"Starke Schneeschauer",95:"Gewitter",96:"Gewitter mit Hagel",99:"Schweres Gewitter mit Hagel"}[i]||"Unbekannt"}getDayName(i,e){return e===0?"Heute":e===1?"Morgen":i.toLocaleDateString("de-DE",{weekday:"short"})}formatCurrency(i){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(i)}getCurrentMonthName(){return new Date().toLocaleDateString("de-DE",{month:"long"})}getBudgetTrendLinePoints(){let i=this.budgetTrendData();if(i.length<2)return"";let e=i.map(h=>h.balance),t=Math.max(...e),n=Math.min(...e),a=t-n||1,c=100,p=40,g=2;return i.map((h,y)=>{let T=y/(i.length-1)*c,k=(h.balance-n)/a,D=p-g-k*(p-g*2);return`${T},${D}`}).join(" ")}getBudgetTrendAreaPoints(){let i=this.getBudgetTrendLinePoints();if(!i)return"";let e=40;return`0,${e} ${i} 100,${e}`}getLastTrendPoint(){let i=this.budgetTrendData();if(i.length<2)return null;let e=i.map(k=>k.balance),t=Math.max(...e),n=Math.min(...e),a=t-n||1,c=40,p=2,g=i.length-1,h=100,y=(i[g].balance-n)/a,T=c-p-y*(c-p*2);return{x:h,y:T}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-right-sidebar"]],decls:64,vars:15,consts:[[1,"sidebar-container","fixed","top-0","right-0","h-full","w-72","z-[60]","flex","flex-col","gap-4","p-4","overflow-y-auto","transform","transition-transform","duration-300","ease-in-out"],[1,"flex","items-center","justify-between","pb-2","border-b","border-dash-border"],[1,"text-dash-text-dim","hover:text-white","transition-colors",3,"click"],[1,"material-symbols-sharp"],[1,"text-lg","font-bold","text-dash-text"],[1,"gradient-card","p-4"],[1,"flex","items-center","gap-2","mb-2"],[1,"material-symbols-sharp","text-dash-accent"],[1,"text-sm","font-medium","text-dash-text-dim","uppercase","tracking-wider"],[1,"text-center"],[1,"text-4xl","font-bold","text-white","tracking-wider","font-mono"],[1,"text-base","text-dash-accent","font-medium","capitalize","mt-1"],[1,"flex","justify-center","items-center","gap-2","text-sm","text-dash-text-dim","mt-1"],[1,"opacity-50"],[1,"flex","items-center","justify-between","mb-3"],[1,"flex","items-center","gap-2"],[1,"text-dash-text-dim","hover:text-dash-accent","transition-colors",3,"click"],[1,"material-symbols-sharp","text-lg"],[1,"flex","items-center","justify-center","py-6"],[1,"flex","items-center","justify-center","py-4","text-center"],[1,"flex","items-center","justify-between"],["routerLink","/journal",1,"text-dash-text-dim","hover:text-dash-accent","transition-colors"],[1,"text-center","mt-3"],[1,"text-3xl","font-bold","text-white"],[1,"text-xs","text-dash-text-dim"],["routerLink","/budget",1,"text-dash-text-dim","hover:text-dash-accent","transition-colors"],[1,"bg-black/20","rounded-lg","p-2"],[1,"animate-pulse","flex","flex-col","items-center","gap-2"],[1,"material-symbols-sharp","text-4xl","text-dash-text-dim"],[1,"text-sm","text-dash-text-dim"],[1,"flex","flex-col","items-center","gap-2"],[1,"material-symbols-sharp","text-3xl","text-red-400"],[1,"text-center","mb-4"],[1,"flex","items-center","justify-center","gap-2","text-dash-text-dim","text-xs","mb-2"],[1,"material-symbols-sharp","text-sm"],[1,"flex","items-center","justify-center","gap-3"],[1,"material-symbols-sharp","text-5xl","text-dash-accent"],[1,"text-left"],[1,"text-4xl","font-bold","text-white"],[1,"flex","justify-center","gap-4","mt-3","text-xs","text-dash-text-dim"],[1,"flex","items-center","gap-1"],[1,"border-t","border-dash-border","my-3"],[1,"flex","justify-between"],[1,"flex","flex-col","items-center","gap-1","flex-1"],[1,"text-xs","text-dash-text-dim","font-medium"],[1,"material-symbols-sharp","text-xl","text-dash-accent"],[1,"text-xs"],[1,"text-white","font-semibold"],[1,"text-dash-text-dim"],[1,"text-xs","text-dash-text-dim","text-center","mb-2"],["viewBox","0 0 100 40","preserveAspectRatio","none",1,"w-full","h-12"],["x1","0","y1","20","x2","100","y2","20","stroke","rgba(255,255,255,0.1)","stroke-width","0.5","stroke-dasharray","2,2"],["fill","none","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["r","2"]],template:function(e,t){e&1&&(b(0,"div",0)(1,"div",1)(2,"button",2),Ce("click",function(){return t.toggleSidebar()}),b(3,"span",3),s(4,"chevron_right"),v()(),b(5,"h2",4),s(6,"Widgets"),v()(),b(7,"div",5)(8,"div",6)(9,"span",7),s(10,"schedule"),v(),b(11,"span",8),s(12,"Uhrzeit"),v()(),b(13,"div",9)(14,"div",10),s(15),v(),b(16,"div",11),s(17),v(),b(18,"div",12)(19,"span"),s(20),v(),b(21,"span",13),s(22,"\u2022"),v(),b(23,"span"),s(24),v()()()(),b(25,"div",5)(26,"div",14)(27,"div",15)(28,"span",7),s(29,"cloud"),v(),b(30,"span",8),s(31,"Wetter"),v()(),b(32,"button",16),Ce("click",function(){return t.loadWeather()}),b(33,"span",17),s(34,"refresh"),v()()(),I(35,Za,6,0,"div",18),I(36,Xa,6,1,"div",19),I(37,es,29,6),v(),b(38,"div",5)(39,"div",20)(40,"div",15)(41,"span",7),s(42,"book"),v(),b(43,"span",8),s(44,"Journal"),v()(),b(45,"a",21)(46,"span",17),s(47,"arrow_forward"),v()()(),b(48,"div",22)(49,"div",23),s(50),v(),b(51,"div",24),s(52,"Eintr\xE4ge"),v()()(),b(53,"div",5)(54,"div",14)(55,"div",15)(56,"span",7),s(57,"account_balance_wallet"),v(),b(58,"span",8),s(59,"Budget"),v()(),b(60,"a",25)(61,"span",17),s(62,"arrow_forward"),v()()(),I(63,is,9,6,"div",26),v()()),e&2&&(V("translate-x-0",t.sidebarService.isRightOpen())("translate-x-full",!t.sidebarService.isRightOpen()),l(15),E(" ",t.currentTime()," "),l(2),E(" ",t.currentDay()," "),l(3),S(t.currentDate()),l(4),E("KW ",t.currentWeek()),l(8),V("animate-spin",t.weatherLoading()),l(3),F(t.weatherLoading()?35:-1),l(),F(t.weatherError()&&!t.weatherLoading()?36:-1),l(),F(t.currentWeather()&&!t.weatherLoading()&&!t.weatherError()?37:-1),l(13),S(t.totalJournalEntries()),l(13),F(t.budgetTrendData().length>1?63:-1))},dependencies:[$],styles:[".sidebar-container[_ngcontent-%COMP%]{border-left:1px solid rgba(var(--color-accent-rgb),.1);background:linear-gradient(135deg,#1e1e23f2,#141419f2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);scrollbar-width:none;-ms-overflow-style:none}.sidebar-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]})};var ai=class o{themeService=C(Re);router=C(Ae);sidebarService=C(be);ngOnInit(){this.router.events.pipe(yt(i=>i instanceof cn),Ct(1)).subscribe(i=>{i.url==="/"&&this.isAndroidDevice()&&this.router.navigate(["/audio-notes"])})}isAndroidDevice(){return navigator.userAgent.toLowerCase().includes("android")}handleKeyboardEvent(i){if(i.altKey&&!i.ctrlKey&&!i.shiftKey)switch(i.key.toLowerCase()){case"d":i.preventDefault(),this.router.navigate(["/"]);break;case"j":i.preventDefault(),this.router.navigate(["/journal"]);break;case"b":i.preventDefault(),this.router.navigate(["/budget"]);break;case"m":i.preventDefault(),this.router.navigate(["/manga-builder"]);break;case"a":i.preventDefault(),this.router.navigate(["/audio-notes"]);break;case"s":i.preventDefault(),this.sidebarService.toggleBoth();break}if(i.ctrlKey&&!i.altKey&&!i.shiftKey)switch(i.key.toLowerCase()){case"e":i.preventDefault(),window.dispatchEvent(new CustomEvent("app:export"));break;case"i":i.preventDefault(),window.dispatchEvent(new CustomEvent("app:import"));break}}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=R({type:o,selectors:[["app-root"]],hostBindings:function(e,t){e&1&&u("keydown",function(a){return t.handleKeyboardEvent(a)},Ki)},decls:4,vars:0,consts:[[1,"fade-in"]],template:function(e,t){e&1&&(A(0,"app-sidebar")(1,"app-right-sidebar"),r(2,"div",0),A(3,"router-outlet"),d())},dependencies:[mn,oi,ri],styles:[".fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]})};ln(ai,Zn).catch(o=>console.error(o));
